{"version":3,"file":"index-40ba9584.js","sources":["../../node_modules/jspsych/dist/index.js","../../src/prepare.js","../../node_modules/@jspsych-contrib/plugin-pipe/dist/index.js","../../node_modules/js-yaml/dist/js-yaml.mjs","../../src/utils.js","../../node_modules/@jspsych/plugin-html-keyboard-response/dist/index.js","../../node_modules/@jspsych/plugin-preload/dist/index.js","../../node_modules/@jspsych/plugin-survey-multi-select/dist/index.js","../../node_modules/@jspsych/plugin-fullscreen/dist/index.js","../../node_modules/@jspsych/plugin-instructions/dist/index.js","../../src/jspsych-keyboard-display.js","../../node_modules/@jspsych/plugin-survey-multi-choice/dist/index.js","../../node_modules/@jspsych/plugin-html-button-response/dist/index.js","../../node_modules/@jspsych/plugin-survey-text/dist/index.js","../../src/jspsych-typing.js","../../src/experiment.js"],"sourcesContent":["/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n// Gets all non-builtin properties up the prototype chain\nconst getAllProperties = object => {\n\tconst properties = new Set();\n\n\tdo {\n\t\tfor (const key of Reflect.ownKeys(object)) {\n\t\t\tproperties.add([object, key]);\n\t\t}\n\t} while ((object = Reflect.getPrototypeOf(object)) && object !== Object.prototype);\n\n\treturn properties;\n};\n\nvar autoBind = (self, {include, exclude} = {}) => {\n\tconst filter = key => {\n\t\tconst match = pattern => typeof pattern === 'string' ? key === pattern : pattern.test(key);\n\n\t\tif (include) {\n\t\t\treturn include.some(match);\n\t\t}\n\n\t\tif (exclude) {\n\t\t\treturn !exclude.some(match);\n\t\t}\n\n\t\treturn true;\n\t};\n\n\tfor (const [object, key] of getAllProperties(self.constructor.prototype)) {\n\t\tif (key === 'constructor' || !filter(key)) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst descriptor = Reflect.getOwnPropertyDescriptor(object, key);\n\t\tif (descriptor && typeof descriptor.value === 'function') {\n\t\t\tself[key] = self[key].bind(self);\n\t\t}\n\t}\n\n\treturn self;\n};\n\nvar version = \"7.3.1\";\n\nclass MigrationError extends Error {\r\n    constructor(message = \"The global `jsPsych` variable is no longer available in jsPsych v7.\") {\r\n        super(`${message} Please follow the migration guide at https://www.jspsych.org/7.0/support/migration-v7/ to update your experiment.`);\r\n        this.name = \"MigrationError\";\r\n    }\r\n}\r\n// Define a global jsPsych object to handle invocations on it with migration errors\r\nwindow.jsPsych = {\r\n    get init() {\r\n        throw new MigrationError(\"`jsPsych.init()` was replaced by `initJsPsych()` in jsPsych v7.\");\r\n    },\r\n    get data() {\r\n        throw new MigrationError();\r\n    },\r\n    get randomization() {\r\n        throw new MigrationError();\r\n    },\r\n    get turk() {\r\n        throw new MigrationError();\r\n    },\r\n    get pluginAPI() {\r\n        throw new MigrationError();\r\n    },\r\n    get ALL_KEYS() {\r\n        throw new MigrationError('jsPsych.ALL_KEYS was replaced by the \"ALL_KEYS\" string in jsPsych v7.');\r\n    },\r\n    get NO_KEYS() {\r\n        throw new MigrationError('jsPsych.NO_KEYS was replaced by the \"NO_KEYS\" string in jsPsych v7.');\r\n    },\r\n};\n\n/**\r\n * Finds all of the unique items in an array.\r\n * @param arr The array to extract unique values from\r\n * @returns An array with one copy of each unique item in `arr`\r\n */\r\nfunction unique(arr) {\r\n    return [...new Set(arr)];\r\n}\r\nfunction deepCopy(obj) {\r\n    if (!obj)\r\n        return obj;\r\n    let out;\r\n    if (Array.isArray(obj)) {\r\n        out = [];\r\n        for (const x of obj) {\r\n            out.push(deepCopy(x));\r\n        }\r\n        return out;\r\n    }\r\n    else if (typeof obj === \"object\" && obj !== null) {\r\n        out = {};\r\n        for (const key in obj) {\r\n            if (obj.hasOwnProperty(key)) {\r\n                out[key] = deepCopy(obj[key]);\r\n            }\r\n        }\r\n        return out;\r\n    }\r\n    else {\r\n        return obj;\r\n    }\r\n}\n\nvar utils = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    unique: unique,\n    deepCopy: deepCopy\n});\n\nclass DataColumn {\r\n    constructor(values = []) {\r\n        this.values = values;\r\n    }\r\n    sum() {\r\n        let s = 0;\r\n        for (const v of this.values) {\r\n            s += v;\r\n        }\r\n        return s;\r\n    }\r\n    mean() {\r\n        return this.sum() / this.count();\r\n    }\r\n    median() {\r\n        if (this.values.length === 0) {\r\n            return undefined;\r\n        }\r\n        const numbers = this.values.slice(0).sort(function (a, b) {\r\n            return a - b;\r\n        });\r\n        const middle = Math.floor(numbers.length / 2);\r\n        const isEven = numbers.length % 2 === 0;\r\n        return isEven ? (numbers[middle] + numbers[middle - 1]) / 2 : numbers[middle];\r\n    }\r\n    min() {\r\n        return Math.min.apply(null, this.values);\r\n    }\r\n    max() {\r\n        return Math.max.apply(null, this.values);\r\n    }\r\n    count() {\r\n        return this.values.length;\r\n    }\r\n    variance() {\r\n        const mean = this.mean();\r\n        let sum_square_error = 0;\r\n        for (const x of this.values) {\r\n            sum_square_error += Math.pow(x - mean, 2);\r\n        }\r\n        const mse = sum_square_error / (this.values.length - 1);\r\n        return mse;\r\n    }\r\n    sd() {\r\n        const mse = this.variance();\r\n        const rmse = Math.sqrt(mse);\r\n        return rmse;\r\n    }\r\n    frequencies() {\r\n        const unique = {};\r\n        for (const x of this.values) {\r\n            if (typeof unique[x] === \"undefined\") {\r\n                unique[x] = 1;\r\n            }\r\n            else {\r\n                unique[x]++;\r\n            }\r\n        }\r\n        return unique;\r\n    }\r\n    all(eval_fn) {\r\n        for (const x of this.values) {\r\n            if (!eval_fn(x)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    subset(eval_fn) {\r\n        const out = [];\r\n        for (const x of this.values) {\r\n            if (eval_fn(x)) {\r\n                out.push(x);\r\n            }\r\n        }\r\n        return new DataColumn(out);\r\n    }\r\n}\n\n// private function to save text file on local drive\r\nfunction saveTextToFile(textstr, filename) {\r\n    const blobToSave = new Blob([textstr], {\r\n        type: \"text/plain\",\r\n    });\r\n    let blobURL = \"\";\r\n    if (typeof window.webkitURL !== \"undefined\") {\r\n        blobURL = window.webkitURL.createObjectURL(blobToSave);\r\n    }\r\n    else {\r\n        blobURL = window.URL.createObjectURL(blobToSave);\r\n    }\r\n    const link = document.createElement(\"a\");\r\n    link.id = \"jspsych-download-as-text-link\";\r\n    link.style.display = \"none\";\r\n    link.download = filename;\r\n    link.href = blobURL;\r\n    link.click();\r\n}\r\n// this function based on code suggested by StackOverflow users:\r\n// http://stackoverflow.com/users/64741/zachary\r\n// http://stackoverflow.com/users/317/joseph-sturtevant\r\nfunction JSON2CSV(objArray) {\r\n    const array = typeof objArray != \"object\" ? JSON.parse(objArray) : objArray;\r\n    let line = \"\";\r\n    let result = \"\";\r\n    const columns = [];\r\n    for (const row of array) {\r\n        for (const key in row) {\r\n            let keyString = key + \"\";\r\n            keyString = '\"' + keyString.replace(/\"/g, '\"\"') + '\",';\r\n            if (!columns.includes(key)) {\r\n                columns.push(key);\r\n                line += keyString;\r\n            }\r\n        }\r\n    }\r\n    line = line.slice(0, -1); // removes last comma\r\n    result += line + \"\\r\\n\";\r\n    for (const row of array) {\r\n        line = \"\";\r\n        for (const col of columns) {\r\n            let value = typeof row[col] === \"undefined\" ? \"\" : row[col];\r\n            if (typeof value == \"object\") {\r\n                value = JSON.stringify(value);\r\n            }\r\n            const valueString = value + \"\";\r\n            line += '\"' + valueString.replace(/\"/g, '\"\"') + '\",';\r\n        }\r\n        line = line.slice(0, -1);\r\n        result += line + \"\\r\\n\";\r\n    }\r\n    return result;\r\n}\r\n// this function is modified from StackOverflow:\r\n// http://stackoverflow.com/posts/3855394\r\nfunction getQueryString() {\r\n    const a = window.location.search.substr(1).split(\"&\");\r\n    const b = {};\r\n    for (let i = 0; i < a.length; ++i) {\r\n        const p = a[i].split(\"=\", 2);\r\n        if (p.length == 1)\r\n            b[p[0]] = \"\";\r\n        else\r\n            b[p[0]] = decodeURIComponent(p[1].replace(/\\+/g, \" \"));\r\n    }\r\n    return b;\r\n}\n\nclass DataCollection {\r\n    constructor(data = []) {\r\n        this.trials = data;\r\n    }\r\n    push(new_data) {\r\n        this.trials.push(new_data);\r\n        return this;\r\n    }\r\n    join(other_data_collection) {\r\n        this.trials = this.trials.concat(other_data_collection.values());\r\n        return this;\r\n    }\r\n    top() {\r\n        if (this.trials.length <= 1) {\r\n            return this;\r\n        }\r\n        else {\r\n            return new DataCollection([this.trials[this.trials.length - 1]]);\r\n        }\r\n    }\r\n    /**\r\n     * Queries the first n elements in a collection of trials.\r\n     *\r\n     * @param n A positive integer of elements to return. A value of\r\n     *          n that is less than 1 will throw an error.\r\n     *\r\n     * @return First n objects of a collection of trials. If fewer than\r\n     *         n trials are available, the trials.length elements will\r\n     *         be returned.\r\n     *\r\n     */\r\n    first(n = 1) {\r\n        if (n < 1) {\r\n            throw `You must query with a positive nonzero integer. Please use a\n               different value for n.`;\r\n        }\r\n        if (this.trials.length === 0)\r\n            return new DataCollection();\r\n        if (n > this.trials.length)\r\n            n = this.trials.length;\r\n        return new DataCollection(this.trials.slice(0, n));\r\n    }\r\n    /**\r\n     * Queries the last n elements in a collection of trials.\r\n     *\r\n     * @param n A positive integer of elements to return. A value of\r\n     *          n that is less than 1 will throw an error.\r\n     *\r\n     * @return Last n objects of a collection of trials. If fewer than\r\n     *         n trials are available, the trials.length elements will\r\n     *         be returned.\r\n     *\r\n     */\r\n    last(n = 1) {\r\n        if (n < 1) {\r\n            throw `You must query with a positive nonzero integer. Please use a\n               different value for n.`;\r\n        }\r\n        if (this.trials.length === 0)\r\n            return new DataCollection();\r\n        if (n > this.trials.length)\r\n            n = this.trials.length;\r\n        return new DataCollection(this.trials.slice(this.trials.length - n, this.trials.length));\r\n    }\r\n    values() {\r\n        return this.trials;\r\n    }\r\n    count() {\r\n        return this.trials.length;\r\n    }\r\n    readOnly() {\r\n        return new DataCollection(deepCopy(this.trials));\r\n    }\r\n    addToAll(properties) {\r\n        for (const trial of this.trials) {\r\n            Object.assign(trial, properties);\r\n        }\r\n        return this;\r\n    }\r\n    addToLast(properties) {\r\n        if (this.trials.length != 0) {\r\n            Object.assign(this.trials[this.trials.length - 1], properties);\r\n        }\r\n        return this;\r\n    }\r\n    filter(filters) {\r\n        // [{p1: v1, p2:v2}, {p1:v2}]\r\n        // {p1: v1}\r\n        let f;\r\n        if (!Array.isArray(filters)) {\r\n            f = deepCopy([filters]);\r\n        }\r\n        else {\r\n            f = deepCopy(filters);\r\n        }\r\n        const filtered_data = [];\r\n        for (const trial of this.trials) {\r\n            let keep = false;\r\n            for (const filter of f) {\r\n                let match = true;\r\n                for (const key of Object.keys(filter)) {\r\n                    if (typeof trial[key] !== \"undefined\" && trial[key] === filter[key]) ;\r\n                    else {\r\n                        match = false;\r\n                    }\r\n                }\r\n                if (match) {\r\n                    keep = true;\r\n                    break;\r\n                } // can break because each filter is OR.\r\n            }\r\n            if (keep) {\r\n                filtered_data.push(trial);\r\n            }\r\n        }\r\n        return new DataCollection(filtered_data);\r\n    }\r\n    filterCustom(fn) {\r\n        return new DataCollection(this.trials.filter(fn));\r\n    }\r\n    filterColumns(columns) {\r\n        return new DataCollection(this.trials.map((trial) => Object.fromEntries(columns.filter((key) => key in trial).map((key) => [key, trial[key]]))));\r\n    }\r\n    select(column) {\r\n        const values = [];\r\n        for (const trial of this.trials) {\r\n            if (typeof trial[column] !== \"undefined\") {\r\n                values.push(trial[column]);\r\n            }\r\n        }\r\n        return new DataColumn(values);\r\n    }\r\n    ignore(columns) {\r\n        if (!Array.isArray(columns)) {\r\n            columns = [columns];\r\n        }\r\n        const o = deepCopy(this.trials);\r\n        for (const trial of o) {\r\n            for (const delete_key of columns) {\r\n                delete trial[delete_key];\r\n            }\r\n        }\r\n        return new DataCollection(o);\r\n    }\r\n    uniqueNames() {\r\n        const names = [];\r\n        for (const trial of this.trials) {\r\n            for (const key of Object.keys(trial)) {\r\n                if (!names.includes(key)) {\r\n                    names.push(key);\r\n                }\r\n            }\r\n        }\r\n        return names;\r\n    }\r\n    csv() {\r\n        return JSON2CSV(this.trials);\r\n    }\r\n    json(pretty = false) {\r\n        if (pretty) {\r\n            return JSON.stringify(this.trials, null, \"\\t\");\r\n        }\r\n        return JSON.stringify(this.trials);\r\n    }\r\n    localSave(format, filename) {\r\n        format = format.toLowerCase();\r\n        let data_string;\r\n        if (format === \"json\") {\r\n            data_string = this.json();\r\n        }\r\n        else if (format === \"csv\") {\r\n            data_string = this.csv();\r\n        }\r\n        else {\r\n            throw new Error('Invalid format specified for localSave. Must be \"json\" or \"csv\".');\r\n        }\r\n        saveTextToFile(data_string, filename);\r\n    }\r\n}\n\nclass JsPsychData {\r\n    constructor(jsPsych) {\r\n        this.jsPsych = jsPsych;\r\n        // data properties for all trials\r\n        this.dataProperties = {};\r\n        this.reset();\r\n    }\r\n    reset() {\r\n        this.allData = new DataCollection();\r\n        this.interactionData = new DataCollection();\r\n    }\r\n    get() {\r\n        return this.allData;\r\n    }\r\n    getInteractionData() {\r\n        return this.interactionData;\r\n    }\r\n    write(data_object) {\r\n        const progress = this.jsPsych.getProgress();\r\n        const trial = this.jsPsych.getCurrentTrial();\r\n        //var trial_opt_data = typeof trial.data == 'function' ? trial.data() : trial.data;\r\n        const default_data = {\r\n            trial_type: trial.type.info.name,\r\n            trial_index: progress.current_trial_global,\r\n            time_elapsed: this.jsPsych.getTotalTime(),\r\n            internal_node_id: this.jsPsych.getCurrentTimelineNodeID(),\r\n        };\r\n        this.allData.push(Object.assign(Object.assign(Object.assign(Object.assign({}, data_object), trial.data), default_data), this.dataProperties));\r\n    }\r\n    addProperties(properties) {\r\n        // first, add the properties to all data that's already stored\r\n        this.allData.addToAll(properties);\r\n        // now add to list so that it gets appended to all future data\r\n        this.dataProperties = Object.assign({}, this.dataProperties, properties);\r\n    }\r\n    addDataToLastTrial(data) {\r\n        this.allData.addToLast(data);\r\n    }\r\n    getDataByTimelineNode(node_id) {\r\n        return this.allData.filterCustom((x) => x.internal_node_id.slice(0, node_id.length) === node_id);\r\n    }\r\n    getLastTrialData() {\r\n        return this.allData.top();\r\n    }\r\n    getLastTimelineData() {\r\n        const lasttrial = this.getLastTrialData();\r\n        const node_id = lasttrial.select(\"internal_node_id\").values[0];\r\n        if (typeof node_id === \"undefined\") {\r\n            return new DataCollection();\r\n        }\r\n        else {\r\n            const parent_node_id = node_id.substr(0, node_id.lastIndexOf(\"-\"));\r\n            const lastnodedata = this.getDataByTimelineNode(parent_node_id);\r\n            return lastnodedata;\r\n        }\r\n    }\r\n    displayData(format = \"json\") {\r\n        format = format.toLowerCase();\r\n        if (format != \"json\" && format != \"csv\") {\r\n            console.log(\"Invalid format declared for displayData function. Using json as default.\");\r\n            format = \"json\";\r\n        }\r\n        const data_string = format === \"json\" ? this.allData.json(true) : this.allData.csv();\r\n        const display_element = this.jsPsych.getDisplayElement();\r\n        display_element.innerHTML = '<pre id=\"jspsych-data-display\"></pre>';\r\n        document.getElementById(\"jspsych-data-display\").textContent = data_string;\r\n    }\r\n    urlVariables() {\r\n        if (typeof this.query_string == \"undefined\") {\r\n            this.query_string = getQueryString();\r\n        }\r\n        return this.query_string;\r\n    }\r\n    getURLVariable(whichvar) {\r\n        return this.urlVariables()[whichvar];\r\n    }\r\n    createInteractionListeners() {\r\n        // blur event capture\r\n        window.addEventListener(\"blur\", () => {\r\n            const data = {\r\n                event: \"blur\",\r\n                trial: this.jsPsych.getProgress().current_trial_global,\r\n                time: this.jsPsych.getTotalTime(),\r\n            };\r\n            this.interactionData.push(data);\r\n            this.jsPsych.getInitSettings().on_interaction_data_update(data);\r\n        });\r\n        // focus event capture\r\n        window.addEventListener(\"focus\", () => {\r\n            const data = {\r\n                event: \"focus\",\r\n                trial: this.jsPsych.getProgress().current_trial_global,\r\n                time: this.jsPsych.getTotalTime(),\r\n            };\r\n            this.interactionData.push(data);\r\n            this.jsPsych.getInitSettings().on_interaction_data_update(data);\r\n        });\r\n        // fullscreen change capture\r\n        const fullscreenchange = () => {\r\n            const data = {\r\n                event: \r\n                // @ts-expect-error\r\n                document.isFullScreen ||\r\n                    // @ts-expect-error\r\n                    document.webkitIsFullScreen ||\r\n                    // @ts-expect-error\r\n                    document.mozIsFullScreen ||\r\n                    document.fullscreenElement\r\n                    ? \"fullscreenenter\"\r\n                    : \"fullscreenexit\",\r\n                trial: this.jsPsych.getProgress().current_trial_global,\r\n                time: this.jsPsych.getTotalTime(),\r\n            };\r\n            this.interactionData.push(data);\r\n            this.jsPsych.getInitSettings().on_interaction_data_update(data);\r\n        };\r\n        document.addEventListener(\"fullscreenchange\", fullscreenchange);\r\n        document.addEventListener(\"mozfullscreenchange\", fullscreenchange);\r\n        document.addEventListener(\"webkitfullscreenchange\", fullscreenchange);\r\n    }\r\n    // public methods for testing purposes. not recommended for use.\r\n    _customInsert(data) {\r\n        this.allData = new DataCollection(data);\r\n    }\r\n    _fullreset() {\r\n        this.reset();\r\n        this.dataProperties = {};\r\n    }\r\n}\n\nclass HardwareAPI {\r\n    constructor() {\r\n        /**\r\n         * Indicates whether this instance of jspsych has opened a hardware connection through our browser\r\n         * extension\r\n         **/\r\n        this.hardwareConnected = false;\r\n        //it might be useful to open up a line of communication from the extension back to this page\r\n        //script, again, this will have to pass through DOM events. For now speed is of no concern so I\r\n        //will use jQuery\r\n        document.addEventListener(\"jspsych-activate\", (evt) => {\r\n            this.hardwareConnected = true;\r\n        });\r\n    }\r\n    /**\r\n     * Allows communication with user hardware through our custom Google Chrome extension + native C++ program\r\n     * @param\t\tmess\tThe message to be passed to our extension, see its documentation for the expected members of this object.\r\n     * @author\tDaniel Rivas\r\n     *\r\n     */\r\n    hardware(mess) {\r\n        //since Chrome extension content-scripts do not share the javascript environment with the page\r\n        //script that loaded jspsych, we will need to use hacky methods like communicating through DOM\r\n        //events.\r\n        const jspsychEvt = new CustomEvent(\"jspsych\", { detail: mess });\r\n        document.dispatchEvent(jspsychEvt);\r\n        //And voila! it will be the job of the content script injected by the extension to listen for\r\n        //the event and do the appropriate actions.\r\n    }\r\n}\n\nclass KeyboardListenerAPI {\r\n    constructor(getRootElement, areResponsesCaseSensitive = false, minimumValidRt = 0) {\r\n        this.getRootElement = getRootElement;\r\n        this.areResponsesCaseSensitive = areResponsesCaseSensitive;\r\n        this.minimumValidRt = minimumValidRt;\r\n        this.listeners = new Set();\r\n        this.heldKeys = new Set();\r\n        this.areRootListenersRegistered = false;\r\n        autoBind(this);\r\n        this.registerRootListeners();\r\n    }\r\n    /**\r\n     * If not previously done and `this.getRootElement()` returns an element, adds the root key\r\n     * listeners to that element.\r\n     */\r\n    registerRootListeners() {\r\n        if (!this.areRootListenersRegistered) {\r\n            const rootElement = this.getRootElement();\r\n            if (rootElement) {\r\n                rootElement.addEventListener(\"keydown\", this.rootKeydownListener);\r\n                rootElement.addEventListener(\"keyup\", this.rootKeyupListener);\r\n                this.areRootListenersRegistered = true;\r\n            }\r\n        }\r\n    }\r\n    rootKeydownListener(e) {\r\n        // Iterate over a static copy of the listeners set because listeners might add other listeners\r\n        // that we do not want to be included in the loop\r\n        for (const listener of Array.from(this.listeners)) {\r\n            listener(e);\r\n        }\r\n        this.heldKeys.add(this.toLowerCaseIfInsensitive(e.key));\r\n    }\r\n    toLowerCaseIfInsensitive(string) {\r\n        return this.areResponsesCaseSensitive ? string : string.toLowerCase();\r\n    }\r\n    rootKeyupListener(e) {\r\n        this.heldKeys.delete(this.toLowerCaseIfInsensitive(e.key));\r\n    }\r\n    isResponseValid(validResponses, allowHeldKey, key) {\r\n        // check if key was already held down\r\n        if (!allowHeldKey && this.heldKeys.has(key)) {\r\n            return false;\r\n        }\r\n        if (validResponses === \"ALL_KEYS\") {\r\n            return true;\r\n        }\r\n        if (validResponses === \"NO_KEYS\") {\r\n            return false;\r\n        }\r\n        return validResponses.includes(key);\r\n    }\r\n    getKeyboardResponse({ callback_function, valid_responses = \"ALL_KEYS\", rt_method = \"performance\", persist, audio_context, audio_context_start_time, allow_held_key = false, minimum_valid_rt = this.minimumValidRt, }) {\r\n        if (rt_method !== \"performance\" && rt_method !== \"audio\") {\r\n            console.log('Invalid RT method specified in getKeyboardResponse. Defaulting to \"performance\" method.');\r\n            rt_method = \"performance\";\r\n        }\r\n        const usePerformanceRt = rt_method === \"performance\";\r\n        const startTime = usePerformanceRt ? performance.now() : audio_context_start_time * 1000;\r\n        this.registerRootListeners();\r\n        if (!this.areResponsesCaseSensitive && typeof valid_responses !== \"string\") {\r\n            valid_responses = valid_responses.map((r) => r.toLowerCase());\r\n        }\r\n        const listener = (e) => {\r\n            const rt = Math.round((rt_method == \"performance\" ? performance.now() : audio_context.currentTime * 1000) -\r\n                startTime);\r\n            if (rt < minimum_valid_rt) {\r\n                return;\r\n            }\r\n            const key = this.toLowerCaseIfInsensitive(e.key);\r\n            if (this.isResponseValid(valid_responses, allow_held_key, key)) {\r\n                // if this is a valid response, then we don't want the key event to trigger other actions\r\n                // like scrolling via the spacebar.\r\n                e.preventDefault();\r\n                if (!persist) {\r\n                    // remove keyboard listener if it exists\r\n                    this.cancelKeyboardResponse(listener);\r\n                }\r\n                callback_function({ key, rt });\r\n            }\r\n        };\r\n        this.listeners.add(listener);\r\n        return listener;\r\n    }\r\n    cancelKeyboardResponse(listener) {\r\n        // remove the listener from the set of listeners if it is contained\r\n        this.listeners.delete(listener);\r\n    }\r\n    cancelAllKeyboardResponses() {\r\n        this.listeners.clear();\r\n    }\r\n    compareKeys(key1, key2) {\r\n        if ((typeof key1 !== \"string\" && key1 !== null) ||\r\n            (typeof key2 !== \"string\" && key2 !== null)) {\r\n            console.error(\"Error in jsPsych.pluginAPI.compareKeys: arguments must be key strings or null.\");\r\n            return undefined;\r\n        }\r\n        if (typeof key1 === \"string\" && typeof key2 === \"string\") {\r\n            // if both values are strings, then check whether or not letter case should be converted before comparing (case_sensitive_responses in initJsPsych)\r\n            return this.areResponsesCaseSensitive\r\n                ? key1 === key2\r\n                : key1.toLowerCase() === key2.toLowerCase();\r\n        }\r\n        return key1 === null && key2 === null;\r\n    }\r\n}\n\n/**\r\n * Parameter types for plugins\r\n */\r\nvar ParameterType;\r\n(function (ParameterType) {\r\n    ParameterType[ParameterType[\"BOOL\"] = 0] = \"BOOL\";\r\n    ParameterType[ParameterType[\"STRING\"] = 1] = \"STRING\";\r\n    ParameterType[ParameterType[\"INT\"] = 2] = \"INT\";\r\n    ParameterType[ParameterType[\"FLOAT\"] = 3] = \"FLOAT\";\r\n    ParameterType[ParameterType[\"FUNCTION\"] = 4] = \"FUNCTION\";\r\n    ParameterType[ParameterType[\"KEY\"] = 5] = \"KEY\";\r\n    ParameterType[ParameterType[\"KEYS\"] = 6] = \"KEYS\";\r\n    ParameterType[ParameterType[\"SELECT\"] = 7] = \"SELECT\";\r\n    ParameterType[ParameterType[\"HTML_STRING\"] = 8] = \"HTML_STRING\";\r\n    ParameterType[ParameterType[\"IMAGE\"] = 9] = \"IMAGE\";\r\n    ParameterType[ParameterType[\"AUDIO\"] = 10] = \"AUDIO\";\r\n    ParameterType[ParameterType[\"VIDEO\"] = 11] = \"VIDEO\";\r\n    ParameterType[ParameterType[\"OBJECT\"] = 12] = \"OBJECT\";\r\n    ParameterType[ParameterType[\"COMPLEX\"] = 13] = \"COMPLEX\";\r\n    ParameterType[ParameterType[\"TIMELINE\"] = 14] = \"TIMELINE\";\r\n})(ParameterType || (ParameterType = {}));\r\nconst universalPluginParameters = {\r\n    /**\r\n     * Data to add to this trial (key-value pairs)\r\n     */\r\n    data: {\r\n        type: ParameterType.OBJECT,\r\n        pretty_name: \"Data\",\r\n        default: {},\r\n    },\r\n    /**\r\n     * Function to execute when trial begins\r\n     */\r\n    on_start: {\r\n        type: ParameterType.FUNCTION,\r\n        pretty_name: \"On start\",\r\n        default: function () {\r\n            return;\r\n        },\r\n    },\r\n    /**\r\n     * Function to execute when trial is finished\r\n     */\r\n    on_finish: {\r\n        type: ParameterType.FUNCTION,\r\n        pretty_name: \"On finish\",\r\n        default: function () {\r\n            return;\r\n        },\r\n    },\r\n    /**\r\n     * Function to execute after the trial has loaded\r\n     */\r\n    on_load: {\r\n        type: ParameterType.FUNCTION,\r\n        pretty_name: \"On load\",\r\n        default: function () {\r\n            return;\r\n        },\r\n    },\r\n    /**\r\n     * Length of gap between the end of this trial and the start of the next trial\r\n     */\r\n    post_trial_gap: {\r\n        type: ParameterType.INT,\r\n        pretty_name: \"Post trial gap\",\r\n        default: null,\r\n    },\r\n    /**\r\n     * A list of CSS classes to add to the jsPsych display element for the duration of this trial\r\n     */\r\n    css_classes: {\r\n        type: ParameterType.STRING,\r\n        pretty_name: \"Custom CSS classes\",\r\n        default: null,\r\n    },\r\n    /**\r\n     * Options to control simulation mode for the trial.\r\n     */\r\n    simulation_options: {\r\n        type: ParameterType.COMPLEX,\r\n        default: null,\r\n    },\r\n};\n\nconst preloadParameterTypes = [\r\n    ParameterType.AUDIO,\r\n    ParameterType.IMAGE,\r\n    ParameterType.VIDEO,\r\n];\r\nclass MediaAPI {\r\n    constructor(useWebaudio, webaudioContext) {\r\n        this.useWebaudio = useWebaudio;\r\n        this.webaudioContext = webaudioContext;\r\n        // video //\r\n        this.video_buffers = {};\r\n        // audio //\r\n        this.context = null;\r\n        this.audio_buffers = [];\r\n        // preloading stimuli //\r\n        this.preload_requests = [];\r\n        this.img_cache = {};\r\n        this.preloadMap = new Map();\r\n        this.microphone_recorder = null;\r\n        this.camera_stream = null;\r\n        this.camera_recorder = null;\r\n    }\r\n    getVideoBuffer(videoID) {\r\n        if (videoID.startsWith(\"blob:\")) {\r\n            this.video_buffers[videoID] = videoID;\r\n        }\r\n        return this.video_buffers[videoID];\r\n    }\r\n    initAudio() {\r\n        this.context = this.useWebaudio ? this.webaudioContext : null;\r\n    }\r\n    audioContext() {\r\n        if (this.context !== null) {\r\n            if (this.context.state !== \"running\") {\r\n                this.context.resume();\r\n            }\r\n        }\r\n        return this.context;\r\n    }\r\n    getAudioBuffer(audioID) {\r\n        return new Promise((resolve, reject) => {\r\n            // check whether audio file already preloaded\r\n            if (typeof this.audio_buffers[audioID] == \"undefined\" ||\r\n                this.audio_buffers[audioID] == \"tmp\") {\r\n                // if audio is not already loaded, try to load it\r\n                this.preloadAudio([audioID], () => {\r\n                    resolve(this.audio_buffers[audioID]);\r\n                }, () => { }, (e) => {\r\n                    reject(e.error);\r\n                });\r\n            }\r\n            else {\r\n                // audio is already loaded\r\n                resolve(this.audio_buffers[audioID]);\r\n            }\r\n        });\r\n    }\r\n    preloadAudio(files, callback_complete = () => { }, callback_load = (filepath) => { }, callback_error = (error_msg) => { }) {\r\n        files = unique(files.flat());\r\n        let n_loaded = 0;\r\n        if (files.length == 0) {\r\n            callback_complete();\r\n            return;\r\n        }\r\n        const load_audio_file_webaudio = (source, count = 1) => {\r\n            const request = new XMLHttpRequest();\r\n            request.open(\"GET\", source, true);\r\n            request.responseType = \"arraybuffer\";\r\n            request.onload = () => {\r\n                this.context.decodeAudioData(request.response, (buffer) => {\r\n                    this.audio_buffers[source] = buffer;\r\n                    n_loaded++;\r\n                    callback_load(source);\r\n                    if (n_loaded == files.length) {\r\n                        callback_complete();\r\n                    }\r\n                }, (e) => {\r\n                    callback_error({ source: source, error: e });\r\n                });\r\n            };\r\n            request.onerror = (e) => {\r\n                let err = e;\r\n                if (request.status == 404) {\r\n                    err = \"404\";\r\n                }\r\n                callback_error({ source: source, error: err });\r\n            };\r\n            request.onloadend = (e) => {\r\n                if (request.status == 404) {\r\n                    callback_error({ source: source, error: \"404\" });\r\n                }\r\n            };\r\n            request.send();\r\n            this.preload_requests.push(request);\r\n        };\r\n        const load_audio_file_html5audio = (source, count = 1) => {\r\n            const audio = new Audio();\r\n            const handleCanPlayThrough = () => {\r\n                this.audio_buffers[source] = audio;\r\n                n_loaded++;\r\n                callback_load(source);\r\n                if (n_loaded == files.length) {\r\n                    callback_complete();\r\n                }\r\n                audio.removeEventListener(\"canplaythrough\", handleCanPlayThrough);\r\n            };\r\n            audio.addEventListener(\"canplaythrough\", handleCanPlayThrough);\r\n            audio.addEventListener(\"error\", function handleError(e) {\r\n                callback_error({ source: audio.src, error: e });\r\n                audio.removeEventListener(\"error\", handleError);\r\n            });\r\n            audio.addEventListener(\"abort\", function handleAbort(e) {\r\n                callback_error({ source: audio.src, error: e });\r\n                audio.removeEventListener(\"abort\", handleAbort);\r\n            });\r\n            audio.src = source;\r\n            this.preload_requests.push(audio);\r\n        };\r\n        for (const file of files) {\r\n            if (typeof this.audio_buffers[file] !== \"undefined\") {\r\n                n_loaded++;\r\n                callback_load(file);\r\n                if (n_loaded == files.length) {\r\n                    callback_complete();\r\n                }\r\n            }\r\n            else {\r\n                this.audio_buffers[file] = \"tmp\";\r\n                if (this.audioContext() !== null) {\r\n                    load_audio_file_webaudio(file);\r\n                }\r\n                else {\r\n                    load_audio_file_html5audio(file);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    preloadImages(images, callback_complete = () => { }, callback_load = (filepath) => { }, callback_error = (error_msg) => { }) {\r\n        // flatten the images array\r\n        images = unique(images.flat());\r\n        var n_loaded = 0;\r\n        if (images.length === 0) {\r\n            callback_complete();\r\n            return;\r\n        }\r\n        for (let i = 0; i < images.length; i++) {\r\n            const img = new Image();\r\n            const src = images[i];\r\n            img.onload = () => {\r\n                n_loaded++;\r\n                callback_load(src);\r\n                if (n_loaded === images.length) {\r\n                    callback_complete();\r\n                }\r\n            };\r\n            img.onerror = (e) => {\r\n                callback_error({ source: src, error: e });\r\n            };\r\n            img.src = src;\r\n            this.img_cache[src] = img;\r\n            this.preload_requests.push(img);\r\n        }\r\n    }\r\n    preloadVideo(videos, callback_complete = () => { }, callback_load = (filepath) => { }, callback_error = (error_msg) => { }) {\r\n        // flatten the video array\r\n        videos = unique(videos.flat());\r\n        let n_loaded = 0;\r\n        if (videos.length === 0) {\r\n            callback_complete();\r\n            return;\r\n        }\r\n        for (const video of videos) {\r\n            const video_buffers = this.video_buffers;\r\n            //based on option 4 here: http://dinbror.dk/blog/how-to-preload-entire-html5-video-before-play-solved/\r\n            const request = new XMLHttpRequest();\r\n            request.open(\"GET\", video, true);\r\n            request.responseType = \"blob\";\r\n            request.onload = () => {\r\n                if (request.status === 200 || request.status === 0) {\r\n                    const videoBlob = request.response;\r\n                    video_buffers[video] = URL.createObjectURL(videoBlob); // IE10+\r\n                    n_loaded++;\r\n                    callback_load(video);\r\n                    if (n_loaded === videos.length) {\r\n                        callback_complete();\r\n                    }\r\n                }\r\n            };\r\n            request.onerror = (e) => {\r\n                let err = e;\r\n                if (request.status == 404) {\r\n                    err = \"404\";\r\n                }\r\n                callback_error({ source: video, error: err });\r\n            };\r\n            request.onloadend = (e) => {\r\n                if (request.status == 404) {\r\n                    callback_error({ source: video, error: \"404\" });\r\n                }\r\n            };\r\n            request.send();\r\n            this.preload_requests.push(request);\r\n        }\r\n    }\r\n    getAutoPreloadList(timeline_description) {\r\n        /** Map each preload parameter type to a set of paths to be preloaded */\r\n        const preloadPaths = Object.fromEntries(preloadParameterTypes.map((type) => [type, new Set()]));\r\n        const traverseTimeline = (node, inheritedTrialType) => {\r\n            var _a, _b, _c, _d;\r\n            const isTimeline = typeof node.timeline !== \"undefined\";\r\n            if (isTimeline) {\r\n                for (const childNode of node.timeline) {\r\n                    traverseTimeline(childNode, (_a = node.type) !== null && _a !== void 0 ? _a : inheritedTrialType);\r\n                }\r\n            }\r\n            else if ((_c = ((_b = node.type) !== null && _b !== void 0 ? _b : inheritedTrialType)) === null || _c === void 0 ? void 0 : _c.info) {\r\n                // node is a trial with type.info set\r\n                // Get the plugin name and parameters object from the info object\r\n                const { name: pluginName, parameters } = ((_d = node.type) !== null && _d !== void 0 ? _d : inheritedTrialType).info;\r\n                // Extract parameters to be preloaded and their types from parameter info if this has not\r\n                // yet been done for `pluginName`\r\n                if (!this.preloadMap.has(pluginName)) {\r\n                    this.preloadMap.set(pluginName, Object.fromEntries(Object.entries(parameters)\r\n                        // Filter out parameter entries with media types and a non-false `preload` option\r\n                        .filter(([_name, { type, preload }]) => preloadParameterTypes.includes(type) && (preload !== null && preload !== void 0 ? preload : true))\r\n                        // Map each entry's value to its parameter type\r\n                        .map(([name, { type }]) => [name, type])));\r\n                }\r\n                // Add preload paths from this trial\r\n                for (const [parameterName, parameterType] of Object.entries(this.preloadMap.get(pluginName))) {\r\n                    const parameterValue = node[parameterName];\r\n                    const elements = preloadPaths[parameterType];\r\n                    if (typeof parameterValue === \"string\") {\r\n                        elements.add(parameterValue);\r\n                    }\r\n                    else if (Array.isArray(parameterValue)) {\r\n                        for (const element of parameterValue.flat()) {\r\n                            if (typeof element === \"string\") {\r\n                                elements.add(element);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        traverseTimeline({ timeline: timeline_description });\r\n        return {\r\n            images: [...preloadPaths[ParameterType.IMAGE]],\r\n            audio: [...preloadPaths[ParameterType.AUDIO]],\r\n            video: [...preloadPaths[ParameterType.VIDEO]],\r\n        };\r\n    }\r\n    cancelPreloads() {\r\n        for (const request of this.preload_requests) {\r\n            request.onload = () => { };\r\n            request.onerror = () => { };\r\n            request.oncanplaythrough = () => { };\r\n            request.onabort = () => { };\r\n        }\r\n        this.preload_requests = [];\r\n    }\r\n    initializeMicrophoneRecorder(stream) {\r\n        const recorder = new MediaRecorder(stream);\r\n        this.microphone_recorder = recorder;\r\n    }\r\n    getMicrophoneRecorder() {\r\n        return this.microphone_recorder;\r\n    }\r\n    initializeCameraRecorder(stream, opts) {\r\n        this.camera_stream = stream;\r\n        const recorder = new MediaRecorder(stream, opts);\r\n        this.camera_recorder = recorder;\r\n    }\r\n    getCameraStream() {\r\n        return this.camera_stream;\r\n    }\r\n    getCameraRecorder() {\r\n        return this.camera_recorder;\r\n    }\r\n}\n\nclass SimulationAPI {\r\n    dispatchEvent(event) {\r\n        document.body.dispatchEvent(event);\r\n    }\r\n    /**\r\n     * Dispatches a `keydown` event for the specified key\r\n     * @param key Character code (`.key` property) for the key to press.\r\n     */\r\n    keyDown(key) {\r\n        this.dispatchEvent(new KeyboardEvent(\"keydown\", { key }));\r\n    }\r\n    /**\r\n     * Dispatches a `keyup` event for the specified key\r\n     * @param key Character code (`.key` property) for the key to press.\r\n     */\r\n    keyUp(key) {\r\n        this.dispatchEvent(new KeyboardEvent(\"keyup\", { key }));\r\n    }\r\n    /**\r\n     * Dispatches a `keydown` and `keyup` event in sequence to simulate pressing a key.\r\n     * @param key Character code (`.key` property) for the key to press.\r\n     * @param delay Length of time to wait (ms) before executing action\r\n     */\r\n    pressKey(key, delay = 0) {\r\n        if (delay > 0) {\r\n            setTimeout(() => {\r\n                this.keyDown(key);\r\n                this.keyUp(key);\r\n            }, delay);\r\n        }\r\n        else {\r\n            this.keyDown(key);\r\n            this.keyUp(key);\r\n        }\r\n    }\r\n    /**\r\n     * Dispatches `mousedown`, `mouseup`, and `click` events on the target element\r\n     * @param target The element to click\r\n     * @param delay Length of time to wait (ms) before executing action\r\n     */\r\n    clickTarget(target, delay = 0) {\r\n        if (delay > 0) {\r\n            setTimeout(() => {\r\n                target.dispatchEvent(new MouseEvent(\"mousedown\", { bubbles: true }));\r\n                target.dispatchEvent(new MouseEvent(\"mouseup\", { bubbles: true }));\r\n                target.dispatchEvent(new MouseEvent(\"click\", { bubbles: true }));\r\n            }, delay);\r\n        }\r\n        else {\r\n            target.dispatchEvent(new MouseEvent(\"mousedown\", { bubbles: true }));\r\n            target.dispatchEvent(new MouseEvent(\"mouseup\", { bubbles: true }));\r\n            target.dispatchEvent(new MouseEvent(\"click\", { bubbles: true }));\r\n        }\r\n    }\r\n    /**\r\n     * Sets the value of a target text input\r\n     * @param target A text input element to fill in\r\n     * @param text Text to input\r\n     * @param delay Length of time to wait (ms) before executing action\r\n     */\r\n    fillTextInput(target, text, delay = 0) {\r\n        if (delay > 0) {\r\n            setTimeout(() => {\r\n                target.value = text;\r\n            }, delay);\r\n        }\r\n        else {\r\n            target.value = text;\r\n        }\r\n    }\r\n    /**\r\n     * Picks a valid key from `choices`, taking into account jsPsych-specific\r\n     * identifiers like \"NO_KEYS\" and \"ALL_KEYS\".\r\n     * @param choices Which keys are valid.\r\n     * @returns A key selected at random from the valid keys.\r\n     */\r\n    getValidKey(choices) {\r\n        const possible_keys = [\r\n            \"a\",\r\n            \"b\",\r\n            \"c\",\r\n            \"d\",\r\n            \"e\",\r\n            \"f\",\r\n            \"g\",\r\n            \"h\",\r\n            \"i\",\r\n            \"j\",\r\n            \"k\",\r\n            \"l\",\r\n            \"m\",\r\n            \"n\",\r\n            \"o\",\r\n            \"p\",\r\n            \"q\",\r\n            \"r\",\r\n            \"s\",\r\n            \"t\",\r\n            \"u\",\r\n            \"v\",\r\n            \"w\",\r\n            \"x\",\r\n            \"y\",\r\n            \"z\",\r\n            \"0\",\r\n            \"1\",\r\n            \"2\",\r\n            \"3\",\r\n            \"4\",\r\n            \"5\",\r\n            \"6\",\r\n            \"7\",\r\n            \"8\",\r\n            \"9\",\r\n            \" \",\r\n        ];\r\n        let key;\r\n        if (choices == \"NO_KEYS\") {\r\n            key = null;\r\n        }\r\n        else if (choices == \"ALL_KEYS\") {\r\n            key = possible_keys[Math.floor(Math.random() * possible_keys.length)];\r\n        }\r\n        else {\r\n            const flat_choices = choices.flat();\r\n            key = flat_choices[Math.floor(Math.random() * flat_choices.length)];\r\n        }\r\n        return key;\r\n    }\r\n    mergeSimulationData(default_data, simulation_options) {\r\n        // override any data with data from simulation object\r\n        return Object.assign(Object.assign({}, default_data), simulation_options === null || simulation_options === void 0 ? void 0 : simulation_options.data);\r\n    }\r\n    ensureSimulationDataConsistency(trial, data) {\r\n        // All RTs must be rounded\r\n        if (data.rt) {\r\n            data.rt = Math.round(data.rt);\r\n        }\r\n        // If a trial_duration and rt exist, make sure that the RT is not longer than the trial.\r\n        if (trial.trial_duration && data.rt && data.rt > trial.trial_duration) {\r\n            data.rt = null;\r\n            if (data.response) {\r\n                data.response = null;\r\n            }\r\n            if (data.correct) {\r\n                data.correct = false;\r\n            }\r\n        }\r\n        // If trial.choices is NO_KEYS make sure that response and RT are null\r\n        if (trial.choices && trial.choices == \"NO_KEYS\") {\r\n            if (data.rt) {\r\n                data.rt = null;\r\n            }\r\n            if (data.response) {\r\n                data.response = null;\r\n            }\r\n        }\r\n        // If response is not allowed before stimulus display complete, ensure RT\r\n        // is longer than display time.\r\n        if (trial.allow_response_before_complete) {\r\n            if (trial.sequence_reps && trial.frame_time) {\r\n                const min_time = trial.sequence_reps * trial.frame_time * trial.stimuli.length;\r\n                if (data.rt < min_time) {\r\n                    data.rt = null;\r\n                    data.response = null;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\n\nclass TimeoutAPI {\r\n    constructor() {\r\n        this.timeout_handlers = [];\r\n    }\r\n    setTimeout(callback, delay) {\r\n        const handle = window.setTimeout(callback, delay);\r\n        this.timeout_handlers.push(handle);\r\n        return handle;\r\n    }\r\n    clearAllTimeouts() {\r\n        for (const handler of this.timeout_handlers) {\r\n            clearTimeout(handler);\r\n        }\r\n        this.timeout_handlers = [];\r\n    }\r\n}\n\nfunction createJointPluginAPIObject(jsPsych) {\r\n    const settings = jsPsych.getInitSettings();\r\n    return Object.assign({}, ...[\r\n        new KeyboardListenerAPI(jsPsych.getDisplayContainerElement, settings.case_sensitive_responses, settings.minimum_valid_rt),\r\n        new TimeoutAPI(),\r\n        new MediaAPI(settings.use_webaudio, jsPsych.webaudio_context),\r\n        new HardwareAPI(),\r\n        new SimulationAPI(),\r\n    ].map((object) => autoBind(object)));\r\n}\n\nvar wordList = [\n  // Borrowed from xkcd password generator which borrowed it from wherever\n  \"ability\",\"able\",\"aboard\",\"about\",\"above\",\"accept\",\"accident\",\"according\",\n  \"account\",\"accurate\",\"acres\",\"across\",\"act\",\"action\",\"active\",\"activity\",\n  \"actual\",\"actually\",\"add\",\"addition\",\"additional\",\"adjective\",\"adult\",\"adventure\",\n  \"advice\",\"affect\",\"afraid\",\"after\",\"afternoon\",\"again\",\"against\",\"age\",\n  \"ago\",\"agree\",\"ahead\",\"aid\",\"air\",\"airplane\",\"alike\",\"alive\",\n  \"all\",\"allow\",\"almost\",\"alone\",\"along\",\"aloud\",\"alphabet\",\"already\",\n  \"also\",\"although\",\"am\",\"among\",\"amount\",\"ancient\",\"angle\",\"angry\",\n  \"animal\",\"announced\",\"another\",\"answer\",\"ants\",\"any\",\"anybody\",\"anyone\",\n  \"anything\",\"anyway\",\"anywhere\",\"apart\",\"apartment\",\"appearance\",\"apple\",\"applied\",\n  \"appropriate\",\"are\",\"area\",\"arm\",\"army\",\"around\",\"arrange\",\"arrangement\",\n  \"arrive\",\"arrow\",\"art\",\"article\",\"as\",\"aside\",\"ask\",\"asleep\",\n  \"at\",\"ate\",\"atmosphere\",\"atom\",\"atomic\",\"attached\",\"attack\",\"attempt\",\n  \"attention\",\"audience\",\"author\",\"automobile\",\"available\",\"average\",\"avoid\",\"aware\",\n  \"away\",\"baby\",\"back\",\"bad\",\"badly\",\"bag\",\"balance\",\"ball\",\n  \"balloon\",\"band\",\"bank\",\"bar\",\"bare\",\"bark\",\"barn\",\"base\",\n  \"baseball\",\"basic\",\"basis\",\"basket\",\"bat\",\"battle\",\"be\",\"bean\",\n  \"bear\",\"beat\",\"beautiful\",\"beauty\",\"became\",\"because\",\"become\",\"becoming\",\n  \"bee\",\"been\",\"before\",\"began\",\"beginning\",\"begun\",\"behavior\",\"behind\",\n  \"being\",\"believed\",\"bell\",\"belong\",\"below\",\"belt\",\"bend\",\"beneath\",\n  \"bent\",\"beside\",\"best\",\"bet\",\"better\",\"between\",\"beyond\",\"bicycle\",\n  \"bigger\",\"biggest\",\"bill\",\"birds\",\"birth\",\"birthday\",\"bit\",\"bite\",\n  \"black\",\"blank\",\"blanket\",\"blew\",\"blind\",\"block\",\"blood\",\"blow\",\n  \"blue\",\"board\",\"boat\",\"body\",\"bone\",\"book\",\"border\",\"born\",\n  \"both\",\"bottle\",\"bottom\",\"bound\",\"bow\",\"bowl\",\"box\",\"boy\",\n  \"brain\",\"branch\",\"brass\",\"brave\",\"bread\",\"break\",\"breakfast\",\"breath\",\n  \"breathe\",\"breathing\",\"breeze\",\"brick\",\"bridge\",\"brief\",\"bright\",\"bring\",\n  \"broad\",\"broke\",\"broken\",\"brother\",\"brought\",\"brown\",\"brush\",\"buffalo\",\n  \"build\",\"building\",\"built\",\"buried\",\"burn\",\"burst\",\"bus\",\"bush\",\n  \"business\",\"busy\",\"but\",\"butter\",\"buy\",\"by\",\"cabin\",\"cage\",\n  \"cake\",\"call\",\"calm\",\"came\",\"camera\",\"camp\",\"can\",\"canal\",\n  \"cannot\",\"cap\",\"capital\",\"captain\",\"captured\",\"car\",\"carbon\",\"card\",\n  \"care\",\"careful\",\"carefully\",\"carried\",\"carry\",\"case\",\"cast\",\"castle\",\n  \"cat\",\"catch\",\"cattle\",\"caught\",\"cause\",\"cave\",\"cell\",\"cent\",\n  \"center\",\"central\",\"century\",\"certain\",\"certainly\",\"chain\",\"chair\",\"chamber\",\n  \"chance\",\"change\",\"changing\",\"chapter\",\"character\",\"characteristic\",\"charge\",\"chart\",\n  \"check\",\"cheese\",\"chemical\",\"chest\",\"chicken\",\"chief\",\"child\",\"children\",\n  \"choice\",\"choose\",\"chose\",\"chosen\",\"church\",\"circle\",\"circus\",\"citizen\",\n  \"city\",\"class\",\"classroom\",\"claws\",\"clay\",\"clean\",\"clear\",\"clearly\",\n  \"climate\",\"climb\",\"clock\",\"close\",\"closely\",\"closer\",\"cloth\",\"clothes\",\n  \"clothing\",\"cloud\",\"club\",\"coach\",\"coal\",\"coast\",\"coat\",\"coffee\",\n  \"cold\",\"collect\",\"college\",\"colony\",\"color\",\"column\",\"combination\",\"combine\",\n  \"come\",\"comfortable\",\"coming\",\"command\",\"common\",\"community\",\"company\",\"compare\",\n  \"compass\",\"complete\",\"completely\",\"complex\",\"composed\",\"composition\",\"compound\",\"concerned\",\n  \"condition\",\"congress\",\"connected\",\"consider\",\"consist\",\"consonant\",\"constantly\",\"construction\",\n  \"contain\",\"continent\",\"continued\",\"contrast\",\"control\",\"conversation\",\"cook\",\"cookies\",\n  \"cool\",\"copper\",\"copy\",\"corn\",\"corner\",\"correct\",\"correctly\",\"cost\",\n  \"cotton\",\"could\",\"count\",\"country\",\"couple\",\"courage\",\"course\",\"court\",\n  \"cover\",\"cow\",\"cowboy\",\"crack\",\"cream\",\"create\",\"creature\",\"crew\",\n  \"crop\",\"cross\",\"crowd\",\"cry\",\"cup\",\"curious\",\"current\",\"curve\",\n  \"customs\",\"cut\",\"cutting\",\"daily\",\"damage\",\"dance\",\"danger\",\"dangerous\",\n  \"dark\",\"darkness\",\"date\",\"daughter\",\"dawn\",\"day\",\"dead\",\"deal\",\n  \"dear\",\"death\",\"decide\",\"declared\",\"deep\",\"deeply\",\"deer\",\"definition\",\n  \"degree\",\"depend\",\"depth\",\"describe\",\"desert\",\"design\",\"desk\",\"detail\",\n  \"determine\",\"develop\",\"development\",\"diagram\",\"diameter\",\"did\",\"die\",\"differ\",\n  \"difference\",\"different\",\"difficult\",\"difficulty\",\"dig\",\"dinner\",\"direct\",\"direction\",\n  \"directly\",\"dirt\",\"dirty\",\"disappear\",\"discover\",\"discovery\",\"discuss\",\"discussion\",\n  \"disease\",\"dish\",\"distance\",\"distant\",\"divide\",\"division\",\"do\",\"doctor\",\n  \"does\",\"dog\",\"doing\",\"doll\",\"dollar\",\"done\",\"donkey\",\"door\",\n  \"dot\",\"double\",\"doubt\",\"down\",\"dozen\",\"draw\",\"drawn\",\"dream\",\n  \"dress\",\"drew\",\"dried\",\"drink\",\"drive\",\"driven\",\"driver\",\"driving\",\n  \"drop\",\"dropped\",\"drove\",\"dry\",\"duck\",\"due\",\"dug\",\"dull\",\n  \"during\",\"dust\",\"duty\",\"each\",\"eager\",\"ear\",\"earlier\",\"early\",\n  \"earn\",\"earth\",\"easier\",\"easily\",\"east\",\"easy\",\"eat\",\"eaten\",\n  \"edge\",\"education\",\"effect\",\"effort\",\"egg\",\"eight\",\"either\",\"electric\",\n  \"electricity\",\"element\",\"elephant\",\"eleven\",\"else\",\"empty\",\"end\",\"enemy\",\n  \"energy\",\"engine\",\"engineer\",\"enjoy\",\"enough\",\"enter\",\"entire\",\"entirely\",\n  \"environment\",\"equal\",\"equally\",\"equator\",\"equipment\",\"escape\",\"especially\",\"essential\",\n  \"establish\",\"even\",\"evening\",\"event\",\"eventually\",\"ever\",\"every\",\"everybody\",\n  \"everyone\",\"everything\",\"everywhere\",\"evidence\",\"exact\",\"exactly\",\"examine\",\"example\",\n  \"excellent\",\"except\",\"exchange\",\"excited\",\"excitement\",\"exciting\",\"exclaimed\",\"exercise\",\n  \"exist\",\"expect\",\"experience\",\"experiment\",\"explain\",\"explanation\",\"explore\",\"express\",\n  \"expression\",\"extra\",\"eye\",\"face\",\"facing\",\"fact\",\"factor\",\"factory\",\n  \"failed\",\"fair\",\"fairly\",\"fall\",\"fallen\",\"familiar\",\"family\",\"famous\",\n  \"far\",\"farm\",\"farmer\",\"farther\",\"fast\",\"fastened\",\"faster\",\"fat\",\n  \"father\",\"favorite\",\"fear\",\"feathers\",\"feature\",\"fed\",\"feed\",\"feel\",\n  \"feet\",\"fell\",\"fellow\",\"felt\",\"fence\",\"few\",\"fewer\",\"field\",\n  \"fierce\",\"fifteen\",\"fifth\",\"fifty\",\"fight\",\"fighting\",\"figure\",\"fill\",\n  \"film\",\"final\",\"finally\",\"find\",\"fine\",\"finest\",\"finger\",\"finish\",\n  \"fire\",\"fireplace\",\"firm\",\"first\",\"fish\",\"five\",\"fix\",\"flag\",\n  \"flame\",\"flat\",\"flew\",\"flies\",\"flight\",\"floating\",\"floor\",\"flow\",\n  \"flower\",\"fly\",\"fog\",\"folks\",\"follow\",\"food\",\"foot\",\"football\",\n  \"for\",\"force\",\"foreign\",\"forest\",\"forget\",\"forgot\",\"forgotten\",\"form\",\n  \"former\",\"fort\",\"forth\",\"forty\",\"forward\",\"fought\",\"found\",\"four\",\n  \"fourth\",\"fox\",\"frame\",\"free\",\"freedom\",\"frequently\",\"fresh\",\"friend\",\n  \"friendly\",\"frighten\",\"frog\",\"from\",\"front\",\"frozen\",\"fruit\",\"fuel\",\n  \"full\",\"fully\",\"fun\",\"function\",\"funny\",\"fur\",\"furniture\",\"further\",\n  \"future\",\"gain\",\"game\",\"garage\",\"garden\",\"gas\",\"gasoline\",\"gate\",\n  \"gather\",\"gave\",\"general\",\"generally\",\"gentle\",\"gently\",\"get\",\"getting\",\n  \"giant\",\"gift\",\"girl\",\"give\",\"given\",\"giving\",\"glad\",\"glass\",\n  \"globe\",\"go\",\"goes\",\"gold\",\"golden\",\"gone\",\"good\",\"goose\",\n  \"got\",\"government\",\"grabbed\",\"grade\",\"gradually\",\"grain\",\"grandfather\",\"grandmother\",\n  \"graph\",\"grass\",\"gravity\",\"gray\",\"great\",\"greater\",\"greatest\",\"greatly\",\n  \"green\",\"grew\",\"ground\",\"group\",\"grow\",\"grown\",\"growth\",\"guard\",\n  \"guess\",\"guide\",\"gulf\",\"gun\",\"habit\",\"had\",\"hair\",\"half\",\n  \"halfway\",\"hall\",\"hand\",\"handle\",\"handsome\",\"hang\",\"happen\",\"happened\",\n  \"happily\",\"happy\",\"harbor\",\"hard\",\"harder\",\"hardly\",\"has\",\"hat\",\n  \"have\",\"having\",\"hay\",\"he\",\"headed\",\"heading\",\"health\",\"heard\",\n  \"hearing\",\"heart\",\"heat\",\"heavy\",\"height\",\"held\",\"hello\",\"help\",\n  \"helpful\",\"her\",\"herd\",\"here\",\"herself\",\"hidden\",\"hide\",\"high\",\n  \"higher\",\"highest\",\"highway\",\"hill\",\"him\",\"himself\",\"his\",\"history\",\n  \"hit\",\"hold\",\"hole\",\"hollow\",\"home\",\"honor\",\"hope\",\"horn\",\n  \"horse\",\"hospital\",\"hot\",\"hour\",\"house\",\"how\",\"however\",\"huge\",\n  \"human\",\"hundred\",\"hung\",\"hungry\",\"hunt\",\"hunter\",\"hurried\",\"hurry\",\n  \"hurt\",\"husband\",\"ice\",\"idea\",\"identity\",\"if\",\"ill\",\"image\",\n  \"imagine\",\"immediately\",\"importance\",\"important\",\"impossible\",\"improve\",\"in\",\"inch\",\n  \"include\",\"including\",\"income\",\"increase\",\"indeed\",\"independent\",\"indicate\",\"individual\",\n  \"industrial\",\"industry\",\"influence\",\"information\",\"inside\",\"instance\",\"instant\",\"instead\",\n  \"instrument\",\"interest\",\"interior\",\"into\",\"introduced\",\"invented\",\"involved\",\"iron\",\n  \"is\",\"island\",\"it\",\"its\",\"itself\",\"jack\",\"jar\",\"jet\",\n  \"job\",\"join\",\"joined\",\"journey\",\"joy\",\"judge\",\"jump\",\"jungle\",\n  \"just\",\"keep\",\"kept\",\"key\",\"kids\",\"kill\",\"kind\",\"kitchen\",\n  \"knew\",\"knife\",\"know\",\"knowledge\",\"known\",\"label\",\"labor\",\"lack\",\n  \"lady\",\"laid\",\"lake\",\"lamp\",\"land\",\"language\",\"large\",\"larger\",\n  \"largest\",\"last\",\"late\",\"later\",\"laugh\",\"law\",\"lay\",\"layers\",\n  \"lead\",\"leader\",\"leaf\",\"learn\",\"least\",\"leather\",\"leave\",\"leaving\",\n  \"led\",\"left\",\"leg\",\"length\",\"lesson\",\"let\",\"letter\",\"level\",\n  \"library\",\"lie\",\"life\",\"lift\",\"light\",\"like\",\"likely\",\"limited\",\n  \"line\",\"lion\",\"lips\",\"liquid\",\"list\",\"listen\",\"little\",\"live\",\n  \"living\",\"load\",\"local\",\"locate\",\"location\",\"log\",\"lonely\",\"long\",\n  \"longer\",\"look\",\"loose\",\"lose\",\"loss\",\"lost\",\"lot\",\"loud\",\n  \"love\",\"lovely\",\"low\",\"lower\",\"luck\",\"lucky\",\"lunch\",\"lungs\",\n  \"lying\",\"machine\",\"machinery\",\"mad\",\"made\",\"magic\",\"magnet\",\"mail\",\n  \"main\",\"mainly\",\"major\",\"make\",\"making\",\"man\",\"managed\",\"manner\",\n  \"manufacturing\",\"many\",\"map\",\"mark\",\"market\",\"married\",\"mass\",\"massage\",\n  \"master\",\"material\",\"mathematics\",\"matter\",\"may\",\"maybe\",\"me\",\"meal\",\n  \"mean\",\"means\",\"meant\",\"measure\",\"meat\",\"medicine\",\"meet\",\"melted\",\n  \"member\",\"memory\",\"men\",\"mental\",\"merely\",\"met\",\"metal\",\"method\",\n  \"mice\",\"middle\",\"might\",\"mighty\",\"mile\",\"military\",\"milk\",\"mill\",\n  \"mind\",\"mine\",\"minerals\",\"minute\",\"mirror\",\"missing\",\"mission\",\"mistake\",\n  \"mix\",\"mixture\",\"model\",\"modern\",\"molecular\",\"moment\",\"money\",\"monkey\",\n  \"month\",\"mood\",\"moon\",\"more\",\"morning\",\"most\",\"mostly\",\"mother\",\n  \"motion\",\"motor\",\"mountain\",\"mouse\",\"mouth\",\"move\",\"movement\",\"movie\",\n  \"moving\",\"mud\",\"muscle\",\"music\",\"musical\",\"must\",\"my\",\"myself\",\n  \"mysterious\",\"nails\",\"name\",\"nation\",\"national\",\"native\",\"natural\",\"naturally\",\n  \"nature\",\"near\",\"nearby\",\"nearer\",\"nearest\",\"nearly\",\"necessary\",\"neck\",\n  \"needed\",\"needle\",\"needs\",\"negative\",\"neighbor\",\"neighborhood\",\"nervous\",\"nest\",\n  \"never\",\"new\",\"news\",\"newspaper\",\"next\",\"nice\",\"night\",\"nine\",\n  \"no\",\"nobody\",\"nodded\",\"noise\",\"none\",\"noon\",\"nor\",\"north\",\n  \"nose\",\"not\",\"note\",\"noted\",\"nothing\",\"notice\",\"noun\",\"now\",\n  \"number\",\"numeral\",\"nuts\",\"object\",\"observe\",\"obtain\",\"occasionally\",\"occur\",\n  \"ocean\",\"of\",\"off\",\"offer\",\"office\",\"officer\",\"official\",\"oil\",\n  \"old\",\"older\",\"oldest\",\"on\",\"once\",\"one\",\"only\",\"onto\",\n  \"open\",\"operation\",\"opinion\",\"opportunity\",\"opposite\",\"or\",\"orange\",\"orbit\",\n  \"order\",\"ordinary\",\"organization\",\"organized\",\"origin\",\"original\",\"other\",\"ought\",\n  \"our\",\"ourselves\",\"out\",\"outer\",\"outline\",\"outside\",\"over\",\"own\",\n  \"owner\",\"oxygen\",\"pack\",\"package\",\"page\",\"paid\",\"pain\",\"paint\",\n  \"pair\",\"palace\",\"pale\",\"pan\",\"paper\",\"paragraph\",\"parallel\",\"parent\",\n  \"park\",\"part\",\"particles\",\"particular\",\"particularly\",\"partly\",\"parts\",\"party\",\n  \"pass\",\"passage\",\"past\",\"path\",\"pattern\",\"pay\",\"peace\",\"pen\",\n  \"pencil\",\"people\",\"per\",\"percent\",\"perfect\",\"perfectly\",\"perhaps\",\"period\",\n  \"person\",\"personal\",\"pet\",\"phrase\",\"physical\",\"piano\",\"pick\",\"picture\",\n  \"pictured\",\"pie\",\"piece\",\"pig\",\"pile\",\"pilot\",\"pine\",\"pink\",\n  \"pipe\",\"pitch\",\"place\",\"plain\",\"plan\",\"plane\",\"planet\",\"planned\",\n  \"planning\",\"plant\",\"plastic\",\"plate\",\"plates\",\"play\",\"pleasant\",\"please\",\n  \"pleasure\",\"plenty\",\"plural\",\"plus\",\"pocket\",\"poem\",\"poet\",\"poetry\",\n  \"point\",\"pole\",\"police\",\"policeman\",\"political\",\"pond\",\"pony\",\"pool\",\n  \"poor\",\"popular\",\"population\",\"porch\",\"port\",\"position\",\"positive\",\"possible\",\n  \"possibly\",\"post\",\"pot\",\"potatoes\",\"pound\",\"pour\",\"powder\",\"power\",\n  \"powerful\",\"practical\",\"practice\",\"prepare\",\"present\",\"president\",\"press\",\"pressure\",\n  \"pretty\",\"prevent\",\"previous\",\"price\",\"pride\",\"primitive\",\"principal\",\"principle\",\n  \"printed\",\"private\",\"prize\",\"probably\",\"problem\",\"process\",\"produce\",\"product\",\n  \"production\",\"program\",\"progress\",\"promised\",\"proper\",\"properly\",\"property\",\"protection\",\n  \"proud\",\"prove\",\"provide\",\"public\",\"pull\",\"pupil\",\"pure\",\"purple\",\n  \"purpose\",\"push\",\"put\",\"putting\",\"quarter\",\"queen\",\"question\",\"quick\",\n  \"quickly\",\"quiet\",\"quietly\",\"quite\",\"rabbit\",\"race\",\"radio\",\"railroad\",\n  \"rain\",\"raise\",\"ran\",\"ranch\",\"range\",\"rapidly\",\"rate\",\"rather\",\n  \"raw\",\"rays\",\"reach\",\"read\",\"reader\",\"ready\",\"real\",\"realize\",\n  \"rear\",\"reason\",\"recall\",\"receive\",\"recent\",\"recently\",\"recognize\",\"record\",\n  \"red\",\"refer\",\"refused\",\"region\",\"regular\",\"related\",\"relationship\",\"religious\",\n  \"remain\",\"remarkable\",\"remember\",\"remove\",\"repeat\",\"replace\",\"replied\",\"report\",\n  \"represent\",\"require\",\"research\",\"respect\",\"rest\",\"result\",\"return\",\"review\",\n  \"rhyme\",\"rhythm\",\"rice\",\"rich\",\"ride\",\"riding\",\"right\",\"ring\",\n  \"rise\",\"rising\",\"river\",\"road\",\"roar\",\"rock\",\"rocket\",\"rocky\",\n  \"rod\",\"roll\",\"roof\",\"room\",\"root\",\"rope\",\"rose\",\"rough\",\n  \"round\",\"route\",\"row\",\"rubbed\",\"rubber\",\"rule\",\"ruler\",\"run\",\n  \"running\",\"rush\",\"sad\",\"saddle\",\"safe\",\"safety\",\"said\",\"sail\",\n  \"sale\",\"salmon\",\"salt\",\"same\",\"sand\",\"sang\",\"sat\",\"satellites\",\n  \"satisfied\",\"save\",\"saved\",\"saw\",\"say\",\"scale\",\"scared\",\"scene\",\n  \"school\",\"science\",\"scientific\",\"scientist\",\"score\",\"screen\",\"sea\",\"search\",\n  \"season\",\"seat\",\"second\",\"secret\",\"section\",\"see\",\"seed\",\"seeing\",\n  \"seems\",\"seen\",\"seldom\",\"select\",\"selection\",\"sell\",\"send\",\"sense\",\n  \"sent\",\"sentence\",\"separate\",\"series\",\"serious\",\"serve\",\"service\",\"sets\",\n  \"setting\",\"settle\",\"settlers\",\"seven\",\"several\",\"shade\",\"shadow\",\"shake\",\n  \"shaking\",\"shall\",\"shallow\",\"shape\",\"share\",\"sharp\",\"she\",\"sheep\",\n  \"sheet\",\"shelf\",\"shells\",\"shelter\",\"shine\",\"shinning\",\"ship\",\"shirt\",\n  \"shoe\",\"shoot\",\"shop\",\"shore\",\"short\",\"shorter\",\"shot\",\"should\",\n  \"shoulder\",\"shout\",\"show\",\"shown\",\"shut\",\"sick\",\"sides\",\"sight\",\n  \"sign\",\"signal\",\"silence\",\"silent\",\"silk\",\"silly\",\"silver\",\"similar\",\n  \"simple\",\"simplest\",\"simply\",\"since\",\"sing\",\"single\",\"sink\",\"sister\",\n  \"sit\",\"sitting\",\"situation\",\"six\",\"size\",\"skill\",\"skin\",\"sky\",\n  \"slabs\",\"slave\",\"sleep\",\"slept\",\"slide\",\"slight\",\"slightly\",\"slip\",\n  \"slipped\",\"slope\",\"slow\",\"slowly\",\"small\",\"smaller\",\"smallest\",\"smell\",\n  \"smile\",\"smoke\",\"smooth\",\"snake\",\"snow\",\"so\",\"soap\",\"social\",\n  \"society\",\"soft\",\"softly\",\"soil\",\"solar\",\"sold\",\"soldier\",\"solid\",\n  \"solution\",\"solve\",\"some\",\"somebody\",\"somehow\",\"someone\",\"something\",\"sometime\",\n  \"somewhere\",\"son\",\"song\",\"soon\",\"sort\",\"sound\",\"source\",\"south\",\n  \"southern\",\"space\",\"speak\",\"special\",\"species\",\"specific\",\"speech\",\"speed\",\n  \"spell\",\"spend\",\"spent\",\"spider\",\"spin\",\"spirit\",\"spite\",\"split\",\n  \"spoken\",\"sport\",\"spread\",\"spring\",\"square\",\"stage\",\"stairs\",\"stand\",\n  \"standard\",\"star\",\"stared\",\"start\",\"state\",\"statement\",\"station\",\"stay\",\n  \"steady\",\"steam\",\"steel\",\"steep\",\"stems\",\"step\",\"stepped\",\"stick\",\n  \"stiff\",\"still\",\"stock\",\"stomach\",\"stone\",\"stood\",\"stop\",\"stopped\",\n  \"store\",\"storm\",\"story\",\"stove\",\"straight\",\"strange\",\"stranger\",\"straw\",\n  \"stream\",\"street\",\"strength\",\"stretch\",\"strike\",\"string\",\"strip\",\"strong\",\n  \"stronger\",\"struck\",\"structure\",\"struggle\",\"stuck\",\"student\",\"studied\",\"studying\",\n  \"subject\",\"substance\",\"success\",\"successful\",\"such\",\"sudden\",\"suddenly\",\"sugar\",\n  \"suggest\",\"suit\",\"sum\",\"summer\",\"sun\",\"sunlight\",\"supper\",\"supply\",\n  \"support\",\"suppose\",\"sure\",\"surface\",\"surprise\",\"surrounded\",\"swam\",\"sweet\",\n  \"swept\",\"swim\",\"swimming\",\"swing\",\"swung\",\"syllable\",\"symbol\",\"system\",\n  \"table\",\"tail\",\"take\",\"taken\",\"tales\",\"talk\",\"tall\",\"tank\",\n  \"tape\",\"task\",\"taste\",\"taught\",\"tax\",\"tea\",\"teach\",\"teacher\",\n  \"team\",\"tears\",\"teeth\",\"telephone\",\"television\",\"tell\",\"temperature\",\"ten\",\n  \"tent\",\"term\",\"terrible\",\"test\",\"than\",\"thank\",\"that\",\"thee\",\n  \"them\",\"themselves\",\"then\",\"theory\",\"there\",\"therefore\",\"these\",\"they\",\n  \"thick\",\"thin\",\"thing\",\"think\",\"third\",\"thirty\",\"this\",\"those\",\n  \"thou\",\"though\",\"thought\",\"thousand\",\"thread\",\"three\",\"threw\",\"throat\",\n  \"through\",\"throughout\",\"throw\",\"thrown\",\"thumb\",\"thus\",\"thy\",\"tide\",\n  \"tie\",\"tight\",\"tightly\",\"till\",\"time\",\"tin\",\"tiny\",\"tip\",\n  \"tired\",\"title\",\"to\",\"tobacco\",\"today\",\"together\",\"told\",\"tomorrow\",\n  \"tone\",\"tongue\",\"tonight\",\"too\",\"took\",\"tool\",\"top\",\"topic\",\n  \"torn\",\"total\",\"touch\",\"toward\",\"tower\",\"town\",\"toy\",\"trace\",\n  \"track\",\"trade\",\"traffic\",\"trail\",\"train\",\"transportation\",\"trap\",\"travel\",\n  \"treated\",\"tree\",\"triangle\",\"tribe\",\"trick\",\"tried\",\"trip\",\"troops\",\n  \"tropical\",\"trouble\",\"truck\",\"trunk\",\"truth\",\"try\",\"tube\",\"tune\",\n  \"turn\",\"twelve\",\"twenty\",\"twice\",\"two\",\"type\",\"typical\",\"uncle\",\n  \"under\",\"underline\",\"understanding\",\"unhappy\",\"union\",\"unit\",\"universe\",\"unknown\",\n  \"unless\",\"until\",\"unusual\",\"up\",\"upon\",\"upper\",\"upward\",\"us\",\n  \"use\",\"useful\",\"using\",\"usual\",\"usually\",\"valley\",\"valuable\",\"value\",\n  \"vapor\",\"variety\",\"various\",\"vast\",\"vegetable\",\"verb\",\"vertical\",\"very\",\n  \"vessels\",\"victory\",\"view\",\"village\",\"visit\",\"visitor\",\"voice\",\"volume\",\n  \"vote\",\"vowel\",\"voyage\",\"wagon\",\"wait\",\"walk\",\"wall\",\"want\",\n  \"war\",\"warm\",\"warn\",\"was\",\"wash\",\"waste\",\"watch\",\"water\",\n  \"wave\",\"way\",\"we\",\"weak\",\"wealth\",\"wear\",\"weather\",\"week\",\n  \"weigh\",\"weight\",\"welcome\",\"well\",\"went\",\"were\",\"west\",\"western\",\n  \"wet\",\"whale\",\"what\",\"whatever\",\"wheat\",\"wheel\",\"when\",\"whenever\",\n  \"where\",\"wherever\",\"whether\",\"which\",\"while\",\"whispered\",\"whistle\",\"white\",\n  \"who\",\"whole\",\"whom\",\"whose\",\"why\",\"wide\",\"widely\",\"wife\",\n  \"wild\",\"will\",\"willing\",\"win\",\"wind\",\"window\",\"wing\",\"winter\",\n  \"wire\",\"wise\",\"wish\",\"with\",\"within\",\"without\",\"wolf\",\"women\",\n  \"won\",\"wonder\",\"wonderful\",\"wood\",\"wooden\",\"wool\",\"word\",\"wore\",\n  \"work\",\"worker\",\"world\",\"worried\",\"worry\",\"worse\",\"worth\",\"would\",\n  \"wrapped\",\"write\",\"writer\",\"writing\",\"written\",\"wrong\",\"wrote\",\"yard\",\n  \"year\",\"yellow\",\"yes\",\"yesterday\",\"yet\",\"you\",\"young\",\"younger\",\n  \"your\",\"yourself\",\"youth\",\"zero\",\"zebra\",\"zipper\",\"zoo\",\"zulu\"\n];\n\nfunction words(options) {\n\n  function word() {\n    if (options && options.maxLength > 1) {\n      return generateWordWithMaxLength();\n    } else {\n      return generateRandomWord();\n    }\n  }\n\n  function generateWordWithMaxLength() {\n    var rightSize = false;\n    var wordUsed;\n    while (!rightSize) {  \n      wordUsed = generateRandomWord();\n      if(wordUsed.length <= options.maxLength) {\n        rightSize = true;\n      }\n\n    }\n    return wordUsed;\n  }\n\n  function generateRandomWord() {\n    return wordList[randInt(wordList.length)];\n  }\n\n  function randInt(lessThan) {\n    return Math.floor(Math.random() * lessThan);\n  }\n\n  // No arguments = generate one word\n  if (typeof(options) === 'undefined') {\n    return word();\n  }\n\n  // Just a number = return that many words\n  if (typeof(options) === 'number') {\n    options = { exactly: options };\n  }\n\n  // options supported: exactly, min, max, join\n  if (options.exactly) {\n    options.min = options.exactly;\n    options.max = options.exactly;\n  }\n  \n  // not a number = one word par string\n  if (typeof(options.wordsPerString) !== 'number') {\n    options.wordsPerString = 1;\n  }\n\n  //not a function = returns the raw word\n  if (typeof(options.formatter) !== 'function') {\n    options.formatter = (word) => word;\n  }\n\n  //not a string = separator is a space\n  if (typeof(options.separator) !== 'string') {\n    options.separator = ' ';\n  }\n\n  var total = options.min + randInt(options.max + 1 - options.min);\n  var results = [];\n  var token = '';\n  var relativeIndex = 0;\n\n  for (var i = 0; (i < total * options.wordsPerString); i++) {\n    if (relativeIndex === options.wordsPerString - 1) {\n      token += options.formatter(word(), relativeIndex);\n    }\n    else {\n      token += options.formatter(word(), relativeIndex) + options.separator;\n    }\n    relativeIndex++;\n    if ((i + 1) % options.wordsPerString === 0) {\n      results.push(token);\n      token = ''; \n      relativeIndex = 0;\n    }\n   \n  }\n  if (typeof options.join === 'string') {\n    results = results.join(options.join);\n  }\n\n  return results;\n}\n\nvar randomWords$1 = words;\n// Export the word list as it is often useful\nwords.wordList = wordList;\n\nvar alea = {exports: {}};\n\n(function (module) {\n\t// A port of an algorithm by Johannes Baagøe <baagoe@baagoe.com>, 2010\n\t// http://baagoe.com/en/RandomMusings/javascript/\n\t// https://github.com/nquinlan/better-random-numbers-for-javascript-mirror\n\t// Original work is under MIT license -\n\n\t// Copyright (C) 2010 by Johannes Baagøe <baagoe@baagoe.org>\n\t//\n\t// Permission is hereby granted, free of charge, to any person obtaining a copy\n\t// of this software and associated documentation files (the \"Software\"), to deal\n\t// in the Software without restriction, including without limitation the rights\n\t// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n\t// copies of the Software, and to permit persons to whom the Software is\n\t// furnished to do so, subject to the following conditions:\n\t//\n\t// The above copyright notice and this permission notice shall be included in\n\t// all copies or substantial portions of the Software.\n\t//\n\t// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n\t// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n\t// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n\t// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n\t// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n\t// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n\t// THE SOFTWARE.\n\n\n\n\t(function(global, module, define) {\n\n\tfunction Alea(seed) {\n\t  var me = this, mash = Mash();\n\n\t  me.next = function() {\n\t    var t = 2091639 * me.s0 + me.c * 2.3283064365386963e-10; // 2^-32\n\t    me.s0 = me.s1;\n\t    me.s1 = me.s2;\n\t    return me.s2 = t - (me.c = t | 0);\n\t  };\n\n\t  // Apply the seeding algorithm from Baagoe.\n\t  me.c = 1;\n\t  me.s0 = mash(' ');\n\t  me.s1 = mash(' ');\n\t  me.s2 = mash(' ');\n\t  me.s0 -= mash(seed);\n\t  if (me.s0 < 0) { me.s0 += 1; }\n\t  me.s1 -= mash(seed);\n\t  if (me.s1 < 0) { me.s1 += 1; }\n\t  me.s2 -= mash(seed);\n\t  if (me.s2 < 0) { me.s2 += 1; }\n\t  mash = null;\n\t}\n\n\tfunction copy(f, t) {\n\t  t.c = f.c;\n\t  t.s0 = f.s0;\n\t  t.s1 = f.s1;\n\t  t.s2 = f.s2;\n\t  return t;\n\t}\n\n\tfunction impl(seed, opts) {\n\t  var xg = new Alea(seed),\n\t      state = opts && opts.state,\n\t      prng = xg.next;\n\t  prng.int32 = function() { return (xg.next() * 0x100000000) | 0; };\n\t  prng.double = function() {\n\t    return prng() + (prng() * 0x200000 | 0) * 1.1102230246251565e-16; // 2^-53\n\t  };\n\t  prng.quick = prng;\n\t  if (state) {\n\t    if (typeof(state) == 'object') copy(state, xg);\n\t    prng.state = function() { return copy(xg, {}); };\n\t  }\n\t  return prng;\n\t}\n\n\tfunction Mash() {\n\t  var n = 0xefc8249d;\n\n\t  var mash = function(data) {\n\t    data = String(data);\n\t    for (var i = 0; i < data.length; i++) {\n\t      n += data.charCodeAt(i);\n\t      var h = 0.02519603282416938 * n;\n\t      n = h >>> 0;\n\t      h -= n;\n\t      h *= n;\n\t      n = h >>> 0;\n\t      h -= n;\n\t      n += h * 0x100000000; // 2^32\n\t    }\n\t    return (n >>> 0) * 2.3283064365386963e-10; // 2^-32\n\t  };\n\n\t  return mash;\n\t}\n\n\n\tif (module && module.exports) {\n\t  module.exports = impl;\n\t} else if (define && define.amd) {\n\t  define(function() { return impl; });\n\t} else {\n\t  this.alea = impl;\n\t}\n\n\t})(\n\t  commonjsGlobal,\n\t  module,    // present in node.js\n\t  (typeof undefined) == 'function'    // present with an AMD loader\n\t);\n} (alea));\n\nvar seedrandom = alea.exports;\n\n/**\r\n * Uses the `seedrandom` package to replace Math.random() with a seedable PRNG.\r\n *\r\n * @param seed An optional seed. If none is given, a random seed will be generated.\r\n * @returns The seed value.\r\n */\r\nfunction setSeed(seed = Math.random().toString()) {\r\n    Math.random = seedrandom(seed);\r\n    return seed;\r\n}\r\nfunction repeat(array, repetitions, unpack = false) {\r\n    const arr_isArray = Array.isArray(array);\r\n    const rep_isArray = Array.isArray(repetitions);\r\n    // if array is not an array, then we just repeat the item\r\n    if (!arr_isArray) {\r\n        if (!rep_isArray) {\r\n            array = [array];\r\n            repetitions = [repetitions];\r\n        }\r\n        else {\r\n            repetitions = [repetitions[0]];\r\n            console.log(\"Unclear parameters given to randomization.repeat. Multiple set sizes specified, but only one item exists to sample. Proceeding using the first set size.\");\r\n        }\r\n    }\r\n    else {\r\n        // if repetitions is not an array, but array is, then we\r\n        // repeat repetitions for each entry in array\r\n        if (!rep_isArray) {\r\n            let reps = [];\r\n            for (let i = 0; i < array.length; i++) {\r\n                reps.push(repetitions);\r\n            }\r\n            repetitions = reps;\r\n        }\r\n        else {\r\n            if (array.length != repetitions.length) {\r\n                console.warn(\"Unclear parameters given to randomization.repeat. Items and repetitions are unequal lengths. Behavior may not be as expected.\");\r\n                // throw warning if repetitions is too short, use first rep ONLY.\r\n                if (repetitions.length < array.length) {\r\n                    let reps = [];\r\n                    for (let i = 0; i < array.length; i++) {\r\n                        reps.push(repetitions);\r\n                    }\r\n                    repetitions = reps;\r\n                }\r\n                else {\r\n                    // throw warning if too long, and then use the first N\r\n                    repetitions = repetitions.slice(0, array.length);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    // should be clear at this point to assume that array and repetitions are arrays with == length\r\n    let allsamples = [];\r\n    for (let i = 0; i < array.length; i++) {\r\n        for (let j = 0; j < repetitions[i]; j++) {\r\n            if (array[i] == null || typeof array[i] != \"object\") {\r\n                allsamples.push(array[i]);\r\n            }\r\n            else {\r\n                allsamples.push(Object.assign({}, array[i]));\r\n            }\r\n        }\r\n    }\r\n    let out = shuffle(allsamples);\r\n    if (unpack) {\r\n        out = unpackArray(out);\r\n    }\r\n    return out;\r\n}\r\nfunction shuffle(array) {\r\n    if (!Array.isArray(array)) {\r\n        console.error(\"Argument to shuffle() must be an array.\");\r\n    }\r\n    const copy_array = array.slice(0);\r\n    let m = copy_array.length, t, i;\r\n    // While there remain elements to shuffle…\r\n    while (m) {\r\n        // Pick a remaining element…\r\n        i = Math.floor(Math.random() * m--);\r\n        // And swap it with the current element.\r\n        t = copy_array[m];\r\n        copy_array[m] = copy_array[i];\r\n        copy_array[i] = t;\r\n    }\r\n    return copy_array;\r\n}\r\nfunction shuffleNoRepeats(arr, equalityTest) {\r\n    if (!Array.isArray(arr)) {\r\n        console.error(\"First argument to shuffleNoRepeats() must be an array.\");\r\n    }\r\n    if (typeof equalityTest !== \"undefined\" && typeof equalityTest !== \"function\") {\r\n        console.error(\"Second argument to shuffleNoRepeats() must be a function.\");\r\n    }\r\n    // define a default equalityTest\r\n    if (typeof equalityTest == \"undefined\") {\r\n        equalityTest = function (a, b) {\r\n            if (a === b) {\r\n                return true;\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        };\r\n    }\r\n    const random_shuffle = shuffle(arr);\r\n    for (let i = 0; i < random_shuffle.length - 1; i++) {\r\n        if (equalityTest(random_shuffle[i], random_shuffle[i + 1])) {\r\n            // neighbors are equal, pick a new random neighbor to swap (not the first or last element, to avoid edge cases)\r\n            let random_pick = Math.floor(Math.random() * (random_shuffle.length - 2)) + 1;\r\n            // test to make sure the new neighbor isn't equal to the old one\r\n            while (equalityTest(random_shuffle[i + 1], random_shuffle[random_pick]) ||\r\n                equalityTest(random_shuffle[i + 1], random_shuffle[random_pick + 1]) ||\r\n                equalityTest(random_shuffle[i + 1], random_shuffle[random_pick - 1]) ||\r\n                equalityTest(random_shuffle[i], random_shuffle[random_pick])) {\r\n                random_pick = Math.floor(Math.random() * (random_shuffle.length - 2)) + 1;\r\n            }\r\n            const new_neighbor = random_shuffle[random_pick];\r\n            random_shuffle[random_pick] = random_shuffle[i + 1];\r\n            random_shuffle[i + 1] = new_neighbor;\r\n        }\r\n    }\r\n    return random_shuffle;\r\n}\r\nfunction shuffleAlternateGroups(arr_groups, random_group_order = false) {\r\n    const n_groups = arr_groups.length;\r\n    if (n_groups == 1) {\r\n        console.warn(\"shuffleAlternateGroups() was called with only one group. Defaulting to simple shuffle.\");\r\n        return shuffle(arr_groups[0]);\r\n    }\r\n    let group_order = [];\r\n    for (let i = 0; i < n_groups; i++) {\r\n        group_order.push(i);\r\n    }\r\n    if (random_group_order) {\r\n        group_order = shuffle(group_order);\r\n    }\r\n    const randomized_groups = [];\r\n    let min_length = null;\r\n    for (let i = 0; i < n_groups; i++) {\r\n        min_length =\r\n            min_length === null ? arr_groups[i].length : Math.min(min_length, arr_groups[i].length);\r\n        randomized_groups.push(shuffle(arr_groups[i]));\r\n    }\r\n    const out = [];\r\n    for (let i = 0; i < min_length; i++) {\r\n        for (let j = 0; j < group_order.length; j++) {\r\n            out.push(randomized_groups[group_order[j]][i]);\r\n        }\r\n    }\r\n    return out;\r\n}\r\nfunction sampleWithoutReplacement(arr, size) {\r\n    if (!Array.isArray(arr)) {\r\n        console.error(\"First argument to sampleWithoutReplacement() must be an array\");\r\n    }\r\n    if (size > arr.length) {\r\n        console.error(\"Cannot take a sample larger than the size of the set of items to sample.\");\r\n    }\r\n    return shuffle(arr).slice(0, size);\r\n}\r\nfunction sampleWithReplacement(arr, size, weights) {\r\n    if (!Array.isArray(arr)) {\r\n        console.error(\"First argument to sampleWithReplacement() must be an array\");\r\n    }\r\n    const normalized_weights = [];\r\n    if (typeof weights !== \"undefined\") {\r\n        if (weights.length !== arr.length) {\r\n            console.error(\"The length of the weights array must equal the length of the array \" +\r\n                \"to be sampled from.\");\r\n        }\r\n        let weight_sum = 0;\r\n        for (const weight of weights) {\r\n            weight_sum += weight;\r\n        }\r\n        for (const weight of weights) {\r\n            normalized_weights.push(weight / weight_sum);\r\n        }\r\n    }\r\n    else {\r\n        for (let i = 0; i < arr.length; i++) {\r\n            normalized_weights.push(1 / arr.length);\r\n        }\r\n    }\r\n    const cumulative_weights = [normalized_weights[0]];\r\n    for (let i = 1; i < normalized_weights.length; i++) {\r\n        cumulative_weights.push(normalized_weights[i] + cumulative_weights[i - 1]);\r\n    }\r\n    const samp = [];\r\n    for (let i = 0; i < size; i++) {\r\n        const rnd = Math.random();\r\n        let index = 0;\r\n        while (rnd > cumulative_weights[index]) {\r\n            index++;\r\n        }\r\n        samp.push(arr[index]);\r\n    }\r\n    return samp;\r\n}\r\nfunction factorial(factors, repetitions = 1, unpack = false) {\r\n    let design = [{}];\r\n    for (const [factorName, factor] of Object.entries(factors)) {\r\n        const new_design = [];\r\n        for (const level of factor) {\r\n            for (const cell of design) {\r\n                new_design.push(Object.assign(Object.assign({}, cell), { [factorName]: level }));\r\n            }\r\n        }\r\n        design = new_design;\r\n    }\r\n    return repeat(design, repetitions, unpack);\r\n}\r\nfunction randomID(length = 32) {\r\n    let result = \"\";\r\n    const chars = \"0123456789abcdefghjklmnopqrstuvwxyz\";\r\n    for (let i = 0; i < length; i++) {\r\n        result += chars[Math.floor(Math.random() * chars.length)];\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Generate a random integer from `lower` to `upper`, inclusive of both end points.\r\n * @param lower The lowest value it is possible to generate\r\n * @param upper The highest value it is possible to generate\r\n * @returns A random integer\r\n */\r\nfunction randomInt(lower, upper) {\r\n    if (upper < lower) {\r\n        throw new Error(\"Upper boundary must be less than or equal to lower boundary\");\r\n    }\r\n    return lower + Math.floor(Math.random() * (upper - lower + 1));\r\n}\r\n/**\r\n * Generates a random sample from a Bernoulli distribution.\r\n * @param p The probability of sampling 1.\r\n * @returns 0, with probability 1-p, or 1, with probability p.\r\n */\r\nfunction sampleBernoulli(p) {\r\n    return Math.random() <= p ? 1 : 0;\r\n}\r\nfunction sampleNormal(mean, standard_deviation) {\r\n    return randn_bm() * standard_deviation + mean;\r\n}\r\nfunction sampleExponential(rate) {\r\n    return -Math.log(Math.random()) / rate;\r\n}\r\nfunction sampleExGaussian(mean, standard_deviation, rate, positive = false) {\r\n    let s = sampleNormal(mean, standard_deviation) + sampleExponential(rate);\r\n    if (positive) {\r\n        while (s <= 0) {\r\n            s = sampleNormal(mean, standard_deviation) + sampleExponential(rate);\r\n        }\r\n    }\r\n    return s;\r\n}\r\n/**\r\n * Generate one or more random words.\r\n *\r\n * This is a wrapper function for the {@link https://www.npmjs.com/package/random-words `random-words` npm package}.\r\n *\r\n * @param opts An object with optional properties `min`, `max`, `exactly`,\r\n * `join`, `maxLength`, `wordsPerString`, `separator`, and `formatter`.\r\n *\r\n * @returns An array of words or a single string, depending on parameter choices.\r\n */\r\nfunction randomWords(opts) {\r\n    return randomWords$1(opts);\r\n}\r\n// Box-Muller transformation for a random sample from normal distribution with mean = 0, std = 1\r\n// https://stackoverflow.com/a/36481059/3726673\r\nfunction randn_bm() {\r\n    var u = 0, v = 0;\r\n    while (u === 0)\r\n        u = Math.random(); //Converting [0,1) to (0,1)\r\n    while (v === 0)\r\n        v = Math.random();\r\n    return Math.sqrt(-2.0 * Math.log(u)) * Math.cos(2.0 * Math.PI * v);\r\n}\r\nfunction unpackArray(array) {\r\n    const out = {};\r\n    for (const x of array) {\r\n        for (const key of Object.keys(x)) {\r\n            if (typeof out[key] === \"undefined\") {\r\n                out[key] = [];\r\n            }\r\n            out[key].push(x[key]);\r\n        }\r\n    }\r\n    return out;\r\n}\n\nvar randomization = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    setSeed: setSeed,\n    repeat: repeat,\n    shuffle: shuffle,\n    shuffleNoRepeats: shuffleNoRepeats,\n    shuffleAlternateGroups: shuffleAlternateGroups,\n    sampleWithoutReplacement: sampleWithoutReplacement,\n    sampleWithReplacement: sampleWithReplacement,\n    factorial: factorial,\n    randomID: randomID,\n    randomInt: randomInt,\n    sampleBernoulli: sampleBernoulli,\n    sampleNormal: sampleNormal,\n    sampleExponential: sampleExponential,\n    sampleExGaussian: sampleExGaussian,\n    randomWords: randomWords\n});\n\n/**\r\n * Gets information about the Mechanical Turk Environment, HIT, Assignment, and Worker\r\n * by parsing the URL variables that Mechanical Turk generates.\r\n * @returns An object containing information about the Mechanical Turk Environment, HIT, Assignment, and Worker.\r\n */\r\nfunction turkInfo() {\r\n    const turk = {\r\n        previewMode: false,\r\n        outsideTurk: false,\r\n        hitId: \"INVALID_URL_PARAMETER\",\r\n        assignmentId: \"INVALID_URL_PARAMETER\",\r\n        workerId: \"INVALID_URL_PARAMETER\",\r\n        turkSubmitTo: \"INVALID_URL_PARAMETER\",\r\n    };\r\n    const param = function (url, name) {\r\n        name = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\r\n        const regexS = \"[\\\\?&]\" + name + \"=([^&#]*)\";\r\n        const regex = new RegExp(regexS);\r\n        const results = regex.exec(url);\r\n        return results == null ? \"\" : results[1];\r\n    };\r\n    const src = param(window.location.href, \"assignmentId\")\r\n        ? window.location.href\r\n        : document.referrer;\r\n    const keys = [\"assignmentId\", \"hitId\", \"workerId\", \"turkSubmitTo\"];\r\n    keys.map(function (key) {\r\n        turk[key] = unescape(param(src, key));\r\n    });\r\n    turk.previewMode = turk.assignmentId == \"ASSIGNMENT_ID_NOT_AVAILABLE\";\r\n    turk.outsideTurk =\r\n        !turk.previewMode && turk.hitId === \"\" && turk.assignmentId == \"\" && turk.workerId == \"\";\r\n    return turk;\r\n}\r\n/**\r\n * Send data to Mechnical Turk for storage.\r\n * @param data An object containing `key:value` pairs to send to Mechanical Turk. Values\r\n * cannot contain nested objects, arrays, or functions.\r\n * @returns Nothing\r\n */\r\nfunction submitToTurk(data) {\r\n    const turk = turkInfo();\r\n    const assignmentId = turk.assignmentId;\r\n    const turkSubmitTo = turk.turkSubmitTo;\r\n    if (!assignmentId || !turkSubmitTo)\r\n        return;\r\n    const form = document.createElement(\"form\");\r\n    form.method = \"POST\";\r\n    form.action = turkSubmitTo + \"/mturk/externalSubmit?assignmentId=\" + assignmentId;\r\n    for (const key in data) {\r\n        if (data.hasOwnProperty(key)) {\r\n            const hiddenField = document.createElement(\"input\");\r\n            hiddenField.type = \"hidden\";\r\n            hiddenField.name = key;\r\n            hiddenField.id = key;\r\n            hiddenField.value = data[key];\r\n            form.appendChild(hiddenField);\r\n        }\r\n    }\r\n    document.body.appendChild(form);\r\n    form.submit();\r\n}\n\nvar turk = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    turkInfo: turkInfo,\n    submitToTurk: submitToTurk\n});\n\nclass TimelineNode {\r\n    // constructor\r\n    constructor(jsPsych, parameters, parent, relativeID) {\r\n        this.jsPsych = jsPsych;\r\n        // track progress through the node\r\n        this.progress = {\r\n            current_location: -1,\r\n            current_variable_set: 0,\r\n            current_repetition: 0,\r\n            current_iteration: 0,\r\n            done: false,\r\n        };\r\n        // store a link to the parent of this node\r\n        this.parent_node = parent;\r\n        // create the ID for this node\r\n        this.relative_id = typeof parent === \"undefined\" ? 0 : relativeID;\r\n        // check if there is a timeline parameter\r\n        // if there is, then this node has its own timeline\r\n        if (typeof parameters.timeline !== \"undefined\") {\r\n            // create timeline properties\r\n            this.timeline_parameters = {\r\n                timeline: [],\r\n                loop_function: parameters.loop_function,\r\n                conditional_function: parameters.conditional_function,\r\n                sample: parameters.sample,\r\n                randomize_order: typeof parameters.randomize_order == \"undefined\" ? false : parameters.randomize_order,\r\n                repetitions: typeof parameters.repetitions == \"undefined\" ? 1 : parameters.repetitions,\r\n                timeline_variables: typeof parameters.timeline_variables == \"undefined\"\r\n                    ? [{}]\r\n                    : parameters.timeline_variables,\r\n                on_timeline_finish: parameters.on_timeline_finish,\r\n                on_timeline_start: parameters.on_timeline_start,\r\n            };\r\n            this.setTimelineVariablesOrder();\r\n            // extract all of the node level data and parameters\r\n            // but remove all of the timeline-level specific information\r\n            // since this will be used to copy things down hierarchically\r\n            var node_data = Object.assign({}, parameters);\r\n            delete node_data.timeline;\r\n            delete node_data.conditional_function;\r\n            delete node_data.loop_function;\r\n            delete node_data.randomize_order;\r\n            delete node_data.repetitions;\r\n            delete node_data.timeline_variables;\r\n            delete node_data.sample;\r\n            delete node_data.on_timeline_start;\r\n            delete node_data.on_timeline_finish;\r\n            this.node_trial_data = node_data; // store for later...\r\n            // create a TimelineNode for each element in the timeline\r\n            for (var i = 0; i < parameters.timeline.length; i++) {\r\n                // merge parameters\r\n                var merged_parameters = Object.assign({}, node_data, parameters.timeline[i]);\r\n                // merge any data from the parent node into child nodes\r\n                if (typeof node_data.data == \"object\" && typeof parameters.timeline[i].data == \"object\") {\r\n                    var merged_data = Object.assign({}, node_data.data, parameters.timeline[i].data);\r\n                    merged_parameters.data = merged_data;\r\n                }\r\n                this.timeline_parameters.timeline.push(new TimelineNode(this.jsPsych, merged_parameters, this, i));\r\n            }\r\n        }\r\n        // if there is no timeline parameter, then this node is a trial node\r\n        else {\r\n            // check to see if a valid trial type is defined\r\n            if (typeof parameters.type === \"undefined\") {\r\n                console.error('Trial level node is missing the \"type\" parameter. The parameters for the node are: ' +\r\n                    JSON.stringify(parameters));\r\n            }\r\n            // create a deep copy of the parameters for the trial\r\n            this.trial_parameters = Object.assign({}, parameters);\r\n        }\r\n    }\r\n    // recursively get the next trial to run.\r\n    // if this node is a leaf (trial), then return the trial.\r\n    // otherwise, recursively find the next trial in the child timeline.\r\n    trial() {\r\n        if (typeof this.timeline_parameters == \"undefined\") {\r\n            // returns a clone of the trial_parameters to\r\n            // protect functions.\r\n            return deepCopy(this.trial_parameters);\r\n        }\r\n        else {\r\n            if (this.progress.current_location >= this.timeline_parameters.timeline.length) {\r\n                return null;\r\n            }\r\n            else {\r\n                return this.timeline_parameters.timeline[this.progress.current_location].trial();\r\n            }\r\n        }\r\n    }\r\n    markCurrentTrialComplete() {\r\n        if (typeof this.timeline_parameters === \"undefined\") {\r\n            this.progress.done = true;\r\n        }\r\n        else {\r\n            this.timeline_parameters.timeline[this.progress.current_location].markCurrentTrialComplete();\r\n        }\r\n    }\r\n    nextRepetiton() {\r\n        this.setTimelineVariablesOrder();\r\n        this.progress.current_location = -1;\r\n        this.progress.current_variable_set = 0;\r\n        this.progress.current_repetition++;\r\n        for (var i = 0; i < this.timeline_parameters.timeline.length; i++) {\r\n            this.timeline_parameters.timeline[i].reset();\r\n        }\r\n    }\r\n    // set the order for going through the timeline variables array\r\n    setTimelineVariablesOrder() {\r\n        const timeline_parameters = this.timeline_parameters;\r\n        // check to make sure this node has variables\r\n        if (typeof timeline_parameters === \"undefined\" ||\r\n            typeof timeline_parameters.timeline_variables === \"undefined\") {\r\n            return;\r\n        }\r\n        var order = [];\r\n        for (var i = 0; i < timeline_parameters.timeline_variables.length; i++) {\r\n            order.push(i);\r\n        }\r\n        if (typeof timeline_parameters.sample !== \"undefined\") {\r\n            if (timeline_parameters.sample.type == \"custom\") {\r\n                order = timeline_parameters.sample.fn(order);\r\n            }\r\n            else if (timeline_parameters.sample.type == \"with-replacement\") {\r\n                order = sampleWithReplacement(order, timeline_parameters.sample.size, timeline_parameters.sample.weights);\r\n            }\r\n            else if (timeline_parameters.sample.type == \"without-replacement\") {\r\n                order = sampleWithoutReplacement(order, timeline_parameters.sample.size);\r\n            }\r\n            else if (timeline_parameters.sample.type == \"fixed-repetitions\") {\r\n                order = repeat(order, timeline_parameters.sample.size, false);\r\n            }\r\n            else if (timeline_parameters.sample.type == \"alternate-groups\") {\r\n                order = shuffleAlternateGroups(timeline_parameters.sample.groups, timeline_parameters.sample.randomize_group_order);\r\n            }\r\n            else {\r\n                console.error('Invalid type in timeline sample parameters. Valid options for type are \"custom\", \"with-replacement\", \"without-replacement\", \"fixed-repetitions\", and \"alternate-groups\"');\r\n            }\r\n        }\r\n        if (timeline_parameters.randomize_order) {\r\n            order = shuffle(order);\r\n        }\r\n        this.progress.order = order;\r\n    }\r\n    // next variable set\r\n    nextSet() {\r\n        this.progress.current_location = -1;\r\n        this.progress.current_variable_set++;\r\n        for (var i = 0; i < this.timeline_parameters.timeline.length; i++) {\r\n            this.timeline_parameters.timeline[i].reset();\r\n        }\r\n    }\r\n    // update the current trial node to be completed\r\n    // returns true if the node is complete after advance (all subnodes are also complete)\r\n    // returns false otherwise\r\n    advance() {\r\n        const progress = this.progress;\r\n        const timeline_parameters = this.timeline_parameters;\r\n        const internal = this.jsPsych.internal;\r\n        // first check to see if done\r\n        if (progress.done) {\r\n            return true;\r\n        }\r\n        // if node has not started yet (progress.current_location == -1),\r\n        // then try to start the node.\r\n        if (progress.current_location == -1) {\r\n            // check for on_timeline_start and conditonal function on nodes with timelines\r\n            if (typeof timeline_parameters !== \"undefined\") {\r\n                // only run the conditional function if this is the first repetition of the timeline when\r\n                // repetitions > 1, and only when on the first variable set\r\n                if (typeof timeline_parameters.conditional_function !== \"undefined\" &&\r\n                    progress.current_repetition == 0 &&\r\n                    progress.current_variable_set == 0) {\r\n                    internal.call_immediate = true;\r\n                    var conditional_result = timeline_parameters.conditional_function();\r\n                    internal.call_immediate = false;\r\n                    // if the conditional_function() returns false, then the timeline\r\n                    // doesn't run and is marked as complete.\r\n                    if (conditional_result == false) {\r\n                        progress.done = true;\r\n                        return true;\r\n                    }\r\n                }\r\n                // if we reach this point then the node has its own timeline and will start\r\n                // so we need to check if there is an on_timeline_start function if we are on the first variable set\r\n                if (typeof timeline_parameters.on_timeline_start !== \"undefined\" &&\r\n                    progress.current_variable_set == 0) {\r\n                    timeline_parameters.on_timeline_start();\r\n                }\r\n            }\r\n            // if we reach this point, then either the node doesn't have a timeline of the\r\n            // conditional function returned true and it can start\r\n            progress.current_location = 0;\r\n            // call advance again on this node now that it is pointing to a new location\r\n            return this.advance();\r\n        }\r\n        // if this node has a timeline, propogate down to the current trial.\r\n        if (typeof timeline_parameters !== \"undefined\") {\r\n            var have_node_to_run = false;\r\n            // keep incrementing the location in the timeline until one of the nodes reached is incomplete\r\n            while (progress.current_location < timeline_parameters.timeline.length &&\r\n                have_node_to_run == false) {\r\n                // check to see if the node currently pointed at is done\r\n                var target_complete = timeline_parameters.timeline[progress.current_location].advance();\r\n                if (!target_complete) {\r\n                    have_node_to_run = true;\r\n                    return false;\r\n                }\r\n                else {\r\n                    progress.current_location++;\r\n                }\r\n            }\r\n            // if we've reached the end of the timeline (which, if the code is here, we have)\r\n            // there are a few steps to see what to do next...\r\n            // first, check the timeline_variables to see if we need to loop through again\r\n            // with a new set of variables\r\n            if (progress.current_variable_set < progress.order.length - 1) {\r\n                // reset the progress of the node to be with the new set\r\n                this.nextSet();\r\n                // then try to advance this node again.\r\n                return this.advance();\r\n            }\r\n            // if we're all done with the timeline_variables, then check to see if there are more repetitions\r\n            else if (progress.current_repetition < timeline_parameters.repetitions - 1) {\r\n                this.nextRepetiton();\r\n                // check to see if there is an on_timeline_finish function\r\n                if (typeof timeline_parameters.on_timeline_finish !== \"undefined\") {\r\n                    timeline_parameters.on_timeline_finish();\r\n                }\r\n                return this.advance();\r\n            }\r\n            // if we're all done with the repetitions...\r\n            else {\r\n                // check to see if there is an on_timeline_finish function\r\n                if (typeof timeline_parameters.on_timeline_finish !== \"undefined\") {\r\n                    timeline_parameters.on_timeline_finish();\r\n                }\r\n                // if we're all done with the repetitions, check if there is a loop function.\r\n                if (typeof timeline_parameters.loop_function !== \"undefined\") {\r\n                    internal.call_immediate = true;\r\n                    if (timeline_parameters.loop_function(this.generatedData())) {\r\n                        this.reset();\r\n                        internal.call_immediate = false;\r\n                        return this.parent_node.advance();\r\n                    }\r\n                    else {\r\n                        progress.done = true;\r\n                        internal.call_immediate = false;\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n            // no more loops on this timeline, we're done!\r\n            progress.done = true;\r\n            return true;\r\n        }\r\n    }\r\n    // check the status of the done flag\r\n    isComplete() {\r\n        return this.progress.done;\r\n    }\r\n    // getter method for timeline variables\r\n    getTimelineVariableValue(variable_name) {\r\n        if (typeof this.timeline_parameters == \"undefined\") {\r\n            return undefined;\r\n        }\r\n        var v = this.timeline_parameters.timeline_variables[this.progress.order[this.progress.current_variable_set]][variable_name];\r\n        return v;\r\n    }\r\n    // recursive upward search for timeline variables\r\n    findTimelineVariable(variable_name) {\r\n        var v = this.getTimelineVariableValue(variable_name);\r\n        if (typeof v == \"undefined\") {\r\n            if (typeof this.parent_node !== \"undefined\") {\r\n                return this.parent_node.findTimelineVariable(variable_name);\r\n            }\r\n            else {\r\n                return undefined;\r\n            }\r\n        }\r\n        else {\r\n            return v;\r\n        }\r\n    }\r\n    // recursive downward search for active trial to extract timeline variable\r\n    timelineVariable(variable_name) {\r\n        if (typeof this.timeline_parameters == \"undefined\") {\r\n            const val = this.findTimelineVariable(variable_name);\r\n            if (typeof val === \"undefined\") {\r\n                console.warn(\"Timeline variable \" + variable_name + \" not found.\");\r\n            }\r\n            return val;\r\n        }\r\n        else {\r\n            // if progress.current_location is -1, then the timeline variable is being evaluated\r\n            // in a function that runs prior to the trial starting, so we should treat that trial\r\n            // as being the active trial for purposes of finding the value of the timeline variable\r\n            var loc = Math.max(0, this.progress.current_location);\r\n            // if loc is greater than the number of elements on this timeline, then the timeline\r\n            // variable is being evaluated in a function that runs after the trial on the timeline\r\n            // are complete but before advancing to the next (like a loop_function).\r\n            // treat the last active trial as the active trial for this purpose.\r\n            if (loc == this.timeline_parameters.timeline.length) {\r\n                loc = loc - 1;\r\n            }\r\n            // now find the variable\r\n            const val = this.timeline_parameters.timeline[loc].timelineVariable(variable_name);\r\n            if (typeof val === \"undefined\") {\r\n                console.warn(\"Timeline variable \" + variable_name + \" not found.\");\r\n            }\r\n            return val;\r\n        }\r\n    }\r\n    // recursively get all the timeline variables for this trial\r\n    allTimelineVariables() {\r\n        var all_tvs = this.allTimelineVariablesNames();\r\n        var all_tvs_vals = {};\r\n        for (var i = 0; i < all_tvs.length; i++) {\r\n            all_tvs_vals[all_tvs[i]] = this.timelineVariable(all_tvs[i]);\r\n        }\r\n        return all_tvs_vals;\r\n    }\r\n    // helper to get all the names at this stage.\r\n    allTimelineVariablesNames(so_far = []) {\r\n        if (typeof this.timeline_parameters !== \"undefined\") {\r\n            so_far = so_far.concat(Object.keys(this.timeline_parameters.timeline_variables[this.progress.order[this.progress.current_variable_set]]));\r\n            // if progress.current_location is -1, then the timeline variable is being evaluated\r\n            // in a function that runs prior to the trial starting, so we should treat that trial\r\n            // as being the active trial for purposes of finding the value of the timeline variable\r\n            var loc = Math.max(0, this.progress.current_location);\r\n            // if loc is greater than the number of elements on this timeline, then the timeline\r\n            // variable is being evaluated in a function that runs after the trial on the timeline\r\n            // are complete but before advancing to the next (like a loop_function).\r\n            // treat the last active trial as the active trial for this purpose.\r\n            if (loc == this.timeline_parameters.timeline.length) {\r\n                loc = loc - 1;\r\n            }\r\n            // now find the variable\r\n            return this.timeline_parameters.timeline[loc].allTimelineVariablesNames(so_far);\r\n        }\r\n        if (typeof this.timeline_parameters == \"undefined\") {\r\n            return so_far;\r\n        }\r\n    }\r\n    // recursively get the number of **trials** contained in the timeline\r\n    // assuming that while loops execute exactly once and if conditionals\r\n    // always run\r\n    length() {\r\n        var length = 0;\r\n        if (typeof this.timeline_parameters !== \"undefined\") {\r\n            for (var i = 0; i < this.timeline_parameters.timeline.length; i++) {\r\n                length += this.timeline_parameters.timeline[i].length();\r\n            }\r\n        }\r\n        else {\r\n            return 1;\r\n        }\r\n        return length;\r\n    }\r\n    // return the percentage of trials completed, grouped at the first child level\r\n    // counts a set of trials as complete when the child node is done\r\n    percentComplete() {\r\n        var total_trials = this.length();\r\n        var completed_trials = 0;\r\n        for (var i = 0; i < this.timeline_parameters.timeline.length; i++) {\r\n            if (this.timeline_parameters.timeline[i].isComplete()) {\r\n                completed_trials += this.timeline_parameters.timeline[i].length();\r\n            }\r\n        }\r\n        return (completed_trials / total_trials) * 100;\r\n    }\r\n    // resets the node and all subnodes to original state\r\n    // but increments the current_iteration counter\r\n    reset() {\r\n        this.progress.current_location = -1;\r\n        this.progress.current_repetition = 0;\r\n        this.progress.current_variable_set = 0;\r\n        this.progress.current_iteration++;\r\n        this.progress.done = false;\r\n        this.setTimelineVariablesOrder();\r\n        if (typeof this.timeline_parameters != \"undefined\") {\r\n            for (var i = 0; i < this.timeline_parameters.timeline.length; i++) {\r\n                this.timeline_parameters.timeline[i].reset();\r\n            }\r\n        }\r\n    }\r\n    // mark this node as finished\r\n    end() {\r\n        this.progress.done = true;\r\n    }\r\n    // recursively end whatever sub-node is running the current trial\r\n    endActiveNode() {\r\n        if (typeof this.timeline_parameters == \"undefined\") {\r\n            this.end();\r\n            this.parent_node.end();\r\n        }\r\n        else {\r\n            this.timeline_parameters.timeline[this.progress.current_location].endActiveNode();\r\n        }\r\n    }\r\n    // get a unique ID associated with this node\r\n    // the ID reflects the current iteration through this node.\r\n    ID() {\r\n        var id = \"\";\r\n        if (typeof this.parent_node == \"undefined\") {\r\n            return \"0.\" + this.progress.current_iteration;\r\n        }\r\n        else {\r\n            id += this.parent_node.ID() + \"-\";\r\n            id += this.relative_id + \".\" + this.progress.current_iteration;\r\n            return id;\r\n        }\r\n    }\r\n    // get the ID of the active trial\r\n    activeID() {\r\n        if (typeof this.timeline_parameters == \"undefined\") {\r\n            return this.ID();\r\n        }\r\n        else {\r\n            return this.timeline_parameters.timeline[this.progress.current_location].activeID();\r\n        }\r\n    }\r\n    // get all the data generated within this node\r\n    generatedData() {\r\n        return this.jsPsych.data.getDataByTimelineNode(this.ID());\r\n    }\r\n    // get all the trials of a particular type\r\n    trialsOfType(type) {\r\n        if (typeof this.timeline_parameters == \"undefined\") {\r\n            if (this.trial_parameters.type == type) {\r\n                return this.trial_parameters;\r\n            }\r\n            else {\r\n                return [];\r\n            }\r\n        }\r\n        else {\r\n            var trials = [];\r\n            for (var i = 0; i < this.timeline_parameters.timeline.length; i++) {\r\n                var t = this.timeline_parameters.timeline[i].trialsOfType(type);\r\n                trials = trials.concat(t);\r\n            }\r\n            return trials;\r\n        }\r\n    }\r\n    // add new trials to end of this timeline\r\n    insert(parameters) {\r\n        if (typeof this.timeline_parameters === \"undefined\") {\r\n            console.error(\"Cannot add new trials to a trial-level node.\");\r\n        }\r\n        else {\r\n            this.timeline_parameters.timeline.push(new TimelineNode(this.jsPsych, Object.assign(Object.assign({}, this.node_trial_data), parameters), this, this.timeline_parameters.timeline.length));\r\n        }\r\n    }\r\n}\n\nfunction delay(ms) {\r\n    return new Promise((resolve) => setTimeout(resolve, ms));\r\n}\r\nclass JsPsych {\r\n    constructor(options) {\r\n        this.extensions = {};\r\n        this.turk = turk;\r\n        this.randomization = randomization;\r\n        this.utils = utils;\r\n        //\r\n        // private variables\r\n        //\r\n        /**\r\n         * options\r\n         */\r\n        this.opts = {};\r\n        // flow control\r\n        this.global_trial_index = 0;\r\n        this.current_trial = {};\r\n        this.current_trial_finished = false;\r\n        /**\r\n         * is the experiment paused?\r\n         */\r\n        this.paused = false;\r\n        this.waiting = false;\r\n        /**\r\n         * is the page retrieved directly via file:// protocol (true) or hosted on a server (false)?\r\n         */\r\n        this.file_protocol = false;\r\n        /**\r\n         * is the experiment running in `simulate()` mode\r\n         */\r\n        this.simulation_mode = null;\r\n        // storing a single webaudio context to prevent problems with multiple inits\r\n        // of jsPsych\r\n        this.webaudio_context = null;\r\n        this.internal = {\r\n            /**\r\n             * this flag is used to determine whether we are in a scope where\r\n             * jsPsych.timelineVariable() should be executed immediately or\r\n             * whether it should return a function to access the variable later.\r\n             *\r\n             **/\r\n            call_immediate: false,\r\n        };\r\n        this.progress_bar_amount = 0;\r\n        // override default options if user specifies an option\r\n        options = Object.assign({ display_element: undefined, on_finish: () => { }, on_trial_start: () => { }, on_trial_finish: () => { }, on_data_update: () => { }, on_interaction_data_update: () => { }, on_close: () => { }, use_webaudio: true, exclusions: {}, show_progress_bar: false, message_progress_bar: \"Completion Progress\", auto_update_progress_bar: true, default_iti: 0, minimum_valid_rt: 0, experiment_width: null, override_safe_mode: false, case_sensitive_responses: false, extensions: [] }, options);\r\n        this.opts = options;\r\n        autoBind(this); // so we can pass JsPsych methods as callbacks and `this` remains the JsPsych instance\r\n        this.webaudio_context =\r\n            typeof window !== \"undefined\" && typeof window.AudioContext !== \"undefined\"\r\n                ? new AudioContext()\r\n                : null;\r\n        // detect whether page is running in browser as a local file, and if so, disable web audio and video preloading to prevent CORS issues\r\n        if (window.location.protocol == \"file:\" &&\r\n            (options.override_safe_mode === false || typeof options.override_safe_mode === \"undefined\")) {\r\n            options.use_webaudio = false;\r\n            this.file_protocol = true;\r\n            console.warn(\"jsPsych detected that it is running via the file:// protocol and not on a web server. \" +\r\n                \"To prevent issues with cross-origin requests, Web Audio and video preloading have been disabled. \" +\r\n                \"If you would like to override this setting, you can set 'override_safe_mode' to 'true' in initJsPsych. \" +\r\n                \"For more information, see: https://www.jspsych.org/overview/running-experiments\");\r\n        }\r\n        // initialize modules\r\n        this.data = new JsPsychData(this);\r\n        this.pluginAPI = createJointPluginAPIObject(this);\r\n        // create instances of extensions\r\n        for (const extension of options.extensions) {\r\n            this.extensions[extension.type.info.name] = new extension.type(this);\r\n        }\r\n        // initialize audio context based on options and browser capabilities\r\n        this.pluginAPI.initAudio();\r\n    }\r\n    version() {\r\n        return version;\r\n    }\r\n    /**\r\n     * Starts an experiment using the provided timeline and returns a promise that is resolved when\r\n     * the experiment is finished.\r\n     *\r\n     * @param timeline The timeline to be run\r\n     */\r\n    run(timeline) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (typeof timeline === \"undefined\") {\r\n                console.error(\"No timeline declared in jsPsych.run. Cannot start experiment.\");\r\n            }\r\n            if (timeline.length === 0) {\r\n                console.error(\"No trials have been added to the timeline (the timeline is an empty array). Cannot start experiment.\");\r\n            }\r\n            // create experiment timeline\r\n            this.timelineDescription = timeline;\r\n            this.timeline = new TimelineNode(this, { timeline });\r\n            yield this.prepareDom();\r\n            yield this.checkExclusions(this.opts.exclusions);\r\n            yield this.loadExtensions(this.opts.extensions);\r\n            document.documentElement.setAttribute(\"jspsych\", \"present\");\r\n            this.startExperiment();\r\n            yield this.finished;\r\n        });\r\n    }\r\n    simulate(timeline, simulation_mode = \"data-only\", simulation_options = {}) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.simulation_mode = simulation_mode;\r\n            this.simulation_options = simulation_options;\r\n            yield this.run(timeline);\r\n        });\r\n    }\r\n    getProgress() {\r\n        return {\r\n            total_trials: typeof this.timeline === \"undefined\" ? undefined : this.timeline.length(),\r\n            current_trial_global: this.global_trial_index,\r\n            percent_complete: typeof this.timeline === \"undefined\" ? 0 : this.timeline.percentComplete(),\r\n        };\r\n    }\r\n    getStartTime() {\r\n        return this.exp_start_time;\r\n    }\r\n    getTotalTime() {\r\n        if (typeof this.exp_start_time === \"undefined\") {\r\n            return 0;\r\n        }\r\n        return new Date().getTime() - this.exp_start_time.getTime();\r\n    }\r\n    getDisplayElement() {\r\n        return this.DOM_target;\r\n    }\r\n    getDisplayContainerElement() {\r\n        return this.DOM_container;\r\n    }\r\n    finishTrial(data = {}) {\r\n        var _a;\r\n        if (this.current_trial_finished) {\r\n            return;\r\n        }\r\n        this.current_trial_finished = true;\r\n        // remove any CSS classes that were added to the DOM via css_classes parameter\r\n        if (typeof this.current_trial.css_classes !== \"undefined\" &&\r\n            Array.isArray(this.current_trial.css_classes)) {\r\n            this.DOM_target.classList.remove(...this.current_trial.css_classes);\r\n        }\r\n        // write the data from the trial\r\n        this.data.write(data);\r\n        // get back the data with all of the defaults in\r\n        const trial_data = this.data.getLastTrialData();\r\n        // for trial-level callbacks, we just want to pass in a reference to the values\r\n        // of the DataCollection, for easy access and editing.\r\n        const trial_data_values = trial_data.values()[0];\r\n        const current_trial = this.current_trial;\r\n        if (typeof current_trial.save_trial_parameters === \"object\") {\r\n            for (const key of Object.keys(current_trial.save_trial_parameters)) {\r\n                const key_val = current_trial.save_trial_parameters[key];\r\n                if (key_val === true) {\r\n                    if (typeof current_trial[key] === \"undefined\") {\r\n                        console.warn(`Invalid parameter specified in save_trial_parameters. Trial has no property called \"${key}\".`);\r\n                    }\r\n                    else if (typeof current_trial[key] === \"function\") {\r\n                        trial_data_values[key] = current_trial[key].toString();\r\n                    }\r\n                    else {\r\n                        trial_data_values[key] = current_trial[key];\r\n                    }\r\n                }\r\n                if (key_val === false) {\r\n                    // we don't allow internal_node_id or trial_index to be deleted because it would break other things\r\n                    if (key !== \"internal_node_id\" && key !== \"trial_index\") {\r\n                        delete trial_data_values[key];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // handle extension callbacks\r\n        const extensionCallbackResults = ((_a = current_trial.extensions) !== null && _a !== void 0 ? _a : []).map((extension) => this.extensions[extension.type.info.name].on_finish(extension.params));\r\n        const onExtensionCallbacksFinished = () => {\r\n            // about to execute lots of callbacks, so switch context.\r\n            this.internal.call_immediate = true;\r\n            // handle callback at plugin level\r\n            if (typeof current_trial.on_finish === \"function\") {\r\n                current_trial.on_finish(trial_data_values);\r\n            }\r\n            // handle callback at whole-experiment level\r\n            this.opts.on_trial_finish(trial_data_values);\r\n            // after the above callbacks are complete, then the data should be finalized\r\n            // for this trial. call the on_data_update handler, passing in the same\r\n            // data object that just went through the trial's finish handlers.\r\n            this.opts.on_data_update(trial_data_values);\r\n            // done with callbacks\r\n            this.internal.call_immediate = false;\r\n            // wait for iti\r\n            if (this.simulation_mode === \"data-only\") {\r\n                this.nextTrial();\r\n            }\r\n            else if (typeof current_trial.post_trial_gap === null ||\r\n                typeof current_trial.post_trial_gap === \"undefined\") {\r\n                if (this.opts.default_iti > 0) {\r\n                    setTimeout(this.nextTrial, this.opts.default_iti);\r\n                }\r\n                else {\r\n                    this.nextTrial();\r\n                }\r\n            }\r\n            else {\r\n                if (current_trial.post_trial_gap > 0) {\r\n                    setTimeout(this.nextTrial, current_trial.post_trial_gap);\r\n                }\r\n                else {\r\n                    this.nextTrial();\r\n                }\r\n            }\r\n        };\r\n        // Strictly using Promise.resolve to turn all values into promises would be cleaner here, but it\r\n        // would require user test code to make the event loop tick after every simulated key press even\r\n        // if there are no async `on_finish` methods. Hence, in order to avoid a breaking change, we\r\n        // only rely on the event loop if at least one `on_finish` method returns a promise.\r\n        if (extensionCallbackResults.some((result) => typeof result.then === \"function\")) {\r\n            Promise.all(extensionCallbackResults.map((result) => Promise.resolve(result).then((ext_data_values) => {\r\n                Object.assign(trial_data_values, ext_data_values);\r\n            }))).then(onExtensionCallbacksFinished);\r\n        }\r\n        else {\r\n            for (const values of extensionCallbackResults) {\r\n                Object.assign(trial_data_values, values);\r\n            }\r\n            onExtensionCallbacksFinished();\r\n        }\r\n    }\r\n    endExperiment(end_message = \"\", data = {}) {\r\n        this.timeline.end_message = end_message;\r\n        this.timeline.end();\r\n        this.pluginAPI.cancelAllKeyboardResponses();\r\n        this.pluginAPI.clearAllTimeouts();\r\n        this.finishTrial(data);\r\n    }\r\n    endCurrentTimeline() {\r\n        this.timeline.endActiveNode();\r\n    }\r\n    getCurrentTrial() {\r\n        return this.current_trial;\r\n    }\r\n    getInitSettings() {\r\n        return this.opts;\r\n    }\r\n    getCurrentTimelineNodeID() {\r\n        return this.timeline.activeID();\r\n    }\r\n    timelineVariable(varname, immediate = false) {\r\n        if (this.internal.call_immediate || immediate === true) {\r\n            return this.timeline.timelineVariable(varname);\r\n        }\r\n        else {\r\n            return {\r\n                timelineVariablePlaceholder: true,\r\n                timelineVariableFunction: () => this.timeline.timelineVariable(varname),\r\n            };\r\n        }\r\n    }\r\n    getAllTimelineVariables() {\r\n        return this.timeline.allTimelineVariables();\r\n    }\r\n    addNodeToEndOfTimeline(new_timeline, preload_callback) {\r\n        this.timeline.insert(new_timeline);\r\n    }\r\n    pauseExperiment() {\r\n        this.paused = true;\r\n    }\r\n    resumeExperiment() {\r\n        this.paused = false;\r\n        if (this.waiting) {\r\n            this.waiting = false;\r\n            this.nextTrial();\r\n        }\r\n    }\r\n    loadFail(message) {\r\n        message = message || \"<p>The experiment failed to load.</p>\";\r\n        this.DOM_target.innerHTML = message;\r\n    }\r\n    getSafeModeStatus() {\r\n        return this.file_protocol;\r\n    }\r\n    getTimeline() {\r\n        return this.timelineDescription;\r\n    }\r\n    prepareDom() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            // Wait until the document is ready\r\n            if (document.readyState !== \"complete\") {\r\n                yield new Promise((resolve) => {\r\n                    window.addEventListener(\"load\", resolve);\r\n                });\r\n            }\r\n            const options = this.opts;\r\n            // set DOM element where jsPsych will render content\r\n            // if undefined, then jsPsych will use the <body> tag and the entire page\r\n            if (typeof options.display_element === \"undefined\") {\r\n                // check if there is a body element on the page\r\n                const body = document.querySelector(\"body\");\r\n                if (body === null) {\r\n                    document.documentElement.appendChild(document.createElement(\"body\"));\r\n                }\r\n                // using the full page, so we need the HTML element to\r\n                // have 100% height, and body to be full width and height with\r\n                // no margin\r\n                document.querySelector(\"html\").style.height = \"100%\";\r\n                document.querySelector(\"body\").style.margin = \"0px\";\r\n                document.querySelector(\"body\").style.height = \"100%\";\r\n                document.querySelector(\"body\").style.width = \"100%\";\r\n                options.display_element = document.querySelector(\"body\");\r\n            }\r\n            else {\r\n                // make sure that the display element exists on the page\r\n                const display = options.display_element instanceof Element\r\n                    ? options.display_element\r\n                    : document.querySelector(\"#\" + options.display_element);\r\n                if (display === null) {\r\n                    console.error(\"The display_element specified in initJsPsych() does not exist in the DOM.\");\r\n                }\r\n                else {\r\n                    options.display_element = display;\r\n                }\r\n            }\r\n            options.display_element.innerHTML =\r\n                '<div class=\"jspsych-content-wrapper\"><div id=\"jspsych-content\"></div></div>';\r\n            this.DOM_container = options.display_element;\r\n            this.DOM_target = document.querySelector(\"#jspsych-content\");\r\n            // set experiment_width if not null\r\n            if (options.experiment_width !== null) {\r\n                this.DOM_target.style.width = options.experiment_width + \"px\";\r\n            }\r\n            // add tabIndex attribute to scope event listeners\r\n            options.display_element.tabIndex = 0;\r\n            // add CSS class to DOM_target\r\n            if (options.display_element.className.indexOf(\"jspsych-display-element\") === -1) {\r\n                options.display_element.className += \" jspsych-display-element\";\r\n            }\r\n            this.DOM_target.className += \"jspsych-content\";\r\n            // create listeners for user browser interaction\r\n            this.data.createInteractionListeners();\r\n            // add event for closing window\r\n            window.addEventListener(\"beforeunload\", options.on_close);\r\n        });\r\n    }\r\n    loadExtensions(extensions) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            // run the .initialize method of any extensions that are in use\r\n            // these should return a Promise to indicate when loading is complete\r\n            try {\r\n                yield Promise.all(extensions.map((extension) => this.extensions[extension.type.info.name].initialize(extension.params || {})));\r\n            }\r\n            catch (error_message) {\r\n                console.error(error_message);\r\n                throw new Error(error_message);\r\n            }\r\n        });\r\n    }\r\n    startExperiment() {\r\n        this.finished = new Promise((resolve) => {\r\n            this.resolveFinishedPromise = resolve;\r\n        });\r\n        // show progress bar if requested\r\n        if (this.opts.show_progress_bar === true) {\r\n            this.drawProgressBar(this.opts.message_progress_bar);\r\n        }\r\n        // record the start time\r\n        this.exp_start_time = new Date();\r\n        // begin!\r\n        this.timeline.advance();\r\n        this.doTrial(this.timeline.trial());\r\n    }\r\n    finishExperiment() {\r\n        const finish_result = this.opts.on_finish(this.data.get());\r\n        const done_handler = () => {\r\n            if (typeof this.timeline.end_message !== \"undefined\") {\r\n                this.DOM_target.innerHTML = this.timeline.end_message;\r\n            }\r\n            this.resolveFinishedPromise();\r\n        };\r\n        if (finish_result) {\r\n            Promise.resolve(finish_result).then(done_handler);\r\n        }\r\n        else {\r\n            done_handler();\r\n        }\r\n    }\r\n    nextTrial() {\r\n        // if experiment is paused, don't do anything.\r\n        if (this.paused) {\r\n            this.waiting = true;\r\n            return;\r\n        }\r\n        this.global_trial_index++;\r\n        // advance timeline\r\n        this.timeline.markCurrentTrialComplete();\r\n        const complete = this.timeline.advance();\r\n        // update progress bar if shown\r\n        if (this.opts.show_progress_bar === true && this.opts.auto_update_progress_bar === true) {\r\n            this.updateProgressBar();\r\n        }\r\n        // check if experiment is over\r\n        if (complete) {\r\n            this.finishExperiment();\r\n            return;\r\n        }\r\n        this.doTrial(this.timeline.trial());\r\n    }\r\n    doTrial(trial) {\r\n        this.current_trial = trial;\r\n        this.current_trial_finished = false;\r\n        // process all timeline variables for this trial\r\n        this.evaluateTimelineVariables(trial);\r\n        if (typeof trial.type === \"string\") {\r\n            throw new MigrationError(\"A string was provided as the trial's `type` parameter. Since jsPsych v7, the `type` parameter needs to be a plugin object.\");\r\n        }\r\n        // instantiate the plugin for this trial\r\n        trial.type = Object.assign(Object.assign({}, autoBind(new trial.type(this))), { info: trial.type.info });\r\n        // evaluate variables that are functions\r\n        this.evaluateFunctionParameters(trial);\r\n        // get default values for parameters\r\n        this.setDefaultValues(trial);\r\n        // about to execute callbacks\r\n        this.internal.call_immediate = true;\r\n        // call experiment wide callback\r\n        this.opts.on_trial_start(trial);\r\n        // call trial specific callback if it exists\r\n        if (typeof trial.on_start === \"function\") {\r\n            trial.on_start(trial);\r\n        }\r\n        // call any on_start functions for extensions\r\n        if (Array.isArray(trial.extensions)) {\r\n            for (const extension of trial.extensions) {\r\n                this.extensions[extension.type.info.name].on_start(extension.params);\r\n            }\r\n        }\r\n        // apply the focus to the element containing the experiment.\r\n        this.DOM_container.focus();\r\n        // reset the scroll on the DOM target\r\n        this.DOM_target.scrollTop = 0;\r\n        // add CSS classes to the DOM_target if they exist in trial.css_classes\r\n        if (typeof trial.css_classes !== \"undefined\") {\r\n            if (!Array.isArray(trial.css_classes) && typeof trial.css_classes === \"string\") {\r\n                trial.css_classes = [trial.css_classes];\r\n            }\r\n            if (Array.isArray(trial.css_classes)) {\r\n                this.DOM_target.classList.add(...trial.css_classes);\r\n            }\r\n        }\r\n        // setup on_load event callback\r\n        const load_callback = () => {\r\n            if (typeof trial.on_load === \"function\") {\r\n                trial.on_load();\r\n            }\r\n            // call any on_load functions for extensions\r\n            if (Array.isArray(trial.extensions)) {\r\n                for (const extension of trial.extensions) {\r\n                    this.extensions[extension.type.info.name].on_load(extension.params);\r\n                }\r\n            }\r\n        };\r\n        let trial_complete;\r\n        if (!this.simulation_mode) {\r\n            trial_complete = trial.type.trial(this.DOM_target, trial, load_callback);\r\n        }\r\n        if (this.simulation_mode) {\r\n            // check if the trial supports simulation\r\n            if (trial.type.simulate) {\r\n                let trial_sim_opts;\r\n                if (!trial.simulation_options) {\r\n                    trial_sim_opts = this.simulation_options.default;\r\n                }\r\n                if (trial.simulation_options) {\r\n                    if (typeof trial.simulation_options == \"string\") {\r\n                        if (this.simulation_options[trial.simulation_options]) {\r\n                            trial_sim_opts = this.simulation_options[trial.simulation_options];\r\n                        }\r\n                        else if (this.simulation_options.default) {\r\n                            console.log(`No matching simulation options found for \"${trial.simulation_options}\". Using \"default\" options.`);\r\n                            trial_sim_opts = this.simulation_options.default;\r\n                        }\r\n                        else {\r\n                            console.log(`No matching simulation options found for \"${trial.simulation_options}\" and no \"default\" options provided. Using the default values provided by the plugin.`);\r\n                            trial_sim_opts = {};\r\n                        }\r\n                    }\r\n                    else {\r\n                        trial_sim_opts = trial.simulation_options;\r\n                    }\r\n                }\r\n                trial_sim_opts = this.utils.deepCopy(trial_sim_opts);\r\n                trial_sim_opts = this.replaceFunctionsWithValues(trial_sim_opts, null);\r\n                if ((trial_sim_opts === null || trial_sim_opts === void 0 ? void 0 : trial_sim_opts.simulate) === false) {\r\n                    trial_complete = trial.type.trial(this.DOM_target, trial, load_callback);\r\n                }\r\n                else {\r\n                    trial_complete = trial.type.simulate(trial, (trial_sim_opts === null || trial_sim_opts === void 0 ? void 0 : trial_sim_opts.mode) || this.simulation_mode, trial_sim_opts, load_callback);\r\n                }\r\n            }\r\n            else {\r\n                // trial doesn't have a simulate method, so just run as usual\r\n                trial_complete = trial.type.trial(this.DOM_target, trial, load_callback);\r\n            }\r\n        }\r\n        // see if trial_complete is a Promise by looking for .then() function\r\n        const is_promise = trial_complete && typeof trial_complete.then == \"function\";\r\n        // in simulation mode we let the simulate function call the load_callback always.\r\n        if (!is_promise && !this.simulation_mode) {\r\n            load_callback();\r\n        }\r\n        // done with callbacks\r\n        this.internal.call_immediate = false;\r\n    }\r\n    evaluateTimelineVariables(trial) {\r\n        for (const key of Object.keys(trial)) {\r\n            if (typeof trial[key] === \"object\" &&\r\n                trial[key] !== null &&\r\n                typeof trial[key].timelineVariablePlaceholder !== \"undefined\") {\r\n                trial[key] = trial[key].timelineVariableFunction();\r\n            }\r\n            // timeline variables that are nested in objects\r\n            if (typeof trial[key] === \"object\" &&\r\n                trial[key] !== null &&\r\n                key !== \"timeline\" &&\r\n                key !== \"timeline_variables\") {\r\n                this.evaluateTimelineVariables(trial[key]);\r\n            }\r\n        }\r\n    }\r\n    evaluateFunctionParameters(trial) {\r\n        // set a flag so that jsPsych.timelineVariable() is immediately executed in this context\r\n        this.internal.call_immediate = true;\r\n        // iterate over each parameter\r\n        for (const key of Object.keys(trial)) {\r\n            // check to make sure parameter is not \"type\", since that was eval'd above.\r\n            if (key !== \"type\") {\r\n                // this if statement is checking to see if the parameter type is expected to be a function, in which case we should NOT evaluate it.\r\n                // the first line checks if the parameter is defined in the universalPluginParameters set\r\n                // the second line checks the plugin-specific parameters\r\n                if (typeof universalPluginParameters[key] !== \"undefined\" &&\r\n                    universalPluginParameters[key].type !== ParameterType.FUNCTION) {\r\n                    trial[key] = this.replaceFunctionsWithValues(trial[key], null);\r\n                }\r\n                if (typeof trial.type.info.parameters[key] !== \"undefined\" &&\r\n                    trial.type.info.parameters[key].type !== ParameterType.FUNCTION) {\r\n                    trial[key] = this.replaceFunctionsWithValues(trial[key], trial.type.info.parameters[key]);\r\n                }\r\n            }\r\n        }\r\n        // reset so jsPsych.timelineVariable() is no longer immediately executed\r\n        this.internal.call_immediate = false;\r\n    }\r\n    replaceFunctionsWithValues(obj, info) {\r\n        // null typeof is 'object' (?!?!), so need to run this first!\r\n        if (obj === null) {\r\n            return obj;\r\n        }\r\n        // arrays\r\n        else if (Array.isArray(obj)) {\r\n            for (let i = 0; i < obj.length; i++) {\r\n                obj[i] = this.replaceFunctionsWithValues(obj[i], info);\r\n            }\r\n        }\r\n        // objects\r\n        else if (typeof obj === \"object\") {\r\n            if (info === null || !info.nested) {\r\n                for (const key of Object.keys(obj)) {\r\n                    if (key === \"type\" || key === \"timeline\" || key === \"timeline_variables\") {\r\n                        // Ignore the object's `type` field because it contains a plugin and we do not want to\r\n                        // call plugin functions. Also ignore `timeline` and `timeline_variables` because they\r\n                        // are used in the `trials` parameter of the preload plugin and we don't want to actually\r\n                        // evaluate those in that context.\r\n                        continue;\r\n                    }\r\n                    obj[key] = this.replaceFunctionsWithValues(obj[key], null);\r\n                }\r\n            }\r\n            else {\r\n                for (const key of Object.keys(obj)) {\r\n                    if (typeof info.nested[key] === \"object\" &&\r\n                        info.nested[key].type !== ParameterType.FUNCTION) {\r\n                        obj[key] = this.replaceFunctionsWithValues(obj[key], info.nested[key]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else if (typeof obj === \"function\") {\r\n            return obj();\r\n        }\r\n        return obj;\r\n    }\r\n    setDefaultValues(trial) {\r\n        for (const param in trial.type.info.parameters) {\r\n            // check if parameter is complex with nested defaults\r\n            if (trial.type.info.parameters[param].type === ParameterType.COMPLEX) {\r\n                if (trial.type.info.parameters[param].array === true) {\r\n                    // iterate over each entry in the array\r\n                    trial[param].forEach(function (ip, i) {\r\n                        // check each parameter in the plugin description\r\n                        for (const p in trial.type.info.parameters[param].nested) {\r\n                            if (typeof trial[param][i][p] === \"undefined\" || trial[param][i][p] === null) {\r\n                                if (typeof trial.type.info.parameters[param].nested[p].default === \"undefined\") {\r\n                                    console.error(\"You must specify a value for the \" +\r\n                                        p +\r\n                                        \" parameter (nested in the \" +\r\n                                        param +\r\n                                        \" parameter) in the \" +\r\n                                        trial.type +\r\n                                        \" plugin.\");\r\n                                }\r\n                                else {\r\n                                    trial[param][i][p] = trial.type.info.parameters[param].nested[p].default;\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            // if it's not nested, checking is much easier and do that here:\r\n            else if (typeof trial[param] === \"undefined\" || trial[param] === null) {\r\n                if (typeof trial.type.info.parameters[param].default === \"undefined\") {\r\n                    console.error(\"You must specify a value for the \" +\r\n                        param +\r\n                        \" parameter in the \" +\r\n                        trial.type.info.name +\r\n                        \" plugin.\");\r\n                }\r\n                else {\r\n                    trial[param] = trial.type.info.parameters[param].default;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    checkExclusions(exclusions) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (exclusions.min_width || exclusions.min_height || exclusions.audio) {\r\n                console.warn(\"The exclusions option in `initJsPsych()` is deprecated and will be removed in a future version. We recommend using the browser-check plugin instead. See https://www.jspsych.org/latest/plugins/browser-check/.\");\r\n            }\r\n            // MINIMUM SIZE\r\n            if (exclusions.min_width || exclusions.min_height) {\r\n                const mw = exclusions.min_width || 0;\r\n                const mh = exclusions.min_height || 0;\r\n                if (window.innerWidth < mw || window.innerHeight < mh) {\r\n                    this.getDisplayElement().innerHTML =\r\n                        \"<p>Your browser window is too small to complete this experiment. \" +\r\n                            \"Please maximize the size of your browser window. If your browser window is already maximized, \" +\r\n                            \"you will not be able to complete this experiment.</p>\" +\r\n                            \"<p>The minimum width is \" +\r\n                            mw +\r\n                            \"px. Your current width is \" +\r\n                            window.innerWidth +\r\n                            \"px.</p>\" +\r\n                            \"<p>The minimum height is \" +\r\n                            mh +\r\n                            \"px. Your current height is \" +\r\n                            window.innerHeight +\r\n                            \"px.</p>\";\r\n                    // Wait for window size to increase\r\n                    while (window.innerWidth < mw || window.innerHeight < mh) {\r\n                        yield delay(100);\r\n                    }\r\n                    this.getDisplayElement().innerHTML = \"\";\r\n                }\r\n            }\r\n            // WEB AUDIO API\r\n            if (typeof exclusions.audio !== \"undefined\" && exclusions.audio) {\r\n                if (!window.hasOwnProperty(\"AudioContext\") && !window.hasOwnProperty(\"webkitAudioContext\")) {\r\n                    this.getDisplayElement().innerHTML =\r\n                        \"<p>Your browser does not support the WebAudio API, which means that you will not \" +\r\n                            \"be able to complete the experiment.</p><p>Browsers that support the WebAudio API include \" +\r\n                            \"Chrome, Firefox, Safari, and Edge.</p>\";\r\n                    throw new Error();\r\n                }\r\n            }\r\n        });\r\n    }\r\n    drawProgressBar(msg) {\r\n        document\r\n            .querySelector(\".jspsych-display-element\")\r\n            .insertAdjacentHTML(\"afterbegin\", '<div id=\"jspsych-progressbar-container\">' +\r\n            \"<span>\" +\r\n            msg +\r\n            \"</span>\" +\r\n            '<div id=\"jspsych-progressbar-outer\">' +\r\n            '<div id=\"jspsych-progressbar-inner\"></div>' +\r\n            \"</div></div>\");\r\n    }\r\n    updateProgressBar() {\r\n        this.setProgressBar(this.getProgress().percent_complete / 100);\r\n    }\r\n    setProgressBar(proportion_complete) {\r\n        proportion_complete = Math.max(Math.min(1, proportion_complete), 0);\r\n        document.querySelector(\"#jspsych-progressbar-inner\").style.width =\r\n            proportion_complete * 100 + \"%\";\r\n        this.progress_bar_amount = proportion_complete;\r\n    }\r\n    getProgressBarCompleted() {\r\n        return this.progress_bar_amount;\r\n    }\r\n}\n\n// __rollup-babel-import-regenerator-runtime__\r\n// temporary patch for Safari\r\nif (typeof window !== \"undefined\" &&\r\n    window.hasOwnProperty(\"webkitAudioContext\") &&\r\n    !window.hasOwnProperty(\"AudioContext\")) {\r\n    // @ts-expect-error\r\n    window.AudioContext = webkitAudioContext;\r\n}\r\n// end patch\r\n// The following function provides a uniform interface to initialize jsPsych, no matter whether a\r\n// browser supports ES6 classes or not (and whether the ES6 build or the Babel build is used).\r\n/**\r\n * Creates a new JsPsych instance using the provided options.\r\n *\r\n * @param options The options to pass to the JsPsych constructor\r\n * @returns A new JsPsych instance\r\n */\r\nfunction initJsPsych(options) {\r\n    const jsPsych = new JsPsych(options);\r\n    // Handle invocations of non-existent v6 methods with migration errors\r\n    const migrationMessages = {\r\n        init: \"`jsPsych.init()` was replaced by `initJsPsych()` in jsPsych v7.\",\r\n        ALL_KEYS: 'jsPsych.ALL_KEYS was replaced by the \"ALL_KEYS\" string in jsPsych v7.',\r\n        NO_KEYS: 'jsPsych.NO_KEYS was replaced by the \"NO_KEYS\" string in jsPsych v7.',\r\n        // Getter functions that were renamed\r\n        currentTimelineNodeID: \"`currentTimelineNodeID()` was renamed to `getCurrentTimelineNodeID()` in jsPsych v7.\",\r\n        progress: \"`progress()` was renamed to `getProgress()` in jsPsych v7.\",\r\n        startTime: \"`startTime()` was renamed to `getStartTime()` in jsPsych v7.\",\r\n        totalTime: \"`totalTime()` was renamed to `getTotalTime()` in jsPsych v7.\",\r\n        currentTrial: \"`currentTrial()` was renamed to `getCurrentTrial()` in jsPsych v7.\",\r\n        initSettings: \"`initSettings()` was renamed to `getInitSettings()` in jsPsych v7.\",\r\n        allTimelineVariables: \"`allTimelineVariables()` was renamed to `getAllTimelineVariables()` in jsPsych v7.\",\r\n    };\r\n    Object.defineProperties(jsPsych, Object.fromEntries(Object.entries(migrationMessages).map(([key, message]) => [\r\n        key,\r\n        {\r\n            get() {\r\n                throw new MigrationError(message);\r\n            },\r\n        },\r\n    ])));\r\n    return jsPsych;\r\n}\n\nexport { JsPsych, ParameterType, initJsPsych, universalPluginParameters };\n//# sourceMappingURL=index.js.map\n","import { initJsPsych } from \"jspsych\";\n\n\nexport const settings = {\n    colorOrder: Math.floor(Math.random()*2),\n    pM: Array('easy', 'hard')[Math.floor(Math.random()*2)],\n    pEM: [10, 10],\n    gameTypeOrder: Math.floor(Math.random()*2),\n    val: 3,\n    nTrials: 50\n}\n\nexport const text = {\n    game1: settings.colorOrder == 1 ? 'Green Game' : 'Blue Game',\n    color1: settings.colorOrder == 1 ? 'green' : 'blue',\n    hex1: settings.colorOrder == 1 ? '#00aa00' : '#1067e8',\n    span1: settings.colorOrder == 1 ? 'a-span' : 'b-span',\n    game2: settings.colorOrder == 0 ? 'Green Game' : 'Blue Game',\n    color2: settings.colorOrder == 0 ? 'green' : 'blue',\n    hex2: settings.colorOrder == 0 ? '#00aa00' : '#1067e8',\n    span2: settings.colorOrder == 0 ? 'a-span' : 'b-span',\n    value: settings.val.toString(),\n    plural: settings.val == 1 ? '' : 's', \n    wasWere: settings.val == 1 ? 'was' : 'were'\n};\n\n\nexport default jsPsych = initJsPsych({\n  on_finish: () => {\n    // jsPsych.data.displayData();\n  }\n})\n","import { ParameterType } from 'jspsych';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\n\nconst info = {\r\n    name: \"pipe\",\r\n    parameters: {\r\n        /**\r\n         * The 12-character experiment ID provided by pipe.jspsych.org.\r\n         */\r\n        experiment_id: {\r\n            type: ParameterType.STRING,\r\n            default: undefined,\r\n        },\r\n        /**\r\n         * The action to take. Can be `\"save\"`, `\"saveBase64\"`, or `\"condition\"`.\r\n         * If `\"save\"`, the data will be saved to the OSF.\r\n         * If `\"saveBase64\"`, the data should be a base64-encoded string and will be decoded to binary before being saved to the OSF.\r\n         * If `\"condition\"`, this will get the next condition for the experiment and save it in the data for this trial.\r\n         */\r\n        action: {\r\n            type: ParameterType.STRING,\r\n            default: undefined,\r\n        },\r\n        /**\r\n         * Name of the file to create on the OSF. It should include the extension.\r\n         * If the file already exists, no data will be saved.\r\n         */\r\n        filename: {\r\n            type: ParameterType.STRING,\r\n            default: null,\r\n        },\r\n        /**\r\n         * A string-based representation of the data to save.\r\n         *\r\n         * To save JSON, you can use `()=>jsPsych.data.get().json()`.\r\n         * To save CSV, you can use `()=>jsPsych.data.get().csv()`.\r\n         *\r\n         * The use of a function is necessary to get the updated data at\r\n         * the time of saving.\r\n         */\r\n        data_string: {\r\n            type: ParameterType.STRING,\r\n            default: null,\r\n        },\r\n    },\r\n};\r\n/**\r\n * **jsPsychPipe**\r\n *\r\n * This plugin facilitates communication with DataPipe (https://pipe.jspsych.org), a tool for\r\n * sending data from jsPsych experiments to the OSF (https://osf.io/). You will need a DataPipe\r\n * account to use this plugin.\r\n *\r\n * @author Josh de Leeuw\r\n * @see {@link https://DOCUMENTATION_URL DOCUMENTATION LINK TEXT}\r\n */\r\nclass PipePlugin {\r\n    constructor(jsPsych) {\r\n        this.jsPsych = jsPsych;\r\n    }\r\n    trial(display_element, trial) {\r\n        this.run(display_element, trial);\r\n    }\r\n    run(display_element, trial) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            // show circular progress bar\r\n            const progressCSS = `\n      .spinner {\n        animation: rotate 2s linear infinite;\n        z-index: 2;\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        margin: -25px 0 0 -25px;\n        width: 50px;\n        height: 50px;\n      }\n        \n      .spinner .path {\n        stroke: rgb(25,25,25);\n        stroke-linecap: round;\n        animation: dash 1.5s ease-in-out infinite;\n      }\n\n      @keyframes rotate {\n        100% {\n          transform: rotate(360deg);\n        }\n      }\n      \n      @keyframes dash {\n        0% {\n          stroke-dasharray: 1, 150;\n          stroke-dashoffset: 0;\n        }\n        50% {\n          stroke-dasharray: 90, 150;\n          stroke-dashoffset: -35;\n        }\n        100% {\n          stroke-dasharray: 90, 150;\n          stroke-dashoffset: -124;\n        }\n      }\n    `;\r\n            const progressHTML = `\n      <style>${progressCSS}</style>\n      <svg class=\"spinner\" viewBox=\"0 0 50 50\">\n        <circle class=\"path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\" stroke-width=\"5\"></circle>\n      </svg>`;\r\n            display_element.innerHTML = progressHTML;\r\n            let result;\r\n            if (trial.action === \"save\") {\r\n                result = yield PipePlugin.saveData(trial.experiment_id, trial.filename, trial.data_string);\r\n            }\r\n            if (trial.action === \"saveBase64\") {\r\n                result = yield PipePlugin.saveBase64Data(trial.experiment_id, trial.filename, trial.data_string);\r\n            }\r\n            if (trial.action === \"condition\") {\r\n                result = yield PipePlugin.getCondition(trial.experiment_id);\r\n            }\r\n            display_element.innerHTML = \"\";\r\n            // data saving\r\n            var trial_data = {\r\n                result: result,\r\n                success: result.error ? false : true,\r\n            };\r\n            // end trial\r\n            this.jsPsych.finishTrial(trial_data);\r\n        });\r\n    }\r\n    /**\r\n     * Save data to the OSF using pipe.jspsych.org.\r\n     *\r\n     * @param expID The 12-character experiment ID provided by pipe.jspsych.org.\r\n     * @param filename A unique filename to save the data to. It should include the extension.\r\n     * @param data The data as a string. Any text-basd format (e.g., JSON, CSV, TXT) is acceptable.\r\n     * @returns The response from the server.\r\n     */\r\n    static saveData(expID, filename, data) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!expID || !filename || !data) {\r\n                throw new Error(\"Missing required parameter(s).\");\r\n            }\r\n            let response;\r\n            try {\r\n                response = yield fetch(\"https://pipe.jspsych.org/api/data/\", {\r\n                    method: \"POST\",\r\n                    headers: {\r\n                        \"Content-Type\": \"application/json\",\r\n                        Accept: \"*/*\",\r\n                    },\r\n                    body: JSON.stringify({\r\n                        experimentID: expID,\r\n                        filename: filename,\r\n                        data: data,\r\n                    }),\r\n                });\r\n            }\r\n            catch (error) {\r\n                return error;\r\n            }\r\n            return yield response.json();\r\n        });\r\n    }\r\n    /**\r\n     * Save base64-encoded data to the OSF using pipe.jspsych.org.\r\n     *\r\n     * @param expID The 12-character experiment ID provided by pipe.jspsych.org.\r\n     * @param filename A unique filename to save the data to. It should include the extension.\r\n     * @param data The data as a base64-encoded string. It will be decoded by the server before being stored in the OSF.\r\n     * @returns The response from the server.\r\n     */\r\n    static saveBase64Data(expID, filename, data) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!expID || !filename || !data) {\r\n                throw new Error(\"Missing required parameter(s).\");\r\n            }\r\n            let response;\r\n            try {\r\n                response = yield fetch(\"https://pipe.jspsych.org/api/base64/\", {\r\n                    method: \"POST\",\r\n                    headers: {\r\n                        \"Content-Type\": \"application/json\",\r\n                        Accept: \"*/*\",\r\n                    },\r\n                    body: JSON.stringify({\r\n                        experimentID: expID,\r\n                        filename: filename,\r\n                        data: data,\r\n                    }),\r\n                });\r\n            }\r\n            catch (error) {\r\n                return error;\r\n            }\r\n            return yield response.json();\r\n        });\r\n    }\r\n    /**\r\n     * Get the condition assignment for the current participant using pipe.jspsych.org.\r\n     *\r\n     * @param expID The 12-character experiment ID provided by pipe.jspsych.org.\r\n     * @returns The condition assignment as an integer.\r\n     */\r\n    static getCondition(expID) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!expID) {\r\n                throw new Error(\"Missing required parameter(s).\");\r\n            }\r\n            let response;\r\n            try {\r\n                response = yield fetch(\"https://pipe.jspsych.org/api/condition/\", {\r\n                    method: \"POST\",\r\n                    headers: {\r\n                        \"Content-Type\": \"application/json\",\r\n                        Accept: \"*/*\",\r\n                    },\r\n                    body: JSON.stringify({\r\n                        experimentID: expID,\r\n                    }),\r\n                });\r\n            }\r\n            catch (error) {\r\n                return error;\r\n            }\r\n            const result = yield response.json();\r\n            return result.condition;\r\n        });\r\n    }\r\n}\r\nPipePlugin.info = info;\n\nexport { PipePlugin as default };\n//# sourceMappingURL=index.js.map\n","\n/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */\nfunction isNothing(subject) {\n  return (typeof subject === 'undefined') || (subject === null);\n}\n\n\nfunction isObject(subject) {\n  return (typeof subject === 'object') && (subject !== null);\n}\n\n\nfunction toArray(sequence) {\n  if (Array.isArray(sequence)) return sequence;\n  else if (isNothing(sequence)) return [];\n\n  return [ sequence ];\n}\n\n\nfunction extend(target, source) {\n  var index, length, key, sourceKeys;\n\n  if (source) {\n    sourceKeys = Object.keys(source);\n\n    for (index = 0, length = sourceKeys.length; index < length; index += 1) {\n      key = sourceKeys[index];\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\n\nfunction repeat(string, count) {\n  var result = '', cycle;\n\n  for (cycle = 0; cycle < count; cycle += 1) {\n    result += string;\n  }\n\n  return result;\n}\n\n\nfunction isNegativeZero(number) {\n  return (number === 0) && (Number.NEGATIVE_INFINITY === 1 / number);\n}\n\n\nvar isNothing_1      = isNothing;\nvar isObject_1       = isObject;\nvar toArray_1        = toArray;\nvar repeat_1         = repeat;\nvar isNegativeZero_1 = isNegativeZero;\nvar extend_1         = extend;\n\nvar common = {\n\tisNothing: isNothing_1,\n\tisObject: isObject_1,\n\ttoArray: toArray_1,\n\trepeat: repeat_1,\n\tisNegativeZero: isNegativeZero_1,\n\textend: extend_1\n};\n\n// YAML error class. http://stackoverflow.com/questions/8458984\n\n\nfunction formatError(exception, compact) {\n  var where = '', message = exception.reason || '(unknown reason)';\n\n  if (!exception.mark) return message;\n\n  if (exception.mark.name) {\n    where += 'in \"' + exception.mark.name + '\" ';\n  }\n\n  where += '(' + (exception.mark.line + 1) + ':' + (exception.mark.column + 1) + ')';\n\n  if (!compact && exception.mark.snippet) {\n    where += '\\n\\n' + exception.mark.snippet;\n  }\n\n  return message + ' ' + where;\n}\n\n\nfunction YAMLException$1(reason, mark) {\n  // Super constructor\n  Error.call(this);\n\n  this.name = 'YAMLException';\n  this.reason = reason;\n  this.mark = mark;\n  this.message = formatError(this, false);\n\n  // Include stack trace in error object\n  if (Error.captureStackTrace) {\n    // Chrome and NodeJS\n    Error.captureStackTrace(this, this.constructor);\n  } else {\n    // FF, IE 10+ and Safari 6+. Fallback for others\n    this.stack = (new Error()).stack || '';\n  }\n}\n\n\n// Inherit from Error\nYAMLException$1.prototype = Object.create(Error.prototype);\nYAMLException$1.prototype.constructor = YAMLException$1;\n\n\nYAMLException$1.prototype.toString = function toString(compact) {\n  return this.name + ': ' + formatError(this, compact);\n};\n\n\nvar exception = YAMLException$1;\n\n// get snippet for a single line, respecting maxLength\nfunction getLine(buffer, lineStart, lineEnd, position, maxLineLength) {\n  var head = '';\n  var tail = '';\n  var maxHalfLength = Math.floor(maxLineLength / 2) - 1;\n\n  if (position - lineStart > maxHalfLength) {\n    head = ' ... ';\n    lineStart = position - maxHalfLength + head.length;\n  }\n\n  if (lineEnd - position > maxHalfLength) {\n    tail = ' ...';\n    lineEnd = position + maxHalfLength - tail.length;\n  }\n\n  return {\n    str: head + buffer.slice(lineStart, lineEnd).replace(/\\t/g, '→') + tail,\n    pos: position - lineStart + head.length // relative position\n  };\n}\n\n\nfunction padStart(string, max) {\n  return common.repeat(' ', max - string.length) + string;\n}\n\n\nfunction makeSnippet(mark, options) {\n  options = Object.create(options || null);\n\n  if (!mark.buffer) return null;\n\n  if (!options.maxLength) options.maxLength = 79;\n  if (typeof options.indent      !== 'number') options.indent      = 1;\n  if (typeof options.linesBefore !== 'number') options.linesBefore = 3;\n  if (typeof options.linesAfter  !== 'number') options.linesAfter  = 2;\n\n  var re = /\\r?\\n|\\r|\\0/g;\n  var lineStarts = [ 0 ];\n  var lineEnds = [];\n  var match;\n  var foundLineNo = -1;\n\n  while ((match = re.exec(mark.buffer))) {\n    lineEnds.push(match.index);\n    lineStarts.push(match.index + match[0].length);\n\n    if (mark.position <= match.index && foundLineNo < 0) {\n      foundLineNo = lineStarts.length - 2;\n    }\n  }\n\n  if (foundLineNo < 0) foundLineNo = lineStarts.length - 1;\n\n  var result = '', i, line;\n  var lineNoLength = Math.min(mark.line + options.linesAfter, lineEnds.length).toString().length;\n  var maxLineLength = options.maxLength - (options.indent + lineNoLength + 3);\n\n  for (i = 1; i <= options.linesBefore; i++) {\n    if (foundLineNo - i < 0) break;\n    line = getLine(\n      mark.buffer,\n      lineStarts[foundLineNo - i],\n      lineEnds[foundLineNo - i],\n      mark.position - (lineStarts[foundLineNo] - lineStarts[foundLineNo - i]),\n      maxLineLength\n    );\n    result = common.repeat(' ', options.indent) + padStart((mark.line - i + 1).toString(), lineNoLength) +\n      ' | ' + line.str + '\\n' + result;\n  }\n\n  line = getLine(mark.buffer, lineStarts[foundLineNo], lineEnds[foundLineNo], mark.position, maxLineLength);\n  result += common.repeat(' ', options.indent) + padStart((mark.line + 1).toString(), lineNoLength) +\n    ' | ' + line.str + '\\n';\n  result += common.repeat('-', options.indent + lineNoLength + 3 + line.pos) + '^' + '\\n';\n\n  for (i = 1; i <= options.linesAfter; i++) {\n    if (foundLineNo + i >= lineEnds.length) break;\n    line = getLine(\n      mark.buffer,\n      lineStarts[foundLineNo + i],\n      lineEnds[foundLineNo + i],\n      mark.position - (lineStarts[foundLineNo] - lineStarts[foundLineNo + i]),\n      maxLineLength\n    );\n    result += common.repeat(' ', options.indent) + padStart((mark.line + i + 1).toString(), lineNoLength) +\n      ' | ' + line.str + '\\n';\n  }\n\n  return result.replace(/\\n$/, '');\n}\n\n\nvar snippet = makeSnippet;\n\nvar TYPE_CONSTRUCTOR_OPTIONS = [\n  'kind',\n  'multi',\n  'resolve',\n  'construct',\n  'instanceOf',\n  'predicate',\n  'represent',\n  'representName',\n  'defaultStyle',\n  'styleAliases'\n];\n\nvar YAML_NODE_KINDS = [\n  'scalar',\n  'sequence',\n  'mapping'\n];\n\nfunction compileStyleAliases(map) {\n  var result = {};\n\n  if (map !== null) {\n    Object.keys(map).forEach(function (style) {\n      map[style].forEach(function (alias) {\n        result[String(alias)] = style;\n      });\n    });\n  }\n\n  return result;\n}\n\nfunction Type$1(tag, options) {\n  options = options || {};\n\n  Object.keys(options).forEach(function (name) {\n    if (TYPE_CONSTRUCTOR_OPTIONS.indexOf(name) === -1) {\n      throw new exception('Unknown option \"' + name + '\" is met in definition of \"' + tag + '\" YAML type.');\n    }\n  });\n\n  // TODO: Add tag format check.\n  this.options       = options; // keep original options in case user wants to extend this type later\n  this.tag           = tag;\n  this.kind          = options['kind']          || null;\n  this.resolve       = options['resolve']       || function () { return true; };\n  this.construct     = options['construct']     || function (data) { return data; };\n  this.instanceOf    = options['instanceOf']    || null;\n  this.predicate     = options['predicate']     || null;\n  this.represent     = options['represent']     || null;\n  this.representName = options['representName'] || null;\n  this.defaultStyle  = options['defaultStyle']  || null;\n  this.multi         = options['multi']         || false;\n  this.styleAliases  = compileStyleAliases(options['styleAliases'] || null);\n\n  if (YAML_NODE_KINDS.indexOf(this.kind) === -1) {\n    throw new exception('Unknown kind \"' + this.kind + '\" is specified for \"' + tag + '\" YAML type.');\n  }\n}\n\nvar type = Type$1;\n\n/*eslint-disable max-len*/\n\n\n\n\n\nfunction compileList(schema, name) {\n  var result = [];\n\n  schema[name].forEach(function (currentType) {\n    var newIndex = result.length;\n\n    result.forEach(function (previousType, previousIndex) {\n      if (previousType.tag === currentType.tag &&\n          previousType.kind === currentType.kind &&\n          previousType.multi === currentType.multi) {\n\n        newIndex = previousIndex;\n      }\n    });\n\n    result[newIndex] = currentType;\n  });\n\n  return result;\n}\n\n\nfunction compileMap(/* lists... */) {\n  var result = {\n        scalar: {},\n        sequence: {},\n        mapping: {},\n        fallback: {},\n        multi: {\n          scalar: [],\n          sequence: [],\n          mapping: [],\n          fallback: []\n        }\n      }, index, length;\n\n  function collectType(type) {\n    if (type.multi) {\n      result.multi[type.kind].push(type);\n      result.multi['fallback'].push(type);\n    } else {\n      result[type.kind][type.tag] = result['fallback'][type.tag] = type;\n    }\n  }\n\n  for (index = 0, length = arguments.length; index < length; index += 1) {\n    arguments[index].forEach(collectType);\n  }\n  return result;\n}\n\n\nfunction Schema$1(definition) {\n  return this.extend(definition);\n}\n\n\nSchema$1.prototype.extend = function extend(definition) {\n  var implicit = [];\n  var explicit = [];\n\n  if (definition instanceof type) {\n    // Schema.extend(type)\n    explicit.push(definition);\n\n  } else if (Array.isArray(definition)) {\n    // Schema.extend([ type1, type2, ... ])\n    explicit = explicit.concat(definition);\n\n  } else if (definition && (Array.isArray(definition.implicit) || Array.isArray(definition.explicit))) {\n    // Schema.extend({ explicit: [ type1, type2, ... ], implicit: [ type1, type2, ... ] })\n    if (definition.implicit) implicit = implicit.concat(definition.implicit);\n    if (definition.explicit) explicit = explicit.concat(definition.explicit);\n\n  } else {\n    throw new exception('Schema.extend argument should be a Type, [ Type ], ' +\n      'or a schema definition ({ implicit: [...], explicit: [...] })');\n  }\n\n  implicit.forEach(function (type$1) {\n    if (!(type$1 instanceof type)) {\n      throw new exception('Specified list of YAML types (or a single Type object) contains a non-Type object.');\n    }\n\n    if (type$1.loadKind && type$1.loadKind !== 'scalar') {\n      throw new exception('There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.');\n    }\n\n    if (type$1.multi) {\n      throw new exception('There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.');\n    }\n  });\n\n  explicit.forEach(function (type$1) {\n    if (!(type$1 instanceof type)) {\n      throw new exception('Specified list of YAML types (or a single Type object) contains a non-Type object.');\n    }\n  });\n\n  var result = Object.create(Schema$1.prototype);\n\n  result.implicit = (this.implicit || []).concat(implicit);\n  result.explicit = (this.explicit || []).concat(explicit);\n\n  result.compiledImplicit = compileList(result, 'implicit');\n  result.compiledExplicit = compileList(result, 'explicit');\n  result.compiledTypeMap  = compileMap(result.compiledImplicit, result.compiledExplicit);\n\n  return result;\n};\n\n\nvar schema = Schema$1;\n\nvar str = new type('tag:yaml.org,2002:str', {\n  kind: 'scalar',\n  construct: function (data) { return data !== null ? data : ''; }\n});\n\nvar seq = new type('tag:yaml.org,2002:seq', {\n  kind: 'sequence',\n  construct: function (data) { return data !== null ? data : []; }\n});\n\nvar map = new type('tag:yaml.org,2002:map', {\n  kind: 'mapping',\n  construct: function (data) { return data !== null ? data : {}; }\n});\n\nvar failsafe = new schema({\n  explicit: [\n    str,\n    seq,\n    map\n  ]\n});\n\nfunction resolveYamlNull(data) {\n  if (data === null) return true;\n\n  var max = data.length;\n\n  return (max === 1 && data === '~') ||\n         (max === 4 && (data === 'null' || data === 'Null' || data === 'NULL'));\n}\n\nfunction constructYamlNull() {\n  return null;\n}\n\nfunction isNull(object) {\n  return object === null;\n}\n\nvar _null = new type('tag:yaml.org,2002:null', {\n  kind: 'scalar',\n  resolve: resolveYamlNull,\n  construct: constructYamlNull,\n  predicate: isNull,\n  represent: {\n    canonical: function () { return '~';    },\n    lowercase: function () { return 'null'; },\n    uppercase: function () { return 'NULL'; },\n    camelcase: function () { return 'Null'; },\n    empty:     function () { return '';     }\n  },\n  defaultStyle: 'lowercase'\n});\n\nfunction resolveYamlBoolean(data) {\n  if (data === null) return false;\n\n  var max = data.length;\n\n  return (max === 4 && (data === 'true' || data === 'True' || data === 'TRUE')) ||\n         (max === 5 && (data === 'false' || data === 'False' || data === 'FALSE'));\n}\n\nfunction constructYamlBoolean(data) {\n  return data === 'true' ||\n         data === 'True' ||\n         data === 'TRUE';\n}\n\nfunction isBoolean(object) {\n  return Object.prototype.toString.call(object) === '[object Boolean]';\n}\n\nvar bool = new type('tag:yaml.org,2002:bool', {\n  kind: 'scalar',\n  resolve: resolveYamlBoolean,\n  construct: constructYamlBoolean,\n  predicate: isBoolean,\n  represent: {\n    lowercase: function (object) { return object ? 'true' : 'false'; },\n    uppercase: function (object) { return object ? 'TRUE' : 'FALSE'; },\n    camelcase: function (object) { return object ? 'True' : 'False'; }\n  },\n  defaultStyle: 'lowercase'\n});\n\nfunction isHexCode(c) {\n  return ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */)) ||\n         ((0x41/* A */ <= c) && (c <= 0x46/* F */)) ||\n         ((0x61/* a */ <= c) && (c <= 0x66/* f */));\n}\n\nfunction isOctCode(c) {\n  return ((0x30/* 0 */ <= c) && (c <= 0x37/* 7 */));\n}\n\nfunction isDecCode(c) {\n  return ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */));\n}\n\nfunction resolveYamlInteger(data) {\n  if (data === null) return false;\n\n  var max = data.length,\n      index = 0,\n      hasDigits = false,\n      ch;\n\n  if (!max) return false;\n\n  ch = data[index];\n\n  // sign\n  if (ch === '-' || ch === '+') {\n    ch = data[++index];\n  }\n\n  if (ch === '0') {\n    // 0\n    if (index + 1 === max) return true;\n    ch = data[++index];\n\n    // base 2, base 8, base 16\n\n    if (ch === 'b') {\n      // base 2\n      index++;\n\n      for (; index < max; index++) {\n        ch = data[index];\n        if (ch === '_') continue;\n        if (ch !== '0' && ch !== '1') return false;\n        hasDigits = true;\n      }\n      return hasDigits && ch !== '_';\n    }\n\n\n    if (ch === 'x') {\n      // base 16\n      index++;\n\n      for (; index < max; index++) {\n        ch = data[index];\n        if (ch === '_') continue;\n        if (!isHexCode(data.charCodeAt(index))) return false;\n        hasDigits = true;\n      }\n      return hasDigits && ch !== '_';\n    }\n\n\n    if (ch === 'o') {\n      // base 8\n      index++;\n\n      for (; index < max; index++) {\n        ch = data[index];\n        if (ch === '_') continue;\n        if (!isOctCode(data.charCodeAt(index))) return false;\n        hasDigits = true;\n      }\n      return hasDigits && ch !== '_';\n    }\n  }\n\n  // base 10 (except 0)\n\n  // value should not start with `_`;\n  if (ch === '_') return false;\n\n  for (; index < max; index++) {\n    ch = data[index];\n    if (ch === '_') continue;\n    if (!isDecCode(data.charCodeAt(index))) {\n      return false;\n    }\n    hasDigits = true;\n  }\n\n  // Should have digits and should not end with `_`\n  if (!hasDigits || ch === '_') return false;\n\n  return true;\n}\n\nfunction constructYamlInteger(data) {\n  var value = data, sign = 1, ch;\n\n  if (value.indexOf('_') !== -1) {\n    value = value.replace(/_/g, '');\n  }\n\n  ch = value[0];\n\n  if (ch === '-' || ch === '+') {\n    if (ch === '-') sign = -1;\n    value = value.slice(1);\n    ch = value[0];\n  }\n\n  if (value === '0') return 0;\n\n  if (ch === '0') {\n    if (value[1] === 'b') return sign * parseInt(value.slice(2), 2);\n    if (value[1] === 'x') return sign * parseInt(value.slice(2), 16);\n    if (value[1] === 'o') return sign * parseInt(value.slice(2), 8);\n  }\n\n  return sign * parseInt(value, 10);\n}\n\nfunction isInteger(object) {\n  return (Object.prototype.toString.call(object)) === '[object Number]' &&\n         (object % 1 === 0 && !common.isNegativeZero(object));\n}\n\nvar int = new type('tag:yaml.org,2002:int', {\n  kind: 'scalar',\n  resolve: resolveYamlInteger,\n  construct: constructYamlInteger,\n  predicate: isInteger,\n  represent: {\n    binary:      function (obj) { return obj >= 0 ? '0b' + obj.toString(2) : '-0b' + obj.toString(2).slice(1); },\n    octal:       function (obj) { return obj >= 0 ? '0o'  + obj.toString(8) : '-0o'  + obj.toString(8).slice(1); },\n    decimal:     function (obj) { return obj.toString(10); },\n    /* eslint-disable max-len */\n    hexadecimal: function (obj) { return obj >= 0 ? '0x' + obj.toString(16).toUpperCase() :  '-0x' + obj.toString(16).toUpperCase().slice(1); }\n  },\n  defaultStyle: 'decimal',\n  styleAliases: {\n    binary:      [ 2,  'bin' ],\n    octal:       [ 8,  'oct' ],\n    decimal:     [ 10, 'dec' ],\n    hexadecimal: [ 16, 'hex' ]\n  }\n});\n\nvar YAML_FLOAT_PATTERN = new RegExp(\n  // 2.5e4, 2.5 and integers\n  '^(?:[-+]?(?:[0-9][0-9_]*)(?:\\\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?' +\n  // .2e4, .2\n  // special case, seems not from spec\n  '|\\\\.[0-9_]+(?:[eE][-+]?[0-9]+)?' +\n  // .inf\n  '|[-+]?\\\\.(?:inf|Inf|INF)' +\n  // .nan\n  '|\\\\.(?:nan|NaN|NAN))$');\n\nfunction resolveYamlFloat(data) {\n  if (data === null) return false;\n\n  if (!YAML_FLOAT_PATTERN.test(data) ||\n      // Quick hack to not allow integers end with `_`\n      // Probably should update regexp & check speed\n      data[data.length - 1] === '_') {\n    return false;\n  }\n\n  return true;\n}\n\nfunction constructYamlFloat(data) {\n  var value, sign;\n\n  value  = data.replace(/_/g, '').toLowerCase();\n  sign   = value[0] === '-' ? -1 : 1;\n\n  if ('+-'.indexOf(value[0]) >= 0) {\n    value = value.slice(1);\n  }\n\n  if (value === '.inf') {\n    return (sign === 1) ? Number.POSITIVE_INFINITY : Number.NEGATIVE_INFINITY;\n\n  } else if (value === '.nan') {\n    return NaN;\n  }\n  return sign * parseFloat(value, 10);\n}\n\n\nvar SCIENTIFIC_WITHOUT_DOT = /^[-+]?[0-9]+e/;\n\nfunction representYamlFloat(object, style) {\n  var res;\n\n  if (isNaN(object)) {\n    switch (style) {\n      case 'lowercase': return '.nan';\n      case 'uppercase': return '.NAN';\n      case 'camelcase': return '.NaN';\n    }\n  } else if (Number.POSITIVE_INFINITY === object) {\n    switch (style) {\n      case 'lowercase': return '.inf';\n      case 'uppercase': return '.INF';\n      case 'camelcase': return '.Inf';\n    }\n  } else if (Number.NEGATIVE_INFINITY === object) {\n    switch (style) {\n      case 'lowercase': return '-.inf';\n      case 'uppercase': return '-.INF';\n      case 'camelcase': return '-.Inf';\n    }\n  } else if (common.isNegativeZero(object)) {\n    return '-0.0';\n  }\n\n  res = object.toString(10);\n\n  // JS stringifier can build scientific format without dots: 5e-100,\n  // while YAML requres dot: 5.e-100. Fix it with simple hack\n\n  return SCIENTIFIC_WITHOUT_DOT.test(res) ? res.replace('e', '.e') : res;\n}\n\nfunction isFloat(object) {\n  return (Object.prototype.toString.call(object) === '[object Number]') &&\n         (object % 1 !== 0 || common.isNegativeZero(object));\n}\n\nvar float = new type('tag:yaml.org,2002:float', {\n  kind: 'scalar',\n  resolve: resolveYamlFloat,\n  construct: constructYamlFloat,\n  predicate: isFloat,\n  represent: representYamlFloat,\n  defaultStyle: 'lowercase'\n});\n\nvar json = failsafe.extend({\n  implicit: [\n    _null,\n    bool,\n    int,\n    float\n  ]\n});\n\nvar core = json;\n\nvar YAML_DATE_REGEXP = new RegExp(\n  '^([0-9][0-9][0-9][0-9])'          + // [1] year\n  '-([0-9][0-9])'                    + // [2] month\n  '-([0-9][0-9])$');                   // [3] day\n\nvar YAML_TIMESTAMP_REGEXP = new RegExp(\n  '^([0-9][0-9][0-9][0-9])'          + // [1] year\n  '-([0-9][0-9]?)'                   + // [2] month\n  '-([0-9][0-9]?)'                   + // [3] day\n  '(?:[Tt]|[ \\\\t]+)'                 + // ...\n  '([0-9][0-9]?)'                    + // [4] hour\n  ':([0-9][0-9])'                    + // [5] minute\n  ':([0-9][0-9])'                    + // [6] second\n  '(?:\\\\.([0-9]*))?'                 + // [7] fraction\n  '(?:[ \\\\t]*(Z|([-+])([0-9][0-9]?)' + // [8] tz [9] tz_sign [10] tz_hour\n  '(?::([0-9][0-9]))?))?$');           // [11] tz_minute\n\nfunction resolveYamlTimestamp(data) {\n  if (data === null) return false;\n  if (YAML_DATE_REGEXP.exec(data) !== null) return true;\n  if (YAML_TIMESTAMP_REGEXP.exec(data) !== null) return true;\n  return false;\n}\n\nfunction constructYamlTimestamp(data) {\n  var match, year, month, day, hour, minute, second, fraction = 0,\n      delta = null, tz_hour, tz_minute, date;\n\n  match = YAML_DATE_REGEXP.exec(data);\n  if (match === null) match = YAML_TIMESTAMP_REGEXP.exec(data);\n\n  if (match === null) throw new Error('Date resolve error');\n\n  // match: [1] year [2] month [3] day\n\n  year = +(match[1]);\n  month = +(match[2]) - 1; // JS month starts with 0\n  day = +(match[3]);\n\n  if (!match[4]) { // no hour\n    return new Date(Date.UTC(year, month, day));\n  }\n\n  // match: [4] hour [5] minute [6] second [7] fraction\n\n  hour = +(match[4]);\n  minute = +(match[5]);\n  second = +(match[6]);\n\n  if (match[7]) {\n    fraction = match[7].slice(0, 3);\n    while (fraction.length < 3) { // milli-seconds\n      fraction += '0';\n    }\n    fraction = +fraction;\n  }\n\n  // match: [8] tz [9] tz_sign [10] tz_hour [11] tz_minute\n\n  if (match[9]) {\n    tz_hour = +(match[10]);\n    tz_minute = +(match[11] || 0);\n    delta = (tz_hour * 60 + tz_minute) * 60000; // delta in mili-seconds\n    if (match[9] === '-') delta = -delta;\n  }\n\n  date = new Date(Date.UTC(year, month, day, hour, minute, second, fraction));\n\n  if (delta) date.setTime(date.getTime() - delta);\n\n  return date;\n}\n\nfunction representYamlTimestamp(object /*, style*/) {\n  return object.toISOString();\n}\n\nvar timestamp = new type('tag:yaml.org,2002:timestamp', {\n  kind: 'scalar',\n  resolve: resolveYamlTimestamp,\n  construct: constructYamlTimestamp,\n  instanceOf: Date,\n  represent: representYamlTimestamp\n});\n\nfunction resolveYamlMerge(data) {\n  return data === '<<' || data === null;\n}\n\nvar merge = new type('tag:yaml.org,2002:merge', {\n  kind: 'scalar',\n  resolve: resolveYamlMerge\n});\n\n/*eslint-disable no-bitwise*/\n\n\n\n\n\n// [ 64, 65, 66 ] -> [ padding, CR, LF ]\nvar BASE64_MAP = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\\n\\r';\n\n\nfunction resolveYamlBinary(data) {\n  if (data === null) return false;\n\n  var code, idx, bitlen = 0, max = data.length, map = BASE64_MAP;\n\n  // Convert one by one.\n  for (idx = 0; idx < max; idx++) {\n    code = map.indexOf(data.charAt(idx));\n\n    // Skip CR/LF\n    if (code > 64) continue;\n\n    // Fail on illegal characters\n    if (code < 0) return false;\n\n    bitlen += 6;\n  }\n\n  // If there are any bits left, source was corrupted\n  return (bitlen % 8) === 0;\n}\n\nfunction constructYamlBinary(data) {\n  var idx, tailbits,\n      input = data.replace(/[\\r\\n=]/g, ''), // remove CR/LF & padding to simplify scan\n      max = input.length,\n      map = BASE64_MAP,\n      bits = 0,\n      result = [];\n\n  // Collect by 6*4 bits (3 bytes)\n\n  for (idx = 0; idx < max; idx++) {\n    if ((idx % 4 === 0) && idx) {\n      result.push((bits >> 16) & 0xFF);\n      result.push((bits >> 8) & 0xFF);\n      result.push(bits & 0xFF);\n    }\n\n    bits = (bits << 6) | map.indexOf(input.charAt(idx));\n  }\n\n  // Dump tail\n\n  tailbits = (max % 4) * 6;\n\n  if (tailbits === 0) {\n    result.push((bits >> 16) & 0xFF);\n    result.push((bits >> 8) & 0xFF);\n    result.push(bits & 0xFF);\n  } else if (tailbits === 18) {\n    result.push((bits >> 10) & 0xFF);\n    result.push((bits >> 2) & 0xFF);\n  } else if (tailbits === 12) {\n    result.push((bits >> 4) & 0xFF);\n  }\n\n  return new Uint8Array(result);\n}\n\nfunction representYamlBinary(object /*, style*/) {\n  var result = '', bits = 0, idx, tail,\n      max = object.length,\n      map = BASE64_MAP;\n\n  // Convert every three bytes to 4 ASCII characters.\n\n  for (idx = 0; idx < max; idx++) {\n    if ((idx % 3 === 0) && idx) {\n      result += map[(bits >> 18) & 0x3F];\n      result += map[(bits >> 12) & 0x3F];\n      result += map[(bits >> 6) & 0x3F];\n      result += map[bits & 0x3F];\n    }\n\n    bits = (bits << 8) + object[idx];\n  }\n\n  // Dump tail\n\n  tail = max % 3;\n\n  if (tail === 0) {\n    result += map[(bits >> 18) & 0x3F];\n    result += map[(bits >> 12) & 0x3F];\n    result += map[(bits >> 6) & 0x3F];\n    result += map[bits & 0x3F];\n  } else if (tail === 2) {\n    result += map[(bits >> 10) & 0x3F];\n    result += map[(bits >> 4) & 0x3F];\n    result += map[(bits << 2) & 0x3F];\n    result += map[64];\n  } else if (tail === 1) {\n    result += map[(bits >> 2) & 0x3F];\n    result += map[(bits << 4) & 0x3F];\n    result += map[64];\n    result += map[64];\n  }\n\n  return result;\n}\n\nfunction isBinary(obj) {\n  return Object.prototype.toString.call(obj) ===  '[object Uint8Array]';\n}\n\nvar binary = new type('tag:yaml.org,2002:binary', {\n  kind: 'scalar',\n  resolve: resolveYamlBinary,\n  construct: constructYamlBinary,\n  predicate: isBinary,\n  represent: representYamlBinary\n});\n\nvar _hasOwnProperty$3 = Object.prototype.hasOwnProperty;\nvar _toString$2       = Object.prototype.toString;\n\nfunction resolveYamlOmap(data) {\n  if (data === null) return true;\n\n  var objectKeys = [], index, length, pair, pairKey, pairHasKey,\n      object = data;\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    pair = object[index];\n    pairHasKey = false;\n\n    if (_toString$2.call(pair) !== '[object Object]') return false;\n\n    for (pairKey in pair) {\n      if (_hasOwnProperty$3.call(pair, pairKey)) {\n        if (!pairHasKey) pairHasKey = true;\n        else return false;\n      }\n    }\n\n    if (!pairHasKey) return false;\n\n    if (objectKeys.indexOf(pairKey) === -1) objectKeys.push(pairKey);\n    else return false;\n  }\n\n  return true;\n}\n\nfunction constructYamlOmap(data) {\n  return data !== null ? data : [];\n}\n\nvar omap = new type('tag:yaml.org,2002:omap', {\n  kind: 'sequence',\n  resolve: resolveYamlOmap,\n  construct: constructYamlOmap\n});\n\nvar _toString$1 = Object.prototype.toString;\n\nfunction resolveYamlPairs(data) {\n  if (data === null) return true;\n\n  var index, length, pair, keys, result,\n      object = data;\n\n  result = new Array(object.length);\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    pair = object[index];\n\n    if (_toString$1.call(pair) !== '[object Object]') return false;\n\n    keys = Object.keys(pair);\n\n    if (keys.length !== 1) return false;\n\n    result[index] = [ keys[0], pair[keys[0]] ];\n  }\n\n  return true;\n}\n\nfunction constructYamlPairs(data) {\n  if (data === null) return [];\n\n  var index, length, pair, keys, result,\n      object = data;\n\n  result = new Array(object.length);\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    pair = object[index];\n\n    keys = Object.keys(pair);\n\n    result[index] = [ keys[0], pair[keys[0]] ];\n  }\n\n  return result;\n}\n\nvar pairs = new type('tag:yaml.org,2002:pairs', {\n  kind: 'sequence',\n  resolve: resolveYamlPairs,\n  construct: constructYamlPairs\n});\n\nvar _hasOwnProperty$2 = Object.prototype.hasOwnProperty;\n\nfunction resolveYamlSet(data) {\n  if (data === null) return true;\n\n  var key, object = data;\n\n  for (key in object) {\n    if (_hasOwnProperty$2.call(object, key)) {\n      if (object[key] !== null) return false;\n    }\n  }\n\n  return true;\n}\n\nfunction constructYamlSet(data) {\n  return data !== null ? data : {};\n}\n\nvar set = new type('tag:yaml.org,2002:set', {\n  kind: 'mapping',\n  resolve: resolveYamlSet,\n  construct: constructYamlSet\n});\n\nvar _default = core.extend({\n  implicit: [\n    timestamp,\n    merge\n  ],\n  explicit: [\n    binary,\n    omap,\n    pairs,\n    set\n  ]\n});\n\n/*eslint-disable max-len,no-use-before-define*/\n\n\n\n\n\n\n\nvar _hasOwnProperty$1 = Object.prototype.hasOwnProperty;\n\n\nvar CONTEXT_FLOW_IN   = 1;\nvar CONTEXT_FLOW_OUT  = 2;\nvar CONTEXT_BLOCK_IN  = 3;\nvar CONTEXT_BLOCK_OUT = 4;\n\n\nvar CHOMPING_CLIP  = 1;\nvar CHOMPING_STRIP = 2;\nvar CHOMPING_KEEP  = 3;\n\n\nvar PATTERN_NON_PRINTABLE         = /[\\x00-\\x08\\x0B\\x0C\\x0E-\\x1F\\x7F-\\x84\\x86-\\x9F\\uFFFE\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/;\nvar PATTERN_NON_ASCII_LINE_BREAKS = /[\\x85\\u2028\\u2029]/;\nvar PATTERN_FLOW_INDICATORS       = /[,\\[\\]\\{\\}]/;\nvar PATTERN_TAG_HANDLE            = /^(?:!|!!|![a-z\\-]+!)$/i;\nvar PATTERN_TAG_URI               = /^(?:!|[^,\\[\\]\\{\\}])(?:%[0-9a-f]{2}|[0-9a-z\\-#;\\/\\?:@&=\\+\\$,_\\.!~\\*'\\(\\)\\[\\]])*$/i;\n\n\nfunction _class(obj) { return Object.prototype.toString.call(obj); }\n\nfunction is_EOL(c) {\n  return (c === 0x0A/* LF */) || (c === 0x0D/* CR */);\n}\n\nfunction is_WHITE_SPACE(c) {\n  return (c === 0x09/* Tab */) || (c === 0x20/* Space */);\n}\n\nfunction is_WS_OR_EOL(c) {\n  return (c === 0x09/* Tab */) ||\n         (c === 0x20/* Space */) ||\n         (c === 0x0A/* LF */) ||\n         (c === 0x0D/* CR */);\n}\n\nfunction is_FLOW_INDICATOR(c) {\n  return c === 0x2C/* , */ ||\n         c === 0x5B/* [ */ ||\n         c === 0x5D/* ] */ ||\n         c === 0x7B/* { */ ||\n         c === 0x7D/* } */;\n}\n\nfunction fromHexCode(c) {\n  var lc;\n\n  if ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */)) {\n    return c - 0x30;\n  }\n\n  /*eslint-disable no-bitwise*/\n  lc = c | 0x20;\n\n  if ((0x61/* a */ <= lc) && (lc <= 0x66/* f */)) {\n    return lc - 0x61 + 10;\n  }\n\n  return -1;\n}\n\nfunction escapedHexLen(c) {\n  if (c === 0x78/* x */) { return 2; }\n  if (c === 0x75/* u */) { return 4; }\n  if (c === 0x55/* U */) { return 8; }\n  return 0;\n}\n\nfunction fromDecimalCode(c) {\n  if ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */)) {\n    return c - 0x30;\n  }\n\n  return -1;\n}\n\nfunction simpleEscapeSequence(c) {\n  /* eslint-disable indent */\n  return (c === 0x30/* 0 */) ? '\\x00' :\n        (c === 0x61/* a */) ? '\\x07' :\n        (c === 0x62/* b */) ? '\\x08' :\n        (c === 0x74/* t */) ? '\\x09' :\n        (c === 0x09/* Tab */) ? '\\x09' :\n        (c === 0x6E/* n */) ? '\\x0A' :\n        (c === 0x76/* v */) ? '\\x0B' :\n        (c === 0x66/* f */) ? '\\x0C' :\n        (c === 0x72/* r */) ? '\\x0D' :\n        (c === 0x65/* e */) ? '\\x1B' :\n        (c === 0x20/* Space */) ? ' ' :\n        (c === 0x22/* \" */) ? '\\x22' :\n        (c === 0x2F/* / */) ? '/' :\n        (c === 0x5C/* \\ */) ? '\\x5C' :\n        (c === 0x4E/* N */) ? '\\x85' :\n        (c === 0x5F/* _ */) ? '\\xA0' :\n        (c === 0x4C/* L */) ? '\\u2028' :\n        (c === 0x50/* P */) ? '\\u2029' : '';\n}\n\nfunction charFromCodepoint(c) {\n  if (c <= 0xFFFF) {\n    return String.fromCharCode(c);\n  }\n  // Encode UTF-16 surrogate pair\n  // https://en.wikipedia.org/wiki/UTF-16#Code_points_U.2B010000_to_U.2B10FFFF\n  return String.fromCharCode(\n    ((c - 0x010000) >> 10) + 0xD800,\n    ((c - 0x010000) & 0x03FF) + 0xDC00\n  );\n}\n\nvar simpleEscapeCheck = new Array(256); // integer, for fast access\nvar simpleEscapeMap = new Array(256);\nfor (var i = 0; i < 256; i++) {\n  simpleEscapeCheck[i] = simpleEscapeSequence(i) ? 1 : 0;\n  simpleEscapeMap[i] = simpleEscapeSequence(i);\n}\n\n\nfunction State$1(input, options) {\n  this.input = input;\n\n  this.filename  = options['filename']  || null;\n  this.schema    = options['schema']    || _default;\n  this.onWarning = options['onWarning'] || null;\n  // (Hidden) Remove? makes the loader to expect YAML 1.1 documents\n  // if such documents have no explicit %YAML directive\n  this.legacy    = options['legacy']    || false;\n\n  this.json      = options['json']      || false;\n  this.listener  = options['listener']  || null;\n\n  this.implicitTypes = this.schema.compiledImplicit;\n  this.typeMap       = this.schema.compiledTypeMap;\n\n  this.length     = input.length;\n  this.position   = 0;\n  this.line       = 0;\n  this.lineStart  = 0;\n  this.lineIndent = 0;\n\n  // position of first leading tab in the current line,\n  // used to make sure there are no tabs in the indentation\n  this.firstTabInLine = -1;\n\n  this.documents = [];\n\n  /*\n  this.version;\n  this.checkLineBreaks;\n  this.tagMap;\n  this.anchorMap;\n  this.tag;\n  this.anchor;\n  this.kind;\n  this.result;*/\n\n}\n\n\nfunction generateError(state, message) {\n  var mark = {\n    name:     state.filename,\n    buffer:   state.input.slice(0, -1), // omit trailing \\0\n    position: state.position,\n    line:     state.line,\n    column:   state.position - state.lineStart\n  };\n\n  mark.snippet = snippet(mark);\n\n  return new exception(message, mark);\n}\n\nfunction throwError(state, message) {\n  throw generateError(state, message);\n}\n\nfunction throwWarning(state, message) {\n  if (state.onWarning) {\n    state.onWarning.call(null, generateError(state, message));\n  }\n}\n\n\nvar directiveHandlers = {\n\n  YAML: function handleYamlDirective(state, name, args) {\n\n    var match, major, minor;\n\n    if (state.version !== null) {\n      throwError(state, 'duplication of %YAML directive');\n    }\n\n    if (args.length !== 1) {\n      throwError(state, 'YAML directive accepts exactly one argument');\n    }\n\n    match = /^([0-9]+)\\.([0-9]+)$/.exec(args[0]);\n\n    if (match === null) {\n      throwError(state, 'ill-formed argument of the YAML directive');\n    }\n\n    major = parseInt(match[1], 10);\n    minor = parseInt(match[2], 10);\n\n    if (major !== 1) {\n      throwError(state, 'unacceptable YAML version of the document');\n    }\n\n    state.version = args[0];\n    state.checkLineBreaks = (minor < 2);\n\n    if (minor !== 1 && minor !== 2) {\n      throwWarning(state, 'unsupported YAML version of the document');\n    }\n  },\n\n  TAG: function handleTagDirective(state, name, args) {\n\n    var handle, prefix;\n\n    if (args.length !== 2) {\n      throwError(state, 'TAG directive accepts exactly two arguments');\n    }\n\n    handle = args[0];\n    prefix = args[1];\n\n    if (!PATTERN_TAG_HANDLE.test(handle)) {\n      throwError(state, 'ill-formed tag handle (first argument) of the TAG directive');\n    }\n\n    if (_hasOwnProperty$1.call(state.tagMap, handle)) {\n      throwError(state, 'there is a previously declared suffix for \"' + handle + '\" tag handle');\n    }\n\n    if (!PATTERN_TAG_URI.test(prefix)) {\n      throwError(state, 'ill-formed tag prefix (second argument) of the TAG directive');\n    }\n\n    try {\n      prefix = decodeURIComponent(prefix);\n    } catch (err) {\n      throwError(state, 'tag prefix is malformed: ' + prefix);\n    }\n\n    state.tagMap[handle] = prefix;\n  }\n};\n\n\nfunction captureSegment(state, start, end, checkJson) {\n  var _position, _length, _character, _result;\n\n  if (start < end) {\n    _result = state.input.slice(start, end);\n\n    if (checkJson) {\n      for (_position = 0, _length = _result.length; _position < _length; _position += 1) {\n        _character = _result.charCodeAt(_position);\n        if (!(_character === 0x09 ||\n              (0x20 <= _character && _character <= 0x10FFFF))) {\n          throwError(state, 'expected valid JSON character');\n        }\n      }\n    } else if (PATTERN_NON_PRINTABLE.test(_result)) {\n      throwError(state, 'the stream contains non-printable characters');\n    }\n\n    state.result += _result;\n  }\n}\n\nfunction mergeMappings(state, destination, source, overridableKeys) {\n  var sourceKeys, key, index, quantity;\n\n  if (!common.isObject(source)) {\n    throwError(state, 'cannot merge mappings; the provided source object is unacceptable');\n  }\n\n  sourceKeys = Object.keys(source);\n\n  for (index = 0, quantity = sourceKeys.length; index < quantity; index += 1) {\n    key = sourceKeys[index];\n\n    if (!_hasOwnProperty$1.call(destination, key)) {\n      destination[key] = source[key];\n      overridableKeys[key] = true;\n    }\n  }\n}\n\nfunction storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode,\n  startLine, startLineStart, startPos) {\n\n  var index, quantity;\n\n  // The output is a plain object here, so keys can only be strings.\n  // We need to convert keyNode to a string, but doing so can hang the process\n  // (deeply nested arrays that explode exponentially using aliases).\n  if (Array.isArray(keyNode)) {\n    keyNode = Array.prototype.slice.call(keyNode);\n\n    for (index = 0, quantity = keyNode.length; index < quantity; index += 1) {\n      if (Array.isArray(keyNode[index])) {\n        throwError(state, 'nested arrays are not supported inside keys');\n      }\n\n      if (typeof keyNode === 'object' && _class(keyNode[index]) === '[object Object]') {\n        keyNode[index] = '[object Object]';\n      }\n    }\n  }\n\n  // Avoid code execution in load() via toString property\n  // (still use its own toString for arrays, timestamps,\n  // and whatever user schema extensions happen to have @@toStringTag)\n  if (typeof keyNode === 'object' && _class(keyNode) === '[object Object]') {\n    keyNode = '[object Object]';\n  }\n\n\n  keyNode = String(keyNode);\n\n  if (_result === null) {\n    _result = {};\n  }\n\n  if (keyTag === 'tag:yaml.org,2002:merge') {\n    if (Array.isArray(valueNode)) {\n      for (index = 0, quantity = valueNode.length; index < quantity; index += 1) {\n        mergeMappings(state, _result, valueNode[index], overridableKeys);\n      }\n    } else {\n      mergeMappings(state, _result, valueNode, overridableKeys);\n    }\n  } else {\n    if (!state.json &&\n        !_hasOwnProperty$1.call(overridableKeys, keyNode) &&\n        _hasOwnProperty$1.call(_result, keyNode)) {\n      state.line = startLine || state.line;\n      state.lineStart = startLineStart || state.lineStart;\n      state.position = startPos || state.position;\n      throwError(state, 'duplicated mapping key');\n    }\n\n    // used for this specific key only because Object.defineProperty is slow\n    if (keyNode === '__proto__') {\n      Object.defineProperty(_result, keyNode, {\n        configurable: true,\n        enumerable: true,\n        writable: true,\n        value: valueNode\n      });\n    } else {\n      _result[keyNode] = valueNode;\n    }\n    delete overridableKeys[keyNode];\n  }\n\n  return _result;\n}\n\nfunction readLineBreak(state) {\n  var ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch === 0x0A/* LF */) {\n    state.position++;\n  } else if (ch === 0x0D/* CR */) {\n    state.position++;\n    if (state.input.charCodeAt(state.position) === 0x0A/* LF */) {\n      state.position++;\n    }\n  } else {\n    throwError(state, 'a line break is expected');\n  }\n\n  state.line += 1;\n  state.lineStart = state.position;\n  state.firstTabInLine = -1;\n}\n\nfunction skipSeparationSpace(state, allowComments, checkIndent) {\n  var lineBreaks = 0,\n      ch = state.input.charCodeAt(state.position);\n\n  while (ch !== 0) {\n    while (is_WHITE_SPACE(ch)) {\n      if (ch === 0x09/* Tab */ && state.firstTabInLine === -1) {\n        state.firstTabInLine = state.position;\n      }\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    if (allowComments && ch === 0x23/* # */) {\n      do {\n        ch = state.input.charCodeAt(++state.position);\n      } while (ch !== 0x0A/* LF */ && ch !== 0x0D/* CR */ && ch !== 0);\n    }\n\n    if (is_EOL(ch)) {\n      readLineBreak(state);\n\n      ch = state.input.charCodeAt(state.position);\n      lineBreaks++;\n      state.lineIndent = 0;\n\n      while (ch === 0x20/* Space */) {\n        state.lineIndent++;\n        ch = state.input.charCodeAt(++state.position);\n      }\n    } else {\n      break;\n    }\n  }\n\n  if (checkIndent !== -1 && lineBreaks !== 0 && state.lineIndent < checkIndent) {\n    throwWarning(state, 'deficient indentation');\n  }\n\n  return lineBreaks;\n}\n\nfunction testDocumentSeparator(state) {\n  var _position = state.position,\n      ch;\n\n  ch = state.input.charCodeAt(_position);\n\n  // Condition state.position === state.lineStart is tested\n  // in parent on each call, for efficiency. No needs to test here again.\n  if ((ch === 0x2D/* - */ || ch === 0x2E/* . */) &&\n      ch === state.input.charCodeAt(_position + 1) &&\n      ch === state.input.charCodeAt(_position + 2)) {\n\n    _position += 3;\n\n    ch = state.input.charCodeAt(_position);\n\n    if (ch === 0 || is_WS_OR_EOL(ch)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction writeFoldedLines(state, count) {\n  if (count === 1) {\n    state.result += ' ';\n  } else if (count > 1) {\n    state.result += common.repeat('\\n', count - 1);\n  }\n}\n\n\nfunction readPlainScalar(state, nodeIndent, withinFlowCollection) {\n  var preceding,\n      following,\n      captureStart,\n      captureEnd,\n      hasPendingContent,\n      _line,\n      _lineStart,\n      _lineIndent,\n      _kind = state.kind,\n      _result = state.result,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (is_WS_OR_EOL(ch)      ||\n      is_FLOW_INDICATOR(ch) ||\n      ch === 0x23/* # */    ||\n      ch === 0x26/* & */    ||\n      ch === 0x2A/* * */    ||\n      ch === 0x21/* ! */    ||\n      ch === 0x7C/* | */    ||\n      ch === 0x3E/* > */    ||\n      ch === 0x27/* ' */    ||\n      ch === 0x22/* \" */    ||\n      ch === 0x25/* % */    ||\n      ch === 0x40/* @ */    ||\n      ch === 0x60/* ` */) {\n    return false;\n  }\n\n  if (ch === 0x3F/* ? */ || ch === 0x2D/* - */) {\n    following = state.input.charCodeAt(state.position + 1);\n\n    if (is_WS_OR_EOL(following) ||\n        withinFlowCollection && is_FLOW_INDICATOR(following)) {\n      return false;\n    }\n  }\n\n  state.kind = 'scalar';\n  state.result = '';\n  captureStart = captureEnd = state.position;\n  hasPendingContent = false;\n\n  while (ch !== 0) {\n    if (ch === 0x3A/* : */) {\n      following = state.input.charCodeAt(state.position + 1);\n\n      if (is_WS_OR_EOL(following) ||\n          withinFlowCollection && is_FLOW_INDICATOR(following)) {\n        break;\n      }\n\n    } else if (ch === 0x23/* # */) {\n      preceding = state.input.charCodeAt(state.position - 1);\n\n      if (is_WS_OR_EOL(preceding)) {\n        break;\n      }\n\n    } else if ((state.position === state.lineStart && testDocumentSeparator(state)) ||\n               withinFlowCollection && is_FLOW_INDICATOR(ch)) {\n      break;\n\n    } else if (is_EOL(ch)) {\n      _line = state.line;\n      _lineStart = state.lineStart;\n      _lineIndent = state.lineIndent;\n      skipSeparationSpace(state, false, -1);\n\n      if (state.lineIndent >= nodeIndent) {\n        hasPendingContent = true;\n        ch = state.input.charCodeAt(state.position);\n        continue;\n      } else {\n        state.position = captureEnd;\n        state.line = _line;\n        state.lineStart = _lineStart;\n        state.lineIndent = _lineIndent;\n        break;\n      }\n    }\n\n    if (hasPendingContent) {\n      captureSegment(state, captureStart, captureEnd, false);\n      writeFoldedLines(state, state.line - _line);\n      captureStart = captureEnd = state.position;\n      hasPendingContent = false;\n    }\n\n    if (!is_WHITE_SPACE(ch)) {\n      captureEnd = state.position + 1;\n    }\n\n    ch = state.input.charCodeAt(++state.position);\n  }\n\n  captureSegment(state, captureStart, captureEnd, false);\n\n  if (state.result) {\n    return true;\n  }\n\n  state.kind = _kind;\n  state.result = _result;\n  return false;\n}\n\nfunction readSingleQuotedScalar(state, nodeIndent) {\n  var ch,\n      captureStart, captureEnd;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x27/* ' */) {\n    return false;\n  }\n\n  state.kind = 'scalar';\n  state.result = '';\n  state.position++;\n  captureStart = captureEnd = state.position;\n\n  while ((ch = state.input.charCodeAt(state.position)) !== 0) {\n    if (ch === 0x27/* ' */) {\n      captureSegment(state, captureStart, state.position, true);\n      ch = state.input.charCodeAt(++state.position);\n\n      if (ch === 0x27/* ' */) {\n        captureStart = state.position;\n        state.position++;\n        captureEnd = state.position;\n      } else {\n        return true;\n      }\n\n    } else if (is_EOL(ch)) {\n      captureSegment(state, captureStart, captureEnd, true);\n      writeFoldedLines(state, skipSeparationSpace(state, false, nodeIndent));\n      captureStart = captureEnd = state.position;\n\n    } else if (state.position === state.lineStart && testDocumentSeparator(state)) {\n      throwError(state, 'unexpected end of the document within a single quoted scalar');\n\n    } else {\n      state.position++;\n      captureEnd = state.position;\n    }\n  }\n\n  throwError(state, 'unexpected end of the stream within a single quoted scalar');\n}\n\nfunction readDoubleQuotedScalar(state, nodeIndent) {\n  var captureStart,\n      captureEnd,\n      hexLength,\n      hexResult,\n      tmp,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x22/* \" */) {\n    return false;\n  }\n\n  state.kind = 'scalar';\n  state.result = '';\n  state.position++;\n  captureStart = captureEnd = state.position;\n\n  while ((ch = state.input.charCodeAt(state.position)) !== 0) {\n    if (ch === 0x22/* \" */) {\n      captureSegment(state, captureStart, state.position, true);\n      state.position++;\n      return true;\n\n    } else if (ch === 0x5C/* \\ */) {\n      captureSegment(state, captureStart, state.position, true);\n      ch = state.input.charCodeAt(++state.position);\n\n      if (is_EOL(ch)) {\n        skipSeparationSpace(state, false, nodeIndent);\n\n        // TODO: rework to inline fn with no type cast?\n      } else if (ch < 256 && simpleEscapeCheck[ch]) {\n        state.result += simpleEscapeMap[ch];\n        state.position++;\n\n      } else if ((tmp = escapedHexLen(ch)) > 0) {\n        hexLength = tmp;\n        hexResult = 0;\n\n        for (; hexLength > 0; hexLength--) {\n          ch = state.input.charCodeAt(++state.position);\n\n          if ((tmp = fromHexCode(ch)) >= 0) {\n            hexResult = (hexResult << 4) + tmp;\n\n          } else {\n            throwError(state, 'expected hexadecimal character');\n          }\n        }\n\n        state.result += charFromCodepoint(hexResult);\n\n        state.position++;\n\n      } else {\n        throwError(state, 'unknown escape sequence');\n      }\n\n      captureStart = captureEnd = state.position;\n\n    } else if (is_EOL(ch)) {\n      captureSegment(state, captureStart, captureEnd, true);\n      writeFoldedLines(state, skipSeparationSpace(state, false, nodeIndent));\n      captureStart = captureEnd = state.position;\n\n    } else if (state.position === state.lineStart && testDocumentSeparator(state)) {\n      throwError(state, 'unexpected end of the document within a double quoted scalar');\n\n    } else {\n      state.position++;\n      captureEnd = state.position;\n    }\n  }\n\n  throwError(state, 'unexpected end of the stream within a double quoted scalar');\n}\n\nfunction readFlowCollection(state, nodeIndent) {\n  var readNext = true,\n      _line,\n      _lineStart,\n      _pos,\n      _tag     = state.tag,\n      _result,\n      _anchor  = state.anchor,\n      following,\n      terminator,\n      isPair,\n      isExplicitPair,\n      isMapping,\n      overridableKeys = Object.create(null),\n      keyNode,\n      keyTag,\n      valueNode,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch === 0x5B/* [ */) {\n    terminator = 0x5D;/* ] */\n    isMapping = false;\n    _result = [];\n  } else if (ch === 0x7B/* { */) {\n    terminator = 0x7D;/* } */\n    isMapping = true;\n    _result = {};\n  } else {\n    return false;\n  }\n\n  if (state.anchor !== null) {\n    state.anchorMap[state.anchor] = _result;\n  }\n\n  ch = state.input.charCodeAt(++state.position);\n\n  while (ch !== 0) {\n    skipSeparationSpace(state, true, nodeIndent);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if (ch === terminator) {\n      state.position++;\n      state.tag = _tag;\n      state.anchor = _anchor;\n      state.kind = isMapping ? 'mapping' : 'sequence';\n      state.result = _result;\n      return true;\n    } else if (!readNext) {\n      throwError(state, 'missed comma between flow collection entries');\n    } else if (ch === 0x2C/* , */) {\n      // \"flow collection entries can never be completely empty\", as per YAML 1.2, section 7.4\n      throwError(state, \"expected the node content, but found ','\");\n    }\n\n    keyTag = keyNode = valueNode = null;\n    isPair = isExplicitPair = false;\n\n    if (ch === 0x3F/* ? */) {\n      following = state.input.charCodeAt(state.position + 1);\n\n      if (is_WS_OR_EOL(following)) {\n        isPair = isExplicitPair = true;\n        state.position++;\n        skipSeparationSpace(state, true, nodeIndent);\n      }\n    }\n\n    _line = state.line; // Save the current line.\n    _lineStart = state.lineStart;\n    _pos = state.position;\n    composeNode(state, nodeIndent, CONTEXT_FLOW_IN, false, true);\n    keyTag = state.tag;\n    keyNode = state.result;\n    skipSeparationSpace(state, true, nodeIndent);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if ((isExplicitPair || state.line === _line) && ch === 0x3A/* : */) {\n      isPair = true;\n      ch = state.input.charCodeAt(++state.position);\n      skipSeparationSpace(state, true, nodeIndent);\n      composeNode(state, nodeIndent, CONTEXT_FLOW_IN, false, true);\n      valueNode = state.result;\n    }\n\n    if (isMapping) {\n      storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, _line, _lineStart, _pos);\n    } else if (isPair) {\n      _result.push(storeMappingPair(state, null, overridableKeys, keyTag, keyNode, valueNode, _line, _lineStart, _pos));\n    } else {\n      _result.push(keyNode);\n    }\n\n    skipSeparationSpace(state, true, nodeIndent);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if (ch === 0x2C/* , */) {\n      readNext = true;\n      ch = state.input.charCodeAt(++state.position);\n    } else {\n      readNext = false;\n    }\n  }\n\n  throwError(state, 'unexpected end of the stream within a flow collection');\n}\n\nfunction readBlockScalar(state, nodeIndent) {\n  var captureStart,\n      folding,\n      chomping       = CHOMPING_CLIP,\n      didReadContent = false,\n      detectedIndent = false,\n      textIndent     = nodeIndent,\n      emptyLines     = 0,\n      atMoreIndented = false,\n      tmp,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch === 0x7C/* | */) {\n    folding = false;\n  } else if (ch === 0x3E/* > */) {\n    folding = true;\n  } else {\n    return false;\n  }\n\n  state.kind = 'scalar';\n  state.result = '';\n\n  while (ch !== 0) {\n    ch = state.input.charCodeAt(++state.position);\n\n    if (ch === 0x2B/* + */ || ch === 0x2D/* - */) {\n      if (CHOMPING_CLIP === chomping) {\n        chomping = (ch === 0x2B/* + */) ? CHOMPING_KEEP : CHOMPING_STRIP;\n      } else {\n        throwError(state, 'repeat of a chomping mode identifier');\n      }\n\n    } else if ((tmp = fromDecimalCode(ch)) >= 0) {\n      if (tmp === 0) {\n        throwError(state, 'bad explicit indentation width of a block scalar; it cannot be less than one');\n      } else if (!detectedIndent) {\n        textIndent = nodeIndent + tmp - 1;\n        detectedIndent = true;\n      } else {\n        throwError(state, 'repeat of an indentation width identifier');\n      }\n\n    } else {\n      break;\n    }\n  }\n\n  if (is_WHITE_SPACE(ch)) {\n    do { ch = state.input.charCodeAt(++state.position); }\n    while (is_WHITE_SPACE(ch));\n\n    if (ch === 0x23/* # */) {\n      do { ch = state.input.charCodeAt(++state.position); }\n      while (!is_EOL(ch) && (ch !== 0));\n    }\n  }\n\n  while (ch !== 0) {\n    readLineBreak(state);\n    state.lineIndent = 0;\n\n    ch = state.input.charCodeAt(state.position);\n\n    while ((!detectedIndent || state.lineIndent < textIndent) &&\n           (ch === 0x20/* Space */)) {\n      state.lineIndent++;\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    if (!detectedIndent && state.lineIndent > textIndent) {\n      textIndent = state.lineIndent;\n    }\n\n    if (is_EOL(ch)) {\n      emptyLines++;\n      continue;\n    }\n\n    // End of the scalar.\n    if (state.lineIndent < textIndent) {\n\n      // Perform the chomping.\n      if (chomping === CHOMPING_KEEP) {\n        state.result += common.repeat('\\n', didReadContent ? 1 + emptyLines : emptyLines);\n      } else if (chomping === CHOMPING_CLIP) {\n        if (didReadContent) { // i.e. only if the scalar is not empty.\n          state.result += '\\n';\n        }\n      }\n\n      // Break this `while` cycle and go to the funciton's epilogue.\n      break;\n    }\n\n    // Folded style: use fancy rules to handle line breaks.\n    if (folding) {\n\n      // Lines starting with white space characters (more-indented lines) are not folded.\n      if (is_WHITE_SPACE(ch)) {\n        atMoreIndented = true;\n        // except for the first content line (cf. Example 8.1)\n        state.result += common.repeat('\\n', didReadContent ? 1 + emptyLines : emptyLines);\n\n      // End of more-indented block.\n      } else if (atMoreIndented) {\n        atMoreIndented = false;\n        state.result += common.repeat('\\n', emptyLines + 1);\n\n      // Just one line break - perceive as the same line.\n      } else if (emptyLines === 0) {\n        if (didReadContent) { // i.e. only if we have already read some scalar content.\n          state.result += ' ';\n        }\n\n      // Several line breaks - perceive as different lines.\n      } else {\n        state.result += common.repeat('\\n', emptyLines);\n      }\n\n    // Literal style: just add exact number of line breaks between content lines.\n    } else {\n      // Keep all line breaks except the header line break.\n      state.result += common.repeat('\\n', didReadContent ? 1 + emptyLines : emptyLines);\n    }\n\n    didReadContent = true;\n    detectedIndent = true;\n    emptyLines = 0;\n    captureStart = state.position;\n\n    while (!is_EOL(ch) && (ch !== 0)) {\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    captureSegment(state, captureStart, state.position, false);\n  }\n\n  return true;\n}\n\nfunction readBlockSequence(state, nodeIndent) {\n  var _line,\n      _tag      = state.tag,\n      _anchor   = state.anchor,\n      _result   = [],\n      following,\n      detected  = false,\n      ch;\n\n  // there is a leading tab before this token, so it can't be a block sequence/mapping;\n  // it can still be flow sequence/mapping or a scalar\n  if (state.firstTabInLine !== -1) return false;\n\n  if (state.anchor !== null) {\n    state.anchorMap[state.anchor] = _result;\n  }\n\n  ch = state.input.charCodeAt(state.position);\n\n  while (ch !== 0) {\n    if (state.firstTabInLine !== -1) {\n      state.position = state.firstTabInLine;\n      throwError(state, 'tab characters must not be used in indentation');\n    }\n\n    if (ch !== 0x2D/* - */) {\n      break;\n    }\n\n    following = state.input.charCodeAt(state.position + 1);\n\n    if (!is_WS_OR_EOL(following)) {\n      break;\n    }\n\n    detected = true;\n    state.position++;\n\n    if (skipSeparationSpace(state, true, -1)) {\n      if (state.lineIndent <= nodeIndent) {\n        _result.push(null);\n        ch = state.input.charCodeAt(state.position);\n        continue;\n      }\n    }\n\n    _line = state.line;\n    composeNode(state, nodeIndent, CONTEXT_BLOCK_IN, false, true);\n    _result.push(state.result);\n    skipSeparationSpace(state, true, -1);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if ((state.line === _line || state.lineIndent > nodeIndent) && (ch !== 0)) {\n      throwError(state, 'bad indentation of a sequence entry');\n    } else if (state.lineIndent < nodeIndent) {\n      break;\n    }\n  }\n\n  if (detected) {\n    state.tag = _tag;\n    state.anchor = _anchor;\n    state.kind = 'sequence';\n    state.result = _result;\n    return true;\n  }\n  return false;\n}\n\nfunction readBlockMapping(state, nodeIndent, flowIndent) {\n  var following,\n      allowCompact,\n      _line,\n      _keyLine,\n      _keyLineStart,\n      _keyPos,\n      _tag          = state.tag,\n      _anchor       = state.anchor,\n      _result       = {},\n      overridableKeys = Object.create(null),\n      keyTag        = null,\n      keyNode       = null,\n      valueNode     = null,\n      atExplicitKey = false,\n      detected      = false,\n      ch;\n\n  // there is a leading tab before this token, so it can't be a block sequence/mapping;\n  // it can still be flow sequence/mapping or a scalar\n  if (state.firstTabInLine !== -1) return false;\n\n  if (state.anchor !== null) {\n    state.anchorMap[state.anchor] = _result;\n  }\n\n  ch = state.input.charCodeAt(state.position);\n\n  while (ch !== 0) {\n    if (!atExplicitKey && state.firstTabInLine !== -1) {\n      state.position = state.firstTabInLine;\n      throwError(state, 'tab characters must not be used in indentation');\n    }\n\n    following = state.input.charCodeAt(state.position + 1);\n    _line = state.line; // Save the current line.\n\n    //\n    // Explicit notation case. There are two separate blocks:\n    // first for the key (denoted by \"?\") and second for the value (denoted by \":\")\n    //\n    if ((ch === 0x3F/* ? */ || ch === 0x3A/* : */) && is_WS_OR_EOL(following)) {\n\n      if (ch === 0x3F/* ? */) {\n        if (atExplicitKey) {\n          storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);\n          keyTag = keyNode = valueNode = null;\n        }\n\n        detected = true;\n        atExplicitKey = true;\n        allowCompact = true;\n\n      } else if (atExplicitKey) {\n        // i.e. 0x3A/* : */ === character after the explicit key.\n        atExplicitKey = false;\n        allowCompact = true;\n\n      } else {\n        throwError(state, 'incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line');\n      }\n\n      state.position += 1;\n      ch = following;\n\n    //\n    // Implicit notation case. Flow-style node as the key first, then \":\", and the value.\n    //\n    } else {\n      _keyLine = state.line;\n      _keyLineStart = state.lineStart;\n      _keyPos = state.position;\n\n      if (!composeNode(state, flowIndent, CONTEXT_FLOW_OUT, false, true)) {\n        // Neither implicit nor explicit notation.\n        // Reading is done. Go to the epilogue.\n        break;\n      }\n\n      if (state.line === _line) {\n        ch = state.input.charCodeAt(state.position);\n\n        while (is_WHITE_SPACE(ch)) {\n          ch = state.input.charCodeAt(++state.position);\n        }\n\n        if (ch === 0x3A/* : */) {\n          ch = state.input.charCodeAt(++state.position);\n\n          if (!is_WS_OR_EOL(ch)) {\n            throwError(state, 'a whitespace character is expected after the key-value separator within a block mapping');\n          }\n\n          if (atExplicitKey) {\n            storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);\n            keyTag = keyNode = valueNode = null;\n          }\n\n          detected = true;\n          atExplicitKey = false;\n          allowCompact = false;\n          keyTag = state.tag;\n          keyNode = state.result;\n\n        } else if (detected) {\n          throwError(state, 'can not read an implicit mapping pair; a colon is missed');\n\n        } else {\n          state.tag = _tag;\n          state.anchor = _anchor;\n          return true; // Keep the result of `composeNode`.\n        }\n\n      } else if (detected) {\n        throwError(state, 'can not read a block mapping entry; a multiline key may not be an implicit key');\n\n      } else {\n        state.tag = _tag;\n        state.anchor = _anchor;\n        return true; // Keep the result of `composeNode`.\n      }\n    }\n\n    //\n    // Common reading code for both explicit and implicit notations.\n    //\n    if (state.line === _line || state.lineIndent > nodeIndent) {\n      if (atExplicitKey) {\n        _keyLine = state.line;\n        _keyLineStart = state.lineStart;\n        _keyPos = state.position;\n      }\n\n      if (composeNode(state, nodeIndent, CONTEXT_BLOCK_OUT, true, allowCompact)) {\n        if (atExplicitKey) {\n          keyNode = state.result;\n        } else {\n          valueNode = state.result;\n        }\n      }\n\n      if (!atExplicitKey) {\n        storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, _keyLine, _keyLineStart, _keyPos);\n        keyTag = keyNode = valueNode = null;\n      }\n\n      skipSeparationSpace(state, true, -1);\n      ch = state.input.charCodeAt(state.position);\n    }\n\n    if ((state.line === _line || state.lineIndent > nodeIndent) && (ch !== 0)) {\n      throwError(state, 'bad indentation of a mapping entry');\n    } else if (state.lineIndent < nodeIndent) {\n      break;\n    }\n  }\n\n  //\n  // Epilogue.\n  //\n\n  // Special case: last mapping's node contains only the key in explicit notation.\n  if (atExplicitKey) {\n    storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);\n  }\n\n  // Expose the resulting mapping.\n  if (detected) {\n    state.tag = _tag;\n    state.anchor = _anchor;\n    state.kind = 'mapping';\n    state.result = _result;\n  }\n\n  return detected;\n}\n\nfunction readTagProperty(state) {\n  var _position,\n      isVerbatim = false,\n      isNamed    = false,\n      tagHandle,\n      tagName,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x21/* ! */) return false;\n\n  if (state.tag !== null) {\n    throwError(state, 'duplication of a tag property');\n  }\n\n  ch = state.input.charCodeAt(++state.position);\n\n  if (ch === 0x3C/* < */) {\n    isVerbatim = true;\n    ch = state.input.charCodeAt(++state.position);\n\n  } else if (ch === 0x21/* ! */) {\n    isNamed = true;\n    tagHandle = '!!';\n    ch = state.input.charCodeAt(++state.position);\n\n  } else {\n    tagHandle = '!';\n  }\n\n  _position = state.position;\n\n  if (isVerbatim) {\n    do { ch = state.input.charCodeAt(++state.position); }\n    while (ch !== 0 && ch !== 0x3E/* > */);\n\n    if (state.position < state.length) {\n      tagName = state.input.slice(_position, state.position);\n      ch = state.input.charCodeAt(++state.position);\n    } else {\n      throwError(state, 'unexpected end of the stream within a verbatim tag');\n    }\n  } else {\n    while (ch !== 0 && !is_WS_OR_EOL(ch)) {\n\n      if (ch === 0x21/* ! */) {\n        if (!isNamed) {\n          tagHandle = state.input.slice(_position - 1, state.position + 1);\n\n          if (!PATTERN_TAG_HANDLE.test(tagHandle)) {\n            throwError(state, 'named tag handle cannot contain such characters');\n          }\n\n          isNamed = true;\n          _position = state.position + 1;\n        } else {\n          throwError(state, 'tag suffix cannot contain exclamation marks');\n        }\n      }\n\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    tagName = state.input.slice(_position, state.position);\n\n    if (PATTERN_FLOW_INDICATORS.test(tagName)) {\n      throwError(state, 'tag suffix cannot contain flow indicator characters');\n    }\n  }\n\n  if (tagName && !PATTERN_TAG_URI.test(tagName)) {\n    throwError(state, 'tag name cannot contain such characters: ' + tagName);\n  }\n\n  try {\n    tagName = decodeURIComponent(tagName);\n  } catch (err) {\n    throwError(state, 'tag name is malformed: ' + tagName);\n  }\n\n  if (isVerbatim) {\n    state.tag = tagName;\n\n  } else if (_hasOwnProperty$1.call(state.tagMap, tagHandle)) {\n    state.tag = state.tagMap[tagHandle] + tagName;\n\n  } else if (tagHandle === '!') {\n    state.tag = '!' + tagName;\n\n  } else if (tagHandle === '!!') {\n    state.tag = 'tag:yaml.org,2002:' + tagName;\n\n  } else {\n    throwError(state, 'undeclared tag handle \"' + tagHandle + '\"');\n  }\n\n  return true;\n}\n\nfunction readAnchorProperty(state) {\n  var _position,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x26/* & */) return false;\n\n  if (state.anchor !== null) {\n    throwError(state, 'duplication of an anchor property');\n  }\n\n  ch = state.input.charCodeAt(++state.position);\n  _position = state.position;\n\n  while (ch !== 0 && !is_WS_OR_EOL(ch) && !is_FLOW_INDICATOR(ch)) {\n    ch = state.input.charCodeAt(++state.position);\n  }\n\n  if (state.position === _position) {\n    throwError(state, 'name of an anchor node must contain at least one character');\n  }\n\n  state.anchor = state.input.slice(_position, state.position);\n  return true;\n}\n\nfunction readAlias(state) {\n  var _position, alias,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x2A/* * */) return false;\n\n  ch = state.input.charCodeAt(++state.position);\n  _position = state.position;\n\n  while (ch !== 0 && !is_WS_OR_EOL(ch) && !is_FLOW_INDICATOR(ch)) {\n    ch = state.input.charCodeAt(++state.position);\n  }\n\n  if (state.position === _position) {\n    throwError(state, 'name of an alias node must contain at least one character');\n  }\n\n  alias = state.input.slice(_position, state.position);\n\n  if (!_hasOwnProperty$1.call(state.anchorMap, alias)) {\n    throwError(state, 'unidentified alias \"' + alias + '\"');\n  }\n\n  state.result = state.anchorMap[alias];\n  skipSeparationSpace(state, true, -1);\n  return true;\n}\n\nfunction composeNode(state, parentIndent, nodeContext, allowToSeek, allowCompact) {\n  var allowBlockStyles,\n      allowBlockScalars,\n      allowBlockCollections,\n      indentStatus = 1, // 1: this>parent, 0: this=parent, -1: this<parent\n      atNewLine  = false,\n      hasContent = false,\n      typeIndex,\n      typeQuantity,\n      typeList,\n      type,\n      flowIndent,\n      blockIndent;\n\n  if (state.listener !== null) {\n    state.listener('open', state);\n  }\n\n  state.tag    = null;\n  state.anchor = null;\n  state.kind   = null;\n  state.result = null;\n\n  allowBlockStyles = allowBlockScalars = allowBlockCollections =\n    CONTEXT_BLOCK_OUT === nodeContext ||\n    CONTEXT_BLOCK_IN  === nodeContext;\n\n  if (allowToSeek) {\n    if (skipSeparationSpace(state, true, -1)) {\n      atNewLine = true;\n\n      if (state.lineIndent > parentIndent) {\n        indentStatus = 1;\n      } else if (state.lineIndent === parentIndent) {\n        indentStatus = 0;\n      } else if (state.lineIndent < parentIndent) {\n        indentStatus = -1;\n      }\n    }\n  }\n\n  if (indentStatus === 1) {\n    while (readTagProperty(state) || readAnchorProperty(state)) {\n      if (skipSeparationSpace(state, true, -1)) {\n        atNewLine = true;\n        allowBlockCollections = allowBlockStyles;\n\n        if (state.lineIndent > parentIndent) {\n          indentStatus = 1;\n        } else if (state.lineIndent === parentIndent) {\n          indentStatus = 0;\n        } else if (state.lineIndent < parentIndent) {\n          indentStatus = -1;\n        }\n      } else {\n        allowBlockCollections = false;\n      }\n    }\n  }\n\n  if (allowBlockCollections) {\n    allowBlockCollections = atNewLine || allowCompact;\n  }\n\n  if (indentStatus === 1 || CONTEXT_BLOCK_OUT === nodeContext) {\n    if (CONTEXT_FLOW_IN === nodeContext || CONTEXT_FLOW_OUT === nodeContext) {\n      flowIndent = parentIndent;\n    } else {\n      flowIndent = parentIndent + 1;\n    }\n\n    blockIndent = state.position - state.lineStart;\n\n    if (indentStatus === 1) {\n      if (allowBlockCollections &&\n          (readBlockSequence(state, blockIndent) ||\n           readBlockMapping(state, blockIndent, flowIndent)) ||\n          readFlowCollection(state, flowIndent)) {\n        hasContent = true;\n      } else {\n        if ((allowBlockScalars && readBlockScalar(state, flowIndent)) ||\n            readSingleQuotedScalar(state, flowIndent) ||\n            readDoubleQuotedScalar(state, flowIndent)) {\n          hasContent = true;\n\n        } else if (readAlias(state)) {\n          hasContent = true;\n\n          if (state.tag !== null || state.anchor !== null) {\n            throwError(state, 'alias node should not have any properties');\n          }\n\n        } else if (readPlainScalar(state, flowIndent, CONTEXT_FLOW_IN === nodeContext)) {\n          hasContent = true;\n\n          if (state.tag === null) {\n            state.tag = '?';\n          }\n        }\n\n        if (state.anchor !== null) {\n          state.anchorMap[state.anchor] = state.result;\n        }\n      }\n    } else if (indentStatus === 0) {\n      // Special case: block sequences are allowed to have same indentation level as the parent.\n      // http://www.yaml.org/spec/1.2/spec.html#id2799784\n      hasContent = allowBlockCollections && readBlockSequence(state, blockIndent);\n    }\n  }\n\n  if (state.tag === null) {\n    if (state.anchor !== null) {\n      state.anchorMap[state.anchor] = state.result;\n    }\n\n  } else if (state.tag === '?') {\n    // Implicit resolving is not allowed for non-scalar types, and '?'\n    // non-specific tag is only automatically assigned to plain scalars.\n    //\n    // We only need to check kind conformity in case user explicitly assigns '?'\n    // tag, for example like this: \"!<?> [0]\"\n    //\n    if (state.result !== null && state.kind !== 'scalar') {\n      throwError(state, 'unacceptable node kind for !<?> tag; it should be \"scalar\", not \"' + state.kind + '\"');\n    }\n\n    for (typeIndex = 0, typeQuantity = state.implicitTypes.length; typeIndex < typeQuantity; typeIndex += 1) {\n      type = state.implicitTypes[typeIndex];\n\n      if (type.resolve(state.result)) { // `state.result` updated in resolver if matched\n        state.result = type.construct(state.result);\n        state.tag = type.tag;\n        if (state.anchor !== null) {\n          state.anchorMap[state.anchor] = state.result;\n        }\n        break;\n      }\n    }\n  } else if (state.tag !== '!') {\n    if (_hasOwnProperty$1.call(state.typeMap[state.kind || 'fallback'], state.tag)) {\n      type = state.typeMap[state.kind || 'fallback'][state.tag];\n    } else {\n      // looking for multi type\n      type = null;\n      typeList = state.typeMap.multi[state.kind || 'fallback'];\n\n      for (typeIndex = 0, typeQuantity = typeList.length; typeIndex < typeQuantity; typeIndex += 1) {\n        if (state.tag.slice(0, typeList[typeIndex].tag.length) === typeList[typeIndex].tag) {\n          type = typeList[typeIndex];\n          break;\n        }\n      }\n    }\n\n    if (!type) {\n      throwError(state, 'unknown tag !<' + state.tag + '>');\n    }\n\n    if (state.result !== null && type.kind !== state.kind) {\n      throwError(state, 'unacceptable node kind for !<' + state.tag + '> tag; it should be \"' + type.kind + '\", not \"' + state.kind + '\"');\n    }\n\n    if (!type.resolve(state.result, state.tag)) { // `state.result` updated in resolver if matched\n      throwError(state, 'cannot resolve a node with !<' + state.tag + '> explicit tag');\n    } else {\n      state.result = type.construct(state.result, state.tag);\n      if (state.anchor !== null) {\n        state.anchorMap[state.anchor] = state.result;\n      }\n    }\n  }\n\n  if (state.listener !== null) {\n    state.listener('close', state);\n  }\n  return state.tag !== null ||  state.anchor !== null || hasContent;\n}\n\nfunction readDocument(state) {\n  var documentStart = state.position,\n      _position,\n      directiveName,\n      directiveArgs,\n      hasDirectives = false,\n      ch;\n\n  state.version = null;\n  state.checkLineBreaks = state.legacy;\n  state.tagMap = Object.create(null);\n  state.anchorMap = Object.create(null);\n\n  while ((ch = state.input.charCodeAt(state.position)) !== 0) {\n    skipSeparationSpace(state, true, -1);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if (state.lineIndent > 0 || ch !== 0x25/* % */) {\n      break;\n    }\n\n    hasDirectives = true;\n    ch = state.input.charCodeAt(++state.position);\n    _position = state.position;\n\n    while (ch !== 0 && !is_WS_OR_EOL(ch)) {\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    directiveName = state.input.slice(_position, state.position);\n    directiveArgs = [];\n\n    if (directiveName.length < 1) {\n      throwError(state, 'directive name must not be less than one character in length');\n    }\n\n    while (ch !== 0) {\n      while (is_WHITE_SPACE(ch)) {\n        ch = state.input.charCodeAt(++state.position);\n      }\n\n      if (ch === 0x23/* # */) {\n        do { ch = state.input.charCodeAt(++state.position); }\n        while (ch !== 0 && !is_EOL(ch));\n        break;\n      }\n\n      if (is_EOL(ch)) break;\n\n      _position = state.position;\n\n      while (ch !== 0 && !is_WS_OR_EOL(ch)) {\n        ch = state.input.charCodeAt(++state.position);\n      }\n\n      directiveArgs.push(state.input.slice(_position, state.position));\n    }\n\n    if (ch !== 0) readLineBreak(state);\n\n    if (_hasOwnProperty$1.call(directiveHandlers, directiveName)) {\n      directiveHandlers[directiveName](state, directiveName, directiveArgs);\n    } else {\n      throwWarning(state, 'unknown document directive \"' + directiveName + '\"');\n    }\n  }\n\n  skipSeparationSpace(state, true, -1);\n\n  if (state.lineIndent === 0 &&\n      state.input.charCodeAt(state.position)     === 0x2D/* - */ &&\n      state.input.charCodeAt(state.position + 1) === 0x2D/* - */ &&\n      state.input.charCodeAt(state.position + 2) === 0x2D/* - */) {\n    state.position += 3;\n    skipSeparationSpace(state, true, -1);\n\n  } else if (hasDirectives) {\n    throwError(state, 'directives end mark is expected');\n  }\n\n  composeNode(state, state.lineIndent - 1, CONTEXT_BLOCK_OUT, false, true);\n  skipSeparationSpace(state, true, -1);\n\n  if (state.checkLineBreaks &&\n      PATTERN_NON_ASCII_LINE_BREAKS.test(state.input.slice(documentStart, state.position))) {\n    throwWarning(state, 'non-ASCII line breaks are interpreted as content');\n  }\n\n  state.documents.push(state.result);\n\n  if (state.position === state.lineStart && testDocumentSeparator(state)) {\n\n    if (state.input.charCodeAt(state.position) === 0x2E/* . */) {\n      state.position += 3;\n      skipSeparationSpace(state, true, -1);\n    }\n    return;\n  }\n\n  if (state.position < (state.length - 1)) {\n    throwError(state, 'end of the stream or a document separator is expected');\n  } else {\n    return;\n  }\n}\n\n\nfunction loadDocuments(input, options) {\n  input = String(input);\n  options = options || {};\n\n  if (input.length !== 0) {\n\n    // Add tailing `\\n` if not exists\n    if (input.charCodeAt(input.length - 1) !== 0x0A/* LF */ &&\n        input.charCodeAt(input.length - 1) !== 0x0D/* CR */) {\n      input += '\\n';\n    }\n\n    // Strip BOM\n    if (input.charCodeAt(0) === 0xFEFF) {\n      input = input.slice(1);\n    }\n  }\n\n  var state = new State$1(input, options);\n\n  var nullpos = input.indexOf('\\0');\n\n  if (nullpos !== -1) {\n    state.position = nullpos;\n    throwError(state, 'null byte is not allowed in input');\n  }\n\n  // Use 0 as string terminator. That significantly simplifies bounds check.\n  state.input += '\\0';\n\n  while (state.input.charCodeAt(state.position) === 0x20/* Space */) {\n    state.lineIndent += 1;\n    state.position += 1;\n  }\n\n  while (state.position < (state.length - 1)) {\n    readDocument(state);\n  }\n\n  return state.documents;\n}\n\n\nfunction loadAll$1(input, iterator, options) {\n  if (iterator !== null && typeof iterator === 'object' && typeof options === 'undefined') {\n    options = iterator;\n    iterator = null;\n  }\n\n  var documents = loadDocuments(input, options);\n\n  if (typeof iterator !== 'function') {\n    return documents;\n  }\n\n  for (var index = 0, length = documents.length; index < length; index += 1) {\n    iterator(documents[index]);\n  }\n}\n\n\nfunction load$1(input, options) {\n  var documents = loadDocuments(input, options);\n\n  if (documents.length === 0) {\n    /*eslint-disable no-undefined*/\n    return undefined;\n  } else if (documents.length === 1) {\n    return documents[0];\n  }\n  throw new exception('expected a single document in the stream, but found more');\n}\n\n\nvar loadAll_1 = loadAll$1;\nvar load_1    = load$1;\n\nvar loader = {\n\tloadAll: loadAll_1,\n\tload: load_1\n};\n\n/*eslint-disable no-use-before-define*/\n\n\n\n\n\nvar _toString       = Object.prototype.toString;\nvar _hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar CHAR_BOM                  = 0xFEFF;\nvar CHAR_TAB                  = 0x09; /* Tab */\nvar CHAR_LINE_FEED            = 0x0A; /* LF */\nvar CHAR_CARRIAGE_RETURN      = 0x0D; /* CR */\nvar CHAR_SPACE                = 0x20; /* Space */\nvar CHAR_EXCLAMATION          = 0x21; /* ! */\nvar CHAR_DOUBLE_QUOTE         = 0x22; /* \" */\nvar CHAR_SHARP                = 0x23; /* # */\nvar CHAR_PERCENT              = 0x25; /* % */\nvar CHAR_AMPERSAND            = 0x26; /* & */\nvar CHAR_SINGLE_QUOTE         = 0x27; /* ' */\nvar CHAR_ASTERISK             = 0x2A; /* * */\nvar CHAR_COMMA                = 0x2C; /* , */\nvar CHAR_MINUS                = 0x2D; /* - */\nvar CHAR_COLON                = 0x3A; /* : */\nvar CHAR_EQUALS               = 0x3D; /* = */\nvar CHAR_GREATER_THAN         = 0x3E; /* > */\nvar CHAR_QUESTION             = 0x3F; /* ? */\nvar CHAR_COMMERCIAL_AT        = 0x40; /* @ */\nvar CHAR_LEFT_SQUARE_BRACKET  = 0x5B; /* [ */\nvar CHAR_RIGHT_SQUARE_BRACKET = 0x5D; /* ] */\nvar CHAR_GRAVE_ACCENT         = 0x60; /* ` */\nvar CHAR_LEFT_CURLY_BRACKET   = 0x7B; /* { */\nvar CHAR_VERTICAL_LINE        = 0x7C; /* | */\nvar CHAR_RIGHT_CURLY_BRACKET  = 0x7D; /* } */\n\nvar ESCAPE_SEQUENCES = {};\n\nESCAPE_SEQUENCES[0x00]   = '\\\\0';\nESCAPE_SEQUENCES[0x07]   = '\\\\a';\nESCAPE_SEQUENCES[0x08]   = '\\\\b';\nESCAPE_SEQUENCES[0x09]   = '\\\\t';\nESCAPE_SEQUENCES[0x0A]   = '\\\\n';\nESCAPE_SEQUENCES[0x0B]   = '\\\\v';\nESCAPE_SEQUENCES[0x0C]   = '\\\\f';\nESCAPE_SEQUENCES[0x0D]   = '\\\\r';\nESCAPE_SEQUENCES[0x1B]   = '\\\\e';\nESCAPE_SEQUENCES[0x22]   = '\\\\\"';\nESCAPE_SEQUENCES[0x5C]   = '\\\\\\\\';\nESCAPE_SEQUENCES[0x85]   = '\\\\N';\nESCAPE_SEQUENCES[0xA0]   = '\\\\_';\nESCAPE_SEQUENCES[0x2028] = '\\\\L';\nESCAPE_SEQUENCES[0x2029] = '\\\\P';\n\nvar DEPRECATED_BOOLEANS_SYNTAX = [\n  'y', 'Y', 'yes', 'Yes', 'YES', 'on', 'On', 'ON',\n  'n', 'N', 'no', 'No', 'NO', 'off', 'Off', 'OFF'\n];\n\nvar DEPRECATED_BASE60_SYNTAX = /^[-+]?[0-9_]+(?::[0-9_]+)+(?:\\.[0-9_]*)?$/;\n\nfunction compileStyleMap(schema, map) {\n  var result, keys, index, length, tag, style, type;\n\n  if (map === null) return {};\n\n  result = {};\n  keys = Object.keys(map);\n\n  for (index = 0, length = keys.length; index < length; index += 1) {\n    tag = keys[index];\n    style = String(map[tag]);\n\n    if (tag.slice(0, 2) === '!!') {\n      tag = 'tag:yaml.org,2002:' + tag.slice(2);\n    }\n    type = schema.compiledTypeMap['fallback'][tag];\n\n    if (type && _hasOwnProperty.call(type.styleAliases, style)) {\n      style = type.styleAliases[style];\n    }\n\n    result[tag] = style;\n  }\n\n  return result;\n}\n\nfunction encodeHex(character) {\n  var string, handle, length;\n\n  string = character.toString(16).toUpperCase();\n\n  if (character <= 0xFF) {\n    handle = 'x';\n    length = 2;\n  } else if (character <= 0xFFFF) {\n    handle = 'u';\n    length = 4;\n  } else if (character <= 0xFFFFFFFF) {\n    handle = 'U';\n    length = 8;\n  } else {\n    throw new exception('code point within a string may not be greater than 0xFFFFFFFF');\n  }\n\n  return '\\\\' + handle + common.repeat('0', length - string.length) + string;\n}\n\n\nvar QUOTING_TYPE_SINGLE = 1,\n    QUOTING_TYPE_DOUBLE = 2;\n\nfunction State(options) {\n  this.schema        = options['schema'] || _default;\n  this.indent        = Math.max(1, (options['indent'] || 2));\n  this.noArrayIndent = options['noArrayIndent'] || false;\n  this.skipInvalid   = options['skipInvalid'] || false;\n  this.flowLevel     = (common.isNothing(options['flowLevel']) ? -1 : options['flowLevel']);\n  this.styleMap      = compileStyleMap(this.schema, options['styles'] || null);\n  this.sortKeys      = options['sortKeys'] || false;\n  this.lineWidth     = options['lineWidth'] || 80;\n  this.noRefs        = options['noRefs'] || false;\n  this.noCompatMode  = options['noCompatMode'] || false;\n  this.condenseFlow  = options['condenseFlow'] || false;\n  this.quotingType   = options['quotingType'] === '\"' ? QUOTING_TYPE_DOUBLE : QUOTING_TYPE_SINGLE;\n  this.forceQuotes   = options['forceQuotes'] || false;\n  this.replacer      = typeof options['replacer'] === 'function' ? options['replacer'] : null;\n\n  this.implicitTypes = this.schema.compiledImplicit;\n  this.explicitTypes = this.schema.compiledExplicit;\n\n  this.tag = null;\n  this.result = '';\n\n  this.duplicates = [];\n  this.usedDuplicates = null;\n}\n\n// Indents every line in a string. Empty lines (\\n only) are not indented.\nfunction indentString(string, spaces) {\n  var ind = common.repeat(' ', spaces),\n      position = 0,\n      next = -1,\n      result = '',\n      line,\n      length = string.length;\n\n  while (position < length) {\n    next = string.indexOf('\\n', position);\n    if (next === -1) {\n      line = string.slice(position);\n      position = length;\n    } else {\n      line = string.slice(position, next + 1);\n      position = next + 1;\n    }\n\n    if (line.length && line !== '\\n') result += ind;\n\n    result += line;\n  }\n\n  return result;\n}\n\nfunction generateNextLine(state, level) {\n  return '\\n' + common.repeat(' ', state.indent * level);\n}\n\nfunction testImplicitResolving(state, str) {\n  var index, length, type;\n\n  for (index = 0, length = state.implicitTypes.length; index < length; index += 1) {\n    type = state.implicitTypes[index];\n\n    if (type.resolve(str)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n// [33] s-white ::= s-space | s-tab\nfunction isWhitespace(c) {\n  return c === CHAR_SPACE || c === CHAR_TAB;\n}\n\n// Returns true if the character can be printed without escaping.\n// From YAML 1.2: \"any allowed characters known to be non-printable\n// should also be escaped. [However,] This isn’t mandatory\"\n// Derived from nb-char - \\t - #x85 - #xA0 - #x2028 - #x2029.\nfunction isPrintable(c) {\n  return  (0x00020 <= c && c <= 0x00007E)\n      || ((0x000A1 <= c && c <= 0x00D7FF) && c !== 0x2028 && c !== 0x2029)\n      || ((0x0E000 <= c && c <= 0x00FFFD) && c !== CHAR_BOM)\n      ||  (0x10000 <= c && c <= 0x10FFFF);\n}\n\n// [34] ns-char ::= nb-char - s-white\n// [27] nb-char ::= c-printable - b-char - c-byte-order-mark\n// [26] b-char  ::= b-line-feed | b-carriage-return\n// Including s-white (for some reason, examples doesn't match specs in this aspect)\n// ns-char ::= c-printable - b-line-feed - b-carriage-return - c-byte-order-mark\nfunction isNsCharOrWhitespace(c) {\n  return isPrintable(c)\n    && c !== CHAR_BOM\n    // - b-char\n    && c !== CHAR_CARRIAGE_RETURN\n    && c !== CHAR_LINE_FEED;\n}\n\n// [127]  ns-plain-safe(c) ::= c = flow-out  ⇒ ns-plain-safe-out\n//                             c = flow-in   ⇒ ns-plain-safe-in\n//                             c = block-key ⇒ ns-plain-safe-out\n//                             c = flow-key  ⇒ ns-plain-safe-in\n// [128] ns-plain-safe-out ::= ns-char\n// [129]  ns-plain-safe-in ::= ns-char - c-flow-indicator\n// [130]  ns-plain-char(c) ::=  ( ns-plain-safe(c) - “:” - “#” )\n//                            | ( /* An ns-char preceding */ “#” )\n//                            | ( “:” /* Followed by an ns-plain-safe(c) */ )\nfunction isPlainSafe(c, prev, inblock) {\n  var cIsNsCharOrWhitespace = isNsCharOrWhitespace(c);\n  var cIsNsChar = cIsNsCharOrWhitespace && !isWhitespace(c);\n  return (\n    // ns-plain-safe\n    inblock ? // c = flow-in\n      cIsNsCharOrWhitespace\n      : cIsNsCharOrWhitespace\n        // - c-flow-indicator\n        && c !== CHAR_COMMA\n        && c !== CHAR_LEFT_SQUARE_BRACKET\n        && c !== CHAR_RIGHT_SQUARE_BRACKET\n        && c !== CHAR_LEFT_CURLY_BRACKET\n        && c !== CHAR_RIGHT_CURLY_BRACKET\n  )\n    // ns-plain-char\n    && c !== CHAR_SHARP // false on '#'\n    && !(prev === CHAR_COLON && !cIsNsChar) // false on ': '\n    || (isNsCharOrWhitespace(prev) && !isWhitespace(prev) && c === CHAR_SHARP) // change to true on '[^ ]#'\n    || (prev === CHAR_COLON && cIsNsChar); // change to true on ':[^ ]'\n}\n\n// Simplified test for values allowed as the first character in plain style.\nfunction isPlainSafeFirst(c) {\n  // Uses a subset of ns-char - c-indicator\n  // where ns-char = nb-char - s-white.\n  // No support of ( ( “?” | “:” | “-” ) /* Followed by an ns-plain-safe(c)) */ ) part\n  return isPrintable(c) && c !== CHAR_BOM\n    && !isWhitespace(c) // - s-white\n    // - (c-indicator ::=\n    // “-” | “?” | “:” | “,” | “[” | “]” | “{” | “}”\n    && c !== CHAR_MINUS\n    && c !== CHAR_QUESTION\n    && c !== CHAR_COLON\n    && c !== CHAR_COMMA\n    && c !== CHAR_LEFT_SQUARE_BRACKET\n    && c !== CHAR_RIGHT_SQUARE_BRACKET\n    && c !== CHAR_LEFT_CURLY_BRACKET\n    && c !== CHAR_RIGHT_CURLY_BRACKET\n    // | “#” | “&” | “*” | “!” | “|” | “=” | “>” | “'” | “\"”\n    && c !== CHAR_SHARP\n    && c !== CHAR_AMPERSAND\n    && c !== CHAR_ASTERISK\n    && c !== CHAR_EXCLAMATION\n    && c !== CHAR_VERTICAL_LINE\n    && c !== CHAR_EQUALS\n    && c !== CHAR_GREATER_THAN\n    && c !== CHAR_SINGLE_QUOTE\n    && c !== CHAR_DOUBLE_QUOTE\n    // | “%” | “@” | “`”)\n    && c !== CHAR_PERCENT\n    && c !== CHAR_COMMERCIAL_AT\n    && c !== CHAR_GRAVE_ACCENT;\n}\n\n// Simplified test for values allowed as the last character in plain style.\nfunction isPlainSafeLast(c) {\n  // just not whitespace or colon, it will be checked to be plain character later\n  return !isWhitespace(c) && c !== CHAR_COLON;\n}\n\n// Same as 'string'.codePointAt(pos), but works in older browsers.\nfunction codePointAt(string, pos) {\n  var first = string.charCodeAt(pos), second;\n  if (first >= 0xD800 && first <= 0xDBFF && pos + 1 < string.length) {\n    second = string.charCodeAt(pos + 1);\n    if (second >= 0xDC00 && second <= 0xDFFF) {\n      // https://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n      return (first - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n    }\n  }\n  return first;\n}\n\n// Determines whether block indentation indicator is required.\nfunction needIndentIndicator(string) {\n  var leadingSpaceRe = /^\\n* /;\n  return leadingSpaceRe.test(string);\n}\n\nvar STYLE_PLAIN   = 1,\n    STYLE_SINGLE  = 2,\n    STYLE_LITERAL = 3,\n    STYLE_FOLDED  = 4,\n    STYLE_DOUBLE  = 5;\n\n// Determines which scalar styles are possible and returns the preferred style.\n// lineWidth = -1 => no limit.\n// Pre-conditions: str.length > 0.\n// Post-conditions:\n//    STYLE_PLAIN or STYLE_SINGLE => no \\n are in the string.\n//    STYLE_LITERAL => no lines are suitable for folding (or lineWidth is -1).\n//    STYLE_FOLDED => a line > lineWidth and can be folded (and lineWidth != -1).\nfunction chooseScalarStyle(string, singleLineOnly, indentPerLevel, lineWidth,\n  testAmbiguousType, quotingType, forceQuotes, inblock) {\n\n  var i;\n  var char = 0;\n  var prevChar = null;\n  var hasLineBreak = false;\n  var hasFoldableLine = false; // only checked if shouldTrackWidth\n  var shouldTrackWidth = lineWidth !== -1;\n  var previousLineBreak = -1; // count the first line correctly\n  var plain = isPlainSafeFirst(codePointAt(string, 0))\n          && isPlainSafeLast(codePointAt(string, string.length - 1));\n\n  if (singleLineOnly || forceQuotes) {\n    // Case: no block styles.\n    // Check for disallowed characters to rule out plain and single.\n    for (i = 0; i < string.length; char >= 0x10000 ? i += 2 : i++) {\n      char = codePointAt(string, i);\n      if (!isPrintable(char)) {\n        return STYLE_DOUBLE;\n      }\n      plain = plain && isPlainSafe(char, prevChar, inblock);\n      prevChar = char;\n    }\n  } else {\n    // Case: block styles permitted.\n    for (i = 0; i < string.length; char >= 0x10000 ? i += 2 : i++) {\n      char = codePointAt(string, i);\n      if (char === CHAR_LINE_FEED) {\n        hasLineBreak = true;\n        // Check if any line can be folded.\n        if (shouldTrackWidth) {\n          hasFoldableLine = hasFoldableLine ||\n            // Foldable line = too long, and not more-indented.\n            (i - previousLineBreak - 1 > lineWidth &&\n             string[previousLineBreak + 1] !== ' ');\n          previousLineBreak = i;\n        }\n      } else if (!isPrintable(char)) {\n        return STYLE_DOUBLE;\n      }\n      plain = plain && isPlainSafe(char, prevChar, inblock);\n      prevChar = char;\n    }\n    // in case the end is missing a \\n\n    hasFoldableLine = hasFoldableLine || (shouldTrackWidth &&\n      (i - previousLineBreak - 1 > lineWidth &&\n       string[previousLineBreak + 1] !== ' '));\n  }\n  // Although every style can represent \\n without escaping, prefer block styles\n  // for multiline, since they're more readable and they don't add empty lines.\n  // Also prefer folding a super-long line.\n  if (!hasLineBreak && !hasFoldableLine) {\n    // Strings interpretable as another type have to be quoted;\n    // e.g. the string 'true' vs. the boolean true.\n    if (plain && !forceQuotes && !testAmbiguousType(string)) {\n      return STYLE_PLAIN;\n    }\n    return quotingType === QUOTING_TYPE_DOUBLE ? STYLE_DOUBLE : STYLE_SINGLE;\n  }\n  // Edge case: block indentation indicator can only have one digit.\n  if (indentPerLevel > 9 && needIndentIndicator(string)) {\n    return STYLE_DOUBLE;\n  }\n  // At this point we know block styles are valid.\n  // Prefer literal style unless we want to fold.\n  if (!forceQuotes) {\n    return hasFoldableLine ? STYLE_FOLDED : STYLE_LITERAL;\n  }\n  return quotingType === QUOTING_TYPE_DOUBLE ? STYLE_DOUBLE : STYLE_SINGLE;\n}\n\n// Note: line breaking/folding is implemented for only the folded style.\n// NB. We drop the last trailing newline (if any) of a returned block scalar\n//  since the dumper adds its own newline. This always works:\n//    • No ending newline => unaffected; already using strip \"-\" chomping.\n//    • Ending newline    => removed then restored.\n//  Importantly, this keeps the \"+\" chomp indicator from gaining an extra line.\nfunction writeScalar(state, string, level, iskey, inblock) {\n  state.dump = (function () {\n    if (string.length === 0) {\n      return state.quotingType === QUOTING_TYPE_DOUBLE ? '\"\"' : \"''\";\n    }\n    if (!state.noCompatMode) {\n      if (DEPRECATED_BOOLEANS_SYNTAX.indexOf(string) !== -1 || DEPRECATED_BASE60_SYNTAX.test(string)) {\n        return state.quotingType === QUOTING_TYPE_DOUBLE ? ('\"' + string + '\"') : (\"'\" + string + \"'\");\n      }\n    }\n\n    var indent = state.indent * Math.max(1, level); // no 0-indent scalars\n    // As indentation gets deeper, let the width decrease monotonically\n    // to the lower bound min(state.lineWidth, 40).\n    // Note that this implies\n    //  state.lineWidth ≤ 40 + state.indent: width is fixed at the lower bound.\n    //  state.lineWidth > 40 + state.indent: width decreases until the lower bound.\n    // This behaves better than a constant minimum width which disallows narrower options,\n    // or an indent threshold which causes the width to suddenly increase.\n    var lineWidth = state.lineWidth === -1\n      ? -1 : Math.max(Math.min(state.lineWidth, 40), state.lineWidth - indent);\n\n    // Without knowing if keys are implicit/explicit, assume implicit for safety.\n    var singleLineOnly = iskey\n      // No block styles in flow mode.\n      || (state.flowLevel > -1 && level >= state.flowLevel);\n    function testAmbiguity(string) {\n      return testImplicitResolving(state, string);\n    }\n\n    switch (chooseScalarStyle(string, singleLineOnly, state.indent, lineWidth,\n      testAmbiguity, state.quotingType, state.forceQuotes && !iskey, inblock)) {\n\n      case STYLE_PLAIN:\n        return string;\n      case STYLE_SINGLE:\n        return \"'\" + string.replace(/'/g, \"''\") + \"'\";\n      case STYLE_LITERAL:\n        return '|' + blockHeader(string, state.indent)\n          + dropEndingNewline(indentString(string, indent));\n      case STYLE_FOLDED:\n        return '>' + blockHeader(string, state.indent)\n          + dropEndingNewline(indentString(foldString(string, lineWidth), indent));\n      case STYLE_DOUBLE:\n        return '\"' + escapeString(string) + '\"';\n      default:\n        throw new exception('impossible error: invalid scalar style');\n    }\n  }());\n}\n\n// Pre-conditions: string is valid for a block scalar, 1 <= indentPerLevel <= 9.\nfunction blockHeader(string, indentPerLevel) {\n  var indentIndicator = needIndentIndicator(string) ? String(indentPerLevel) : '';\n\n  // note the special case: the string '\\n' counts as a \"trailing\" empty line.\n  var clip =          string[string.length - 1] === '\\n';\n  var keep = clip && (string[string.length - 2] === '\\n' || string === '\\n');\n  var chomp = keep ? '+' : (clip ? '' : '-');\n\n  return indentIndicator + chomp + '\\n';\n}\n\n// (See the note for writeScalar.)\nfunction dropEndingNewline(string) {\n  return string[string.length - 1] === '\\n' ? string.slice(0, -1) : string;\n}\n\n// Note: a long line without a suitable break point will exceed the width limit.\n// Pre-conditions: every char in str isPrintable, str.length > 0, width > 0.\nfunction foldString(string, width) {\n  // In folded style, $k$ consecutive newlines output as $k+1$ newlines—\n  // unless they're before or after a more-indented line, or at the very\n  // beginning or end, in which case $k$ maps to $k$.\n  // Therefore, parse each chunk as newline(s) followed by a content line.\n  var lineRe = /(\\n+)([^\\n]*)/g;\n\n  // first line (possibly an empty line)\n  var result = (function () {\n    var nextLF = string.indexOf('\\n');\n    nextLF = nextLF !== -1 ? nextLF : string.length;\n    lineRe.lastIndex = nextLF;\n    return foldLine(string.slice(0, nextLF), width);\n  }());\n  // If we haven't reached the first content line yet, don't add an extra \\n.\n  var prevMoreIndented = string[0] === '\\n' || string[0] === ' ';\n  var moreIndented;\n\n  // rest of the lines\n  var match;\n  while ((match = lineRe.exec(string))) {\n    var prefix = match[1], line = match[2];\n    moreIndented = (line[0] === ' ');\n    result += prefix\n      + (!prevMoreIndented && !moreIndented && line !== ''\n        ? '\\n' : '')\n      + foldLine(line, width);\n    prevMoreIndented = moreIndented;\n  }\n\n  return result;\n}\n\n// Greedy line breaking.\n// Picks the longest line under the limit each time,\n// otherwise settles for the shortest line over the limit.\n// NB. More-indented lines *cannot* be folded, as that would add an extra \\n.\nfunction foldLine(line, width) {\n  if (line === '' || line[0] === ' ') return line;\n\n  // Since a more-indented line adds a \\n, breaks can't be followed by a space.\n  var breakRe = / [^ ]/g; // note: the match index will always be <= length-2.\n  var match;\n  // start is an inclusive index. end, curr, and next are exclusive.\n  var start = 0, end, curr = 0, next = 0;\n  var result = '';\n\n  // Invariants: 0 <= start <= length-1.\n  //   0 <= curr <= next <= max(0, length-2). curr - start <= width.\n  // Inside the loop:\n  //   A match implies length >= 2, so curr and next are <= length-2.\n  while ((match = breakRe.exec(line))) {\n    next = match.index;\n    // maintain invariant: curr - start <= width\n    if (next - start > width) {\n      end = (curr > start) ? curr : next; // derive end <= length-2\n      result += '\\n' + line.slice(start, end);\n      // skip the space that was output as \\n\n      start = end + 1;                    // derive start <= length-1\n    }\n    curr = next;\n  }\n\n  // By the invariants, start <= length-1, so there is something left over.\n  // It is either the whole string or a part starting from non-whitespace.\n  result += '\\n';\n  // Insert a break if the remainder is too long and there is a break available.\n  if (line.length - start > width && curr > start) {\n    result += line.slice(start, curr) + '\\n' + line.slice(curr + 1);\n  } else {\n    result += line.slice(start);\n  }\n\n  return result.slice(1); // drop extra \\n joiner\n}\n\n// Escapes a double-quoted string.\nfunction escapeString(string) {\n  var result = '';\n  var char = 0;\n  var escapeSeq;\n\n  for (var i = 0; i < string.length; char >= 0x10000 ? i += 2 : i++) {\n    char = codePointAt(string, i);\n    escapeSeq = ESCAPE_SEQUENCES[char];\n\n    if (!escapeSeq && isPrintable(char)) {\n      result += string[i];\n      if (char >= 0x10000) result += string[i + 1];\n    } else {\n      result += escapeSeq || encodeHex(char);\n    }\n  }\n\n  return result;\n}\n\nfunction writeFlowSequence(state, level, object) {\n  var _result = '',\n      _tag    = state.tag,\n      index,\n      length,\n      value;\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    value = object[index];\n\n    if (state.replacer) {\n      value = state.replacer.call(object, String(index), value);\n    }\n\n    // Write only valid elements, put null instead of invalid elements.\n    if (writeNode(state, level, value, false, false) ||\n        (typeof value === 'undefined' &&\n         writeNode(state, level, null, false, false))) {\n\n      if (_result !== '') _result += ',' + (!state.condenseFlow ? ' ' : '');\n      _result += state.dump;\n    }\n  }\n\n  state.tag = _tag;\n  state.dump = '[' + _result + ']';\n}\n\nfunction writeBlockSequence(state, level, object, compact) {\n  var _result = '',\n      _tag    = state.tag,\n      index,\n      length,\n      value;\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    value = object[index];\n\n    if (state.replacer) {\n      value = state.replacer.call(object, String(index), value);\n    }\n\n    // Write only valid elements, put null instead of invalid elements.\n    if (writeNode(state, level + 1, value, true, true, false, true) ||\n        (typeof value === 'undefined' &&\n         writeNode(state, level + 1, null, true, true, false, true))) {\n\n      if (!compact || _result !== '') {\n        _result += generateNextLine(state, level);\n      }\n\n      if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {\n        _result += '-';\n      } else {\n        _result += '- ';\n      }\n\n      _result += state.dump;\n    }\n  }\n\n  state.tag = _tag;\n  state.dump = _result || '[]'; // Empty sequence if no valid values.\n}\n\nfunction writeFlowMapping(state, level, object) {\n  var _result       = '',\n      _tag          = state.tag,\n      objectKeyList = Object.keys(object),\n      index,\n      length,\n      objectKey,\n      objectValue,\n      pairBuffer;\n\n  for (index = 0, length = objectKeyList.length; index < length; index += 1) {\n\n    pairBuffer = '';\n    if (_result !== '') pairBuffer += ', ';\n\n    if (state.condenseFlow) pairBuffer += '\"';\n\n    objectKey = objectKeyList[index];\n    objectValue = object[objectKey];\n\n    if (state.replacer) {\n      objectValue = state.replacer.call(object, objectKey, objectValue);\n    }\n\n    if (!writeNode(state, level, objectKey, false, false)) {\n      continue; // Skip this pair because of invalid key;\n    }\n\n    if (state.dump.length > 1024) pairBuffer += '? ';\n\n    pairBuffer += state.dump + (state.condenseFlow ? '\"' : '') + ':' + (state.condenseFlow ? '' : ' ');\n\n    if (!writeNode(state, level, objectValue, false, false)) {\n      continue; // Skip this pair because of invalid value.\n    }\n\n    pairBuffer += state.dump;\n\n    // Both key and value are valid.\n    _result += pairBuffer;\n  }\n\n  state.tag = _tag;\n  state.dump = '{' + _result + '}';\n}\n\nfunction writeBlockMapping(state, level, object, compact) {\n  var _result       = '',\n      _tag          = state.tag,\n      objectKeyList = Object.keys(object),\n      index,\n      length,\n      objectKey,\n      objectValue,\n      explicitPair,\n      pairBuffer;\n\n  // Allow sorting keys so that the output file is deterministic\n  if (state.sortKeys === true) {\n    // Default sorting\n    objectKeyList.sort();\n  } else if (typeof state.sortKeys === 'function') {\n    // Custom sort function\n    objectKeyList.sort(state.sortKeys);\n  } else if (state.sortKeys) {\n    // Something is wrong\n    throw new exception('sortKeys must be a boolean or a function');\n  }\n\n  for (index = 0, length = objectKeyList.length; index < length; index += 1) {\n    pairBuffer = '';\n\n    if (!compact || _result !== '') {\n      pairBuffer += generateNextLine(state, level);\n    }\n\n    objectKey = objectKeyList[index];\n    objectValue = object[objectKey];\n\n    if (state.replacer) {\n      objectValue = state.replacer.call(object, objectKey, objectValue);\n    }\n\n    if (!writeNode(state, level + 1, objectKey, true, true, true)) {\n      continue; // Skip this pair because of invalid key.\n    }\n\n    explicitPair = (state.tag !== null && state.tag !== '?') ||\n                   (state.dump && state.dump.length > 1024);\n\n    if (explicitPair) {\n      if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {\n        pairBuffer += '?';\n      } else {\n        pairBuffer += '? ';\n      }\n    }\n\n    pairBuffer += state.dump;\n\n    if (explicitPair) {\n      pairBuffer += generateNextLine(state, level);\n    }\n\n    if (!writeNode(state, level + 1, objectValue, true, explicitPair)) {\n      continue; // Skip this pair because of invalid value.\n    }\n\n    if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {\n      pairBuffer += ':';\n    } else {\n      pairBuffer += ': ';\n    }\n\n    pairBuffer += state.dump;\n\n    // Both key and value are valid.\n    _result += pairBuffer;\n  }\n\n  state.tag = _tag;\n  state.dump = _result || '{}'; // Empty mapping if no valid pairs.\n}\n\nfunction detectType(state, object, explicit) {\n  var _result, typeList, index, length, type, style;\n\n  typeList = explicit ? state.explicitTypes : state.implicitTypes;\n\n  for (index = 0, length = typeList.length; index < length; index += 1) {\n    type = typeList[index];\n\n    if ((type.instanceOf  || type.predicate) &&\n        (!type.instanceOf || ((typeof object === 'object') && (object instanceof type.instanceOf))) &&\n        (!type.predicate  || type.predicate(object))) {\n\n      if (explicit) {\n        if (type.multi && type.representName) {\n          state.tag = type.representName(object);\n        } else {\n          state.tag = type.tag;\n        }\n      } else {\n        state.tag = '?';\n      }\n\n      if (type.represent) {\n        style = state.styleMap[type.tag] || type.defaultStyle;\n\n        if (_toString.call(type.represent) === '[object Function]') {\n          _result = type.represent(object, style);\n        } else if (_hasOwnProperty.call(type.represent, style)) {\n          _result = type.represent[style](object, style);\n        } else {\n          throw new exception('!<' + type.tag + '> tag resolver accepts not \"' + style + '\" style');\n        }\n\n        state.dump = _result;\n      }\n\n      return true;\n    }\n  }\n\n  return false;\n}\n\n// Serializes `object` and writes it to global `result`.\n// Returns true on success, or false on invalid object.\n//\nfunction writeNode(state, level, object, block, compact, iskey, isblockseq) {\n  state.tag = null;\n  state.dump = object;\n\n  if (!detectType(state, object, false)) {\n    detectType(state, object, true);\n  }\n\n  var type = _toString.call(state.dump);\n  var inblock = block;\n  var tagStr;\n\n  if (block) {\n    block = (state.flowLevel < 0 || state.flowLevel > level);\n  }\n\n  var objectOrArray = type === '[object Object]' || type === '[object Array]',\n      duplicateIndex,\n      duplicate;\n\n  if (objectOrArray) {\n    duplicateIndex = state.duplicates.indexOf(object);\n    duplicate = duplicateIndex !== -1;\n  }\n\n  if ((state.tag !== null && state.tag !== '?') || duplicate || (state.indent !== 2 && level > 0)) {\n    compact = false;\n  }\n\n  if (duplicate && state.usedDuplicates[duplicateIndex]) {\n    state.dump = '*ref_' + duplicateIndex;\n  } else {\n    if (objectOrArray && duplicate && !state.usedDuplicates[duplicateIndex]) {\n      state.usedDuplicates[duplicateIndex] = true;\n    }\n    if (type === '[object Object]') {\n      if (block && (Object.keys(state.dump).length !== 0)) {\n        writeBlockMapping(state, level, state.dump, compact);\n        if (duplicate) {\n          state.dump = '&ref_' + duplicateIndex + state.dump;\n        }\n      } else {\n        writeFlowMapping(state, level, state.dump);\n        if (duplicate) {\n          state.dump = '&ref_' + duplicateIndex + ' ' + state.dump;\n        }\n      }\n    } else if (type === '[object Array]') {\n      if (block && (state.dump.length !== 0)) {\n        if (state.noArrayIndent && !isblockseq && level > 0) {\n          writeBlockSequence(state, level - 1, state.dump, compact);\n        } else {\n          writeBlockSequence(state, level, state.dump, compact);\n        }\n        if (duplicate) {\n          state.dump = '&ref_' + duplicateIndex + state.dump;\n        }\n      } else {\n        writeFlowSequence(state, level, state.dump);\n        if (duplicate) {\n          state.dump = '&ref_' + duplicateIndex + ' ' + state.dump;\n        }\n      }\n    } else if (type === '[object String]') {\n      if (state.tag !== '?') {\n        writeScalar(state, state.dump, level, iskey, inblock);\n      }\n    } else if (type === '[object Undefined]') {\n      return false;\n    } else {\n      if (state.skipInvalid) return false;\n      throw new exception('unacceptable kind of an object to dump ' + type);\n    }\n\n    if (state.tag !== null && state.tag !== '?') {\n      // Need to encode all characters except those allowed by the spec:\n      //\n      // [35] ns-dec-digit    ::=  [#x30-#x39] /* 0-9 */\n      // [36] ns-hex-digit    ::=  ns-dec-digit\n      //                         | [#x41-#x46] /* A-F */ | [#x61-#x66] /* a-f */\n      // [37] ns-ascii-letter ::=  [#x41-#x5A] /* A-Z */ | [#x61-#x7A] /* a-z */\n      // [38] ns-word-char    ::=  ns-dec-digit | ns-ascii-letter | “-”\n      // [39] ns-uri-char     ::=  “%” ns-hex-digit ns-hex-digit | ns-word-char | “#”\n      //                         | “;” | “/” | “?” | “:” | “@” | “&” | “=” | “+” | “$” | “,”\n      //                         | “_” | “.” | “!” | “~” | “*” | “'” | “(” | “)” | “[” | “]”\n      //\n      // Also need to encode '!' because it has special meaning (end of tag prefix).\n      //\n      tagStr = encodeURI(\n        state.tag[0] === '!' ? state.tag.slice(1) : state.tag\n      ).replace(/!/g, '%21');\n\n      if (state.tag[0] === '!') {\n        tagStr = '!' + tagStr;\n      } else if (tagStr.slice(0, 18) === 'tag:yaml.org,2002:') {\n        tagStr = '!!' + tagStr.slice(18);\n      } else {\n        tagStr = '!<' + tagStr + '>';\n      }\n\n      state.dump = tagStr + ' ' + state.dump;\n    }\n  }\n\n  return true;\n}\n\nfunction getDuplicateReferences(object, state) {\n  var objects = [],\n      duplicatesIndexes = [],\n      index,\n      length;\n\n  inspectNode(object, objects, duplicatesIndexes);\n\n  for (index = 0, length = duplicatesIndexes.length; index < length; index += 1) {\n    state.duplicates.push(objects[duplicatesIndexes[index]]);\n  }\n  state.usedDuplicates = new Array(length);\n}\n\nfunction inspectNode(object, objects, duplicatesIndexes) {\n  var objectKeyList,\n      index,\n      length;\n\n  if (object !== null && typeof object === 'object') {\n    index = objects.indexOf(object);\n    if (index !== -1) {\n      if (duplicatesIndexes.indexOf(index) === -1) {\n        duplicatesIndexes.push(index);\n      }\n    } else {\n      objects.push(object);\n\n      if (Array.isArray(object)) {\n        for (index = 0, length = object.length; index < length; index += 1) {\n          inspectNode(object[index], objects, duplicatesIndexes);\n        }\n      } else {\n        objectKeyList = Object.keys(object);\n\n        for (index = 0, length = objectKeyList.length; index < length; index += 1) {\n          inspectNode(object[objectKeyList[index]], objects, duplicatesIndexes);\n        }\n      }\n    }\n  }\n}\n\nfunction dump$1(input, options) {\n  options = options || {};\n\n  var state = new State(options);\n\n  if (!state.noRefs) getDuplicateReferences(input, state);\n\n  var value = input;\n\n  if (state.replacer) {\n    value = state.replacer.call({ '': value }, '', value);\n  }\n\n  if (writeNode(state, 0, value, true, true)) return state.dump + '\\n';\n\n  return '';\n}\n\nvar dump_1 = dump$1;\n\nvar dumper = {\n\tdump: dump_1\n};\n\nfunction renamed(from, to) {\n  return function () {\n    throw new Error('Function yaml.' + from + ' is removed in js-yaml 4. ' +\n      'Use yaml.' + to + ' instead, which is now safe by default.');\n  };\n}\n\n\nvar Type                = type;\nvar Schema              = schema;\nvar FAILSAFE_SCHEMA     = failsafe;\nvar JSON_SCHEMA         = json;\nvar CORE_SCHEMA         = core;\nvar DEFAULT_SCHEMA      = _default;\nvar load                = loader.load;\nvar loadAll             = loader.loadAll;\nvar dump                = dumper.dump;\nvar YAMLException       = exception;\n\n// Re-export all types in case user wants to create custom schema\nvar types = {\n  binary:    binary,\n  float:     float,\n  map:       map,\n  null:      _null,\n  pairs:     pairs,\n  set:       set,\n  timestamp: timestamp,\n  bool:      bool,\n  int:       int,\n  merge:     merge,\n  omap:      omap,\n  seq:       seq,\n  str:       str\n};\n\n// Removed functions from JS-YAML 3.0.x\nvar safeLoad            = renamed('safeLoad', 'load');\nvar safeLoadAll         = renamed('safeLoadAll', 'loadAll');\nvar safeDump            = renamed('safeDump', 'dump');\n\nvar jsYaml = {\n\tType: Type,\n\tSchema: Schema,\n\tFAILSAFE_SCHEMA: FAILSAFE_SCHEMA,\n\tJSON_SCHEMA: JSON_SCHEMA,\n\tCORE_SCHEMA: CORE_SCHEMA,\n\tDEFAULT_SCHEMA: DEFAULT_SCHEMA,\n\tload: load,\n\tloadAll: loadAll,\n\tdump: dump,\n\tYAMLException: YAMLException,\n\ttypes: types,\n\tsafeLoad: safeLoad,\n\tsafeLoadAll: safeLoadAll,\n\tsafeDump: safeDump\n};\n\nexport default jsYaml;\nexport { CORE_SCHEMA, DEFAULT_SCHEMA, FAILSAFE_SCHEMA, JSON_SCHEMA, Schema, Type, YAMLException, dump, load, loadAll, safeDump, safeLoad, safeLoadAll, types };\n","import yaml from \"js-yaml\";\n\nexport async function readYaml(url) {\n  try {\n    const response = await fetch(url);\n    const yamlData = await response.text();\n    const yamlObject = yaml.load(yamlData);\n    window.arguments = yamlObject;\n    return yamlObject;\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nconst LETTERS = 'abcdefghijklmnopqrstuvwxyz';\n\nexport function twoLetterPair(num){\n  let rtn_list = []; \n  let letters = LETTERS.split('').filter(l => !'oil'.includes(l))\n  letters.forEach(function(first) {\n    letters.forEach(function(second) {\n      const pair = `${first},${second}`;\n      if (rtn_list.indexOf(pair) === -1 && first !== second){\n        rtn_list.push(pair)\n      }\n    });\n  });\n  \n  rtn_list = rtn_list.sort(() => 0.5 - Math.random())\n  return rtn_list.slice(0, num)\n}\n\nexport function checkEmpty(obj){\n  if (obj === undefined) {\n    return true\n  } else if (obj.constructor.name === 'Array'){\n    if (obj.length === 0) {\n      return true\n    } else {\n      return obj.every(x => x === null)\n    } \n  } else if (typeof obj === 'string') {\n    return obj === \"\"\n  }\n}\n\nexport function downloadCSV({csv, filename}) {\n  let csvFile, downloadLink;\n  csvFile = new Blob([csv], {type: \"text/csv\"});\n  downloadLink = document.createElement(\"a\");\n  downloadLink.download = filename;\n  downloadLink.href = window.URL.createObjectURL(csvFile);\n  downloadLink.style.display = \"none\";\n  document.body.appendChild(downloadLink);\n  downloadLink.click();\n};\n\nexport function prettyPrint(obj) {\n  console.log(JSON.stringify(obj,null,'\\t'))\n};\n\nexport function convertToCSV(arr) {\n  const array = [Object.keys(arr[0])].concat(arr)\n\n  return array.map(it => {\n    return Object.values(it).toString()\n  }).join('\\n')\n};\n\nexport function countDownTimer(tag) {\n  let input = document.getElementById(tag);\n  let seconds = parseInt(input.innerHTML || 5);\n  let timer = setInterval(function() {\n    seconds--;\n    if (seconds < 0) {\n      clearInterval(timer);\n    } else {\n      input.innerHTML = `${seconds} sec`;\n    }\n  }, 1000);\n};\n\n\nexport function renderPlugin(obj, dict, group, func){\n  obj.type = dict[obj.type];\n  if (group){\n    obj.pages = [\"\".concat(obj.pages[0], obj.groups[group], obj.pages[1])];\n    delete obj[group];\n  };\n  if (func)\n    obj.on_start = func;\n  return obj\n}\n\nexport const partialFunc = (func, ...args) => {\n  return (...rest) => {\n    if ((typeof func === \"function\") && (/^\\s*class\\s+/.test(func.toString()))) {\n      return new func(...rest, ...args);\n    }\n    return func(...rest, ...args);\n  };\n};\n\nexport function createTable(dataList, keyList) {\n  // Calculate statistics for each column\n  const stats = {};\n  dataList.forEach(data => {\n    Object.keys(data).forEach(key => {\n      if (keyList.includes(key) && typeof data[key] === 'number') {\n        if (!stats[key]) {\n          stats[key] = {\n            sum: 0,\n            count: 0,\n            mean: 0,\n            variance: 0,\n            stdDev: 0,\n            min: data[key],\n            max: data[key]\n          };\n        }\n        const val = data[key];\n        stats[key].sum += val;\n        stats[key].count++;\n        stats[key].mean = stats[key].sum / stats[key].count;\n        stats[key].variance += (val - stats[key].mean) ** 2;\n        stats[key].stdDev = Math.sqrt(stats[key].variance / stats[key].count);\n        if (val < stats[key].min) {\n          stats[key].min = val;\n        }\n        if (val > stats[key].max) {\n          stats[key].max = val;\n        }\n      }\n    });\n  });\n\n  // Create table element and header row\n  const table = document.createElement('table');\n  const headerRow = table.insertRow();\n  const header = Object.keys(stats); header.unshift('stats')\n  header.forEach(key => {\n    const th = document.createElement('th'); th.textContent = key;\n    headerRow.appendChild(th);\n  });\n\n  // Add statistsisc below\n  const dataRows = [];\n  ['mean','stdDev','min','max'].forEach(stat => {\n    const tr = table.insertRow();\n    Object.entries(stats).forEach(([col, data], index) => {\n      if (index == 0){\n        const td = tr.insertCell(); td.textContent=stat\n      }\n      const td = tr.insertCell();\n      td.textContent = data[stat].toFixed(2);\n    });\n    dataRows.push(tr);\n  });\n\n  // We return only the mean to each recorded measures\n  const mean = Object.entries(stats).reduce(\n    (d, [k, stat]) => {\n      d[k] = stat.mean;\n      return d\n    }, {}\n  );\n\n  return table;\n}\n\n\nexport function fullScreenHandler(){\n  if (!document.fullscreenElement){\n    alert(\"You leave the fullscreen mode, please go to full screen\");\n  }\n}","import { ParameterType } from 'jspsych';\n\nconst info = {\r\n    name: \"html-keyboard-response\",\r\n    parameters: {\r\n        /**\r\n         * The HTML string to be displayed.\r\n         */\r\n        stimulus: {\r\n            type: ParameterType.HTML_STRING,\r\n            pretty_name: \"Stimulus\",\r\n            default: undefined,\r\n        },\r\n        /**\r\n         * Array containing the key(s) the subject is allowed to press to respond to the stimulus.\r\n         */\r\n        choices: {\r\n            type: ParameterType.KEYS,\r\n            pretty_name: \"Choices\",\r\n            default: \"ALL_KEYS\",\r\n        },\r\n        /**\r\n         * Any content here will be displayed below the stimulus.\r\n         */\r\n        prompt: {\r\n            type: ParameterType.HTML_STRING,\r\n            pretty_name: \"Prompt\",\r\n            default: null,\r\n        },\r\n        /**\r\n         * How long to show the stimulus.\r\n         */\r\n        stimulus_duration: {\r\n            type: ParameterType.INT,\r\n            pretty_name: \"Stimulus duration\",\r\n            default: null,\r\n        },\r\n        /**\r\n         * How long to show trial before it ends.\r\n         */\r\n        trial_duration: {\r\n            type: ParameterType.INT,\r\n            pretty_name: \"Trial duration\",\r\n            default: null,\r\n        },\r\n        /**\r\n         * If true, trial will end when subject makes a response.\r\n         */\r\n        response_ends_trial: {\r\n            type: ParameterType.BOOL,\r\n            pretty_name: \"Response ends trial\",\r\n            default: true,\r\n        },\r\n    },\r\n};\r\n/**\r\n * **html-keyboard-response**\r\n *\r\n * jsPsych plugin for displaying a stimulus and getting a keyboard response\r\n *\r\n * @author Josh de Leeuw\r\n * @see {@link https://www.jspsych.org/plugins/jspsych-html-keyboard-response/ html-keyboard-response plugin documentation on jspsych.org}\r\n */\r\nclass HtmlKeyboardResponsePlugin {\r\n    constructor(jsPsych) {\r\n        this.jsPsych = jsPsych;\r\n    }\r\n    trial(display_element, trial) {\r\n        var new_html = '<div id=\"jspsych-html-keyboard-response-stimulus\">' + trial.stimulus + \"</div>\";\r\n        // add prompt\r\n        if (trial.prompt !== null) {\r\n            new_html += trial.prompt;\r\n        }\r\n        // draw\r\n        display_element.innerHTML = new_html;\r\n        // store response\r\n        var response = {\r\n            rt: null,\r\n            key: null,\r\n        };\r\n        // function to end trial when it is time\r\n        const end_trial = () => {\r\n            // kill any remaining setTimeout handlers\r\n            this.jsPsych.pluginAPI.clearAllTimeouts();\r\n            // kill keyboard listeners\r\n            if (typeof keyboardListener !== \"undefined\") {\r\n                this.jsPsych.pluginAPI.cancelKeyboardResponse(keyboardListener);\r\n            }\r\n            // gather the data to store for the trial\r\n            var trial_data = {\r\n                rt: response.rt,\r\n                stimulus: trial.stimulus,\r\n                response: response.key,\r\n            };\r\n            // clear the display\r\n            display_element.innerHTML = \"\";\r\n            // move on to the next trial\r\n            this.jsPsych.finishTrial(trial_data);\r\n        };\r\n        // function to handle responses by the subject\r\n        var after_response = (info) => {\r\n            // after a valid response, the stimulus will have the CSS class 'responded'\r\n            // which can be used to provide visual feedback that a response was recorded\r\n            display_element.querySelector(\"#jspsych-html-keyboard-response-stimulus\").className +=\r\n                \" responded\";\r\n            // only record the first response\r\n            if (response.key == null) {\r\n                response = info;\r\n            }\r\n            if (trial.response_ends_trial) {\r\n                end_trial();\r\n            }\r\n        };\r\n        // start the response listener\r\n        if (trial.choices != \"NO_KEYS\") {\r\n            var keyboardListener = this.jsPsych.pluginAPI.getKeyboardResponse({\r\n                callback_function: after_response,\r\n                valid_responses: trial.choices,\r\n                rt_method: \"performance\",\r\n                persist: false,\r\n                allow_held_key: false,\r\n            });\r\n        }\r\n        // hide stimulus if stimulus_duration is set\r\n        if (trial.stimulus_duration !== null) {\r\n            this.jsPsych.pluginAPI.setTimeout(() => {\r\n                display_element.querySelector(\"#jspsych-html-keyboard-response-stimulus\").style.visibility = \"hidden\";\r\n            }, trial.stimulus_duration);\r\n        }\r\n        // end trial if trial_duration is set\r\n        if (trial.trial_duration !== null) {\r\n            this.jsPsych.pluginAPI.setTimeout(end_trial, trial.trial_duration);\r\n        }\r\n    }\r\n    simulate(trial, simulation_mode, simulation_options, load_callback) {\r\n        if (simulation_mode == \"data-only\") {\r\n            load_callback();\r\n            this.simulate_data_only(trial, simulation_options);\r\n        }\r\n        if (simulation_mode == \"visual\") {\r\n            this.simulate_visual(trial, simulation_options, load_callback);\r\n        }\r\n    }\r\n    create_simulation_data(trial, simulation_options) {\r\n        const default_data = {\r\n            stimulus: trial.stimulus,\r\n            rt: this.jsPsych.randomization.sampleExGaussian(500, 50, 1 / 150, true),\r\n            response: this.jsPsych.pluginAPI.getValidKey(trial.choices),\r\n        };\r\n        const data = this.jsPsych.pluginAPI.mergeSimulationData(default_data, simulation_options);\r\n        this.jsPsych.pluginAPI.ensureSimulationDataConsistency(trial, data);\r\n        return data;\r\n    }\r\n    simulate_data_only(trial, simulation_options) {\r\n        const data = this.create_simulation_data(trial, simulation_options);\r\n        this.jsPsych.finishTrial(data);\r\n    }\r\n    simulate_visual(trial, simulation_options, load_callback) {\r\n        const data = this.create_simulation_data(trial, simulation_options);\r\n        const display_element = this.jsPsych.getDisplayElement();\r\n        this.trial(display_element, trial);\r\n        load_callback();\r\n        if (data.rt !== null) {\r\n            this.jsPsych.pluginAPI.pressKey(data.response, data.rt);\r\n        }\r\n    }\r\n}\r\nHtmlKeyboardResponsePlugin.info = info;\n\nexport { HtmlKeyboardResponsePlugin as default };\n//# sourceMappingURL=index.js.map\n","import { ParameterType } from 'jspsych';\n\nconst info = {\r\n    name: \"preload\",\r\n    parameters: {\r\n        /** Whether or not to automatically preload any media files based on the timeline passed to jsPsych.run. */\r\n        auto_preload: {\r\n            type: ParameterType.BOOL,\r\n            pretty_name: \"Auto-preload\",\r\n            default: false,\r\n        },\r\n        /** A timeline of trials to automatically preload. If one or more trial objects is provided in the timeline array, then the plugin will attempt to preload the media files used in the trial(s). */\r\n        trials: {\r\n            type: ParameterType.TIMELINE,\r\n            pretty_name: \"Trials\",\r\n            default: [],\r\n        },\r\n        /**\r\n         * Array with one or more image files to load. This parameter is often used in cases where media files cannot#\r\n         * be automatically preloaded based on the timeline, e.g. because the media files are passed into an image plugin/parameter with\r\n         * timeline variables or dynamic parameters, or because the image is embedded in an HTML string.\r\n         */\r\n        images: {\r\n            type: ParameterType.STRING,\r\n            pretty_name: \"Images\",\r\n            default: [],\r\n            array: true,\r\n        },\r\n        /**\r\n         * Array with one or more audio files to load. This parameter is often used in cases where media files cannot\r\n         * be automatically preloaded based on the timeline, e.g. because the media files are passed into an audio plugin/parameter with\r\n         * timeline variables or dynamic parameters, or because the audio is embedded in an HTML string.\r\n         */\r\n        audio: {\r\n            type: ParameterType.STRING,\r\n            pretty_name: \"Audio\",\r\n            default: [],\r\n            array: true,\r\n        },\r\n        /**\r\n         * Array with one or more video files to load. This parameter is often used in cases where media files cannot\r\n         * be automatically preloaded based on the timeline, e.g. because the media files are passed into a video plugin/parameter with\r\n         * timeline variables or dynamic parameters, or because the video is embedded in an HTML string.\r\n         */\r\n        video: {\r\n            type: ParameterType.STRING,\r\n            pretty_name: \"Video\",\r\n            default: [],\r\n            array: true,\r\n        },\r\n        /** HTML-formatted message to be shown above the progress bar while the files are loading. */\r\n        message: {\r\n            type: ParameterType.HTML_STRING,\r\n            pretty_name: \"Message\",\r\n            default: null,\r\n        },\r\n        /** Whether or not to show the loading progress bar. */\r\n        show_progress_bar: {\r\n            type: ParameterType.BOOL,\r\n            pretty_name: \"Show progress bar\",\r\n            default: true,\r\n        },\r\n        /**\r\n         * Whether or not to continue with the experiment if a loading error occurs. If false, then if a loading error occurs,\r\n         * the error_message will be shown on the page and the trial will not end. If true, then if if a loading error occurs, the trial will end\r\n         * and preloading failure will be logged in the trial data.\r\n         */\r\n        continue_after_error: {\r\n            type: ParameterType.BOOL,\r\n            pretty_name: \"Continue after error\",\r\n            default: false,\r\n        },\r\n        /** Error message to show on the page in case of any loading errors. This parameter is only relevant when continue_after_error is false. */\r\n        error_message: {\r\n            type: ParameterType.HTML_STRING,\r\n            pretty_name: \"Error message\",\r\n            default: \"The experiment failed to load.\",\r\n        },\r\n        /**\r\n         * Whether or not to show a detailed error message on the page. If true, then detailed error messages will be shown on the\r\n         * page for all files that failed to load, along with the general error_message. This parameter is only relevant when continue_after_error is false.\r\n         */\r\n        show_detailed_errors: {\r\n            type: ParameterType.BOOL,\r\n            pretty_name: \"Show detailed errors\",\r\n            default: false,\r\n        },\r\n        /**\r\n         * The maximum amount of time that the plugin should wait before stopping the preload and either ending the trial\r\n         * (if continue_after_error is true) or stopping the experiment with an error message (if continue_after_error is false).\r\n         * If null, the plugin will wait indefintely for the files to load.\r\n         */\r\n        max_load_time: {\r\n            type: ParameterType.INT,\r\n            pretty_name: \"Max load time\",\r\n            default: null,\r\n        },\r\n        /** Function to be called after a file fails to load. The function takes the file name as its only argument. */\r\n        on_error: {\r\n            type: ParameterType.FUNCTION,\r\n            pretty_name: \"On error\",\r\n            default: null,\r\n        },\r\n        /** Function to be called after a file loads successfully. The function takes the file name as its only argument. */\r\n        on_success: {\r\n            type: ParameterType.FUNCTION,\r\n            pretty_name: \"On success\",\r\n            default: null,\r\n        },\r\n    },\r\n};\r\n/**\r\n * **preload**\r\n *\r\n * jsPsych plugin for preloading image, audio, and video files\r\n *\r\n * @author Becky Gilbert\r\n * @see {@link https://www.jspsych.org/plugins/jspsych-preload/ preload plugin documentation on jspsych.org}\r\n */\r\nclass PreloadPlugin {\r\n    constructor(jsPsych) {\r\n        this.jsPsych = jsPsych;\r\n    }\r\n    trial(display_element, trial) {\r\n        var success = null;\r\n        var timeout = false;\r\n        var failed_images = [];\r\n        var failed_audio = [];\r\n        var failed_video = [];\r\n        var detailed_errors = [];\r\n        var in_safe_mode = this.jsPsych.getSafeModeStatus();\r\n        // create list of media to preload //\r\n        var images = [];\r\n        var audio = [];\r\n        var video = [];\r\n        if (trial.auto_preload) {\r\n            var experiment_timeline = this.jsPsych.getTimeline();\r\n            var auto_preload = this.jsPsych.pluginAPI.getAutoPreloadList(experiment_timeline);\r\n            images = images.concat(auto_preload.images);\r\n            audio = audio.concat(auto_preload.audio);\r\n            video = video.concat(auto_preload.video);\r\n        }\r\n        if (trial.trials.length > 0) {\r\n            var trial_preloads = this.jsPsych.pluginAPI.getAutoPreloadList(trial.trials);\r\n            images = images.concat(trial_preloads.images);\r\n            audio = audio.concat(trial_preloads.audio);\r\n            video = video.concat(trial_preloads.video);\r\n        }\r\n        images = images.concat(trial.images);\r\n        audio = audio.concat(trial.audio);\r\n        video = video.concat(trial.video);\r\n        images = this.jsPsych.utils.unique(images.flat());\r\n        audio = this.jsPsych.utils.unique(audio.flat());\r\n        video = this.jsPsych.utils.unique(video.flat());\r\n        if (in_safe_mode) {\r\n            // don't preload video if in safe mode (experiment is running via file protocol)\r\n            video = [];\r\n        }\r\n        // render display of message and progress bar\r\n        var html = \"\";\r\n        if (trial.message !== null) {\r\n            html += trial.message;\r\n        }\r\n        if (trial.show_progress_bar) {\r\n            html += `\n            <div id='jspsych-loading-progress-bar-container' style='height: 10px; width: 300px; background-color: #ddd; margin: auto;'>\n              <div id='jspsych-loading-progress-bar' style='height: 10px; width: 0%; background-color: #777;'></div>\n            </div>`;\r\n        }\r\n        display_element.innerHTML = html;\r\n        const update_loading_progress_bar = () => {\r\n            loaded++;\r\n            if (trial.show_progress_bar) {\r\n                var percent_loaded = (loaded / total_n) * 100;\r\n                var preload_progress_bar = display_element.querySelector(\"#jspsych-loading-progress-bar\");\r\n                if (preload_progress_bar !== null) {\r\n                    preload_progress_bar.style.width = percent_loaded + \"%\";\r\n                }\r\n            }\r\n        };\r\n        // called if all files load successfully\r\n        const on_success = () => {\r\n            if (typeof timeout !== \"undefined\" && timeout === false) {\r\n                // clear timeout immediately after finishing, to handle race condition with max_load_time\r\n                this.jsPsych.pluginAPI.clearAllTimeouts();\r\n                // need to call cancel preload function to clear global jsPsych preload_request list, even when they've all succeeded\r\n                this.jsPsych.pluginAPI.cancelPreloads();\r\n                success = true;\r\n                end_trial();\r\n            }\r\n        };\r\n        // called if all_files haven't finished loading when max_load_time is reached\r\n        const on_timeout = () => {\r\n            this.jsPsych.pluginAPI.cancelPreloads();\r\n            if (typeof success !== \"undefined\" && (success === false || success === null)) {\r\n                timeout = true;\r\n                if (loaded_success < total_n) {\r\n                    success = false;\r\n                }\r\n                after_error(\"timeout\"); // call trial's on_error event handler here, in case loading timed out with no file errors\r\n                detailed_errors.push(\"<p><strong>Loading timed out.</strong><br>\" +\r\n                    \"Consider compressing your stimuli files, loading your files in smaller batches,<br>\" +\r\n                    \"and/or increasing the <i>max_load_time</i> parameter.</p>\");\r\n                if (trial.continue_after_error) {\r\n                    end_trial();\r\n                }\r\n                else {\r\n                    stop_with_error_message();\r\n                }\r\n            }\r\n        };\r\n        const stop_with_error_message = () => {\r\n            this.jsPsych.pluginAPI.clearAllTimeouts();\r\n            this.jsPsych.pluginAPI.cancelPreloads();\r\n            // show error message\r\n            display_element.innerHTML = trial.error_message;\r\n            // show detailed errors, if necessary\r\n            if (trial.show_detailed_errors) {\r\n                display_element.innerHTML += \"<p><strong>Error details:</strong></p>\";\r\n                detailed_errors.forEach((e) => {\r\n                    display_element.innerHTML += e;\r\n                });\r\n            }\r\n        };\r\n        const end_trial = () => {\r\n            // clear timeout again when end_trial is called, to handle race condition with max_load_time\r\n            this.jsPsych.pluginAPI.clearAllTimeouts();\r\n            var trial_data = {\r\n                success: success,\r\n                timeout: timeout,\r\n                failed_images: failed_images,\r\n                failed_audio: failed_audio,\r\n                failed_video: failed_video,\r\n            };\r\n            // clear the display\r\n            display_element.innerHTML = \"\";\r\n            this.jsPsych.finishTrial(trial_data);\r\n        };\r\n        // do preloading\r\n        if (trial.max_load_time !== null) {\r\n            this.jsPsych.pluginAPI.setTimeout(on_timeout, trial.max_load_time);\r\n        }\r\n        var total_n = images.length + audio.length + video.length;\r\n        var loaded = 0; // success or error count\r\n        var loaded_success = 0; // success count\r\n        if (total_n == 0) {\r\n            on_success();\r\n        }\r\n        else {\r\n            const load_video = (cb) => {\r\n                this.jsPsych.pluginAPI.preloadVideo(video, cb, file_loading_success, file_loading_error);\r\n            };\r\n            const load_audio = (cb) => {\r\n                this.jsPsych.pluginAPI.preloadAudio(audio, cb, file_loading_success, file_loading_error);\r\n            };\r\n            const load_images = (cb) => {\r\n                this.jsPsych.pluginAPI.preloadImages(images, cb, file_loading_success, file_loading_error);\r\n            };\r\n            if (video.length > 0) {\r\n                load_video(() => { });\r\n            }\r\n            if (audio.length > 0) {\r\n                load_audio(() => { });\r\n            }\r\n            if (images.length > 0) {\r\n                load_images(() => { });\r\n            }\r\n        }\r\n        // helper functions and callbacks\r\n        // called when a single file loading fails\r\n        function file_loading_error(e) {\r\n            // update progress bar even if there's an error\r\n            update_loading_progress_bar();\r\n            // change success flag after first file loading error\r\n            if (success == null) {\r\n                success = false;\r\n            }\r\n            // add file to failed media list\r\n            var source = \"unknown file\";\r\n            if (e.source) {\r\n                source = e.source;\r\n            }\r\n            if (e.error && e.error.path && e.error.path.length > 0) {\r\n                if (e.error.path[0].localName == \"img\") {\r\n                    failed_images.push(source);\r\n                }\r\n                else if (e.error.path[0].localName == \"audio\") {\r\n                    failed_audio.push(source);\r\n                }\r\n                else if (e.error.path[0].localName == \"video\") {\r\n                    failed_video.push(source);\r\n                }\r\n            }\r\n            // construct detailed error message\r\n            var err_msg = \"<p><strong>Error loading file: \" + source + \"</strong><br>\";\r\n            if (e.error.statusText) {\r\n                err_msg += \"File request response status: \" + e.error.statusText + \"<br>\";\r\n            }\r\n            if (e.error == \"404\") {\r\n                err_msg += \"404 - file not found.<br>\";\r\n            }\r\n            if (typeof e.error.loaded !== \"undefined\" &&\r\n                e.error.loaded !== null &&\r\n                e.error.loaded !== 0) {\r\n                err_msg += e.error.loaded + \" bytes transferred.\";\r\n            }\r\n            else {\r\n                err_msg +=\r\n                    \"File did not begin loading. Check that file path is correct and reachable by the browser,<br>\" +\r\n                        \"and that loading is not blocked by cross-origin resource sharing (CORS) errors.\";\r\n            }\r\n            err_msg += \"</p>\";\r\n            detailed_errors.push(err_msg);\r\n            // call trial's on_error function\r\n            after_error(source);\r\n            // if this is the last file\r\n            if (loaded == total_n) {\r\n                if (trial.continue_after_error) {\r\n                    // if continue_after_error is false, then stop with an error\r\n                    end_trial();\r\n                }\r\n                else {\r\n                    // otherwise end the trial and continue\r\n                    stop_with_error_message();\r\n                }\r\n            }\r\n        }\r\n        // called when a single file loads successfully\r\n        function file_loading_success(source) {\r\n            update_loading_progress_bar();\r\n            // call trial's on_success function\r\n            after_success(source);\r\n            loaded_success++;\r\n            if (loaded_success == total_n) {\r\n                // if this is the last file and all loaded successfully, call success function\r\n                on_success();\r\n            }\r\n            else if (loaded == total_n) {\r\n                // if this is the last file and there was at least one error\r\n                if (trial.continue_after_error) {\r\n                    // end the trial and continue with experiment\r\n                    end_trial();\r\n                }\r\n                else {\r\n                    // if continue_after_error is false, then stop with an error\r\n                    stop_with_error_message();\r\n                }\r\n            }\r\n        }\r\n        function after_error(source) {\r\n            // call on_error function and pass file name\r\n            if (trial.on_error !== null) {\r\n                trial.on_error(source);\r\n            }\r\n        }\r\n        function after_success(source) {\r\n            // call on_success function and pass file name\r\n            if (trial.on_success !== null) {\r\n                trial.on_success(source);\r\n            }\r\n        }\r\n    }\r\n    simulate(trial, simulation_mode, simulation_options, load_callback) {\r\n        if (simulation_mode == \"data-only\") {\r\n            load_callback();\r\n            this.simulate_data_only(trial, simulation_options);\r\n        }\r\n        if (simulation_mode == \"visual\") {\r\n            this.simulate_visual(trial, simulation_options, load_callback);\r\n        }\r\n    }\r\n    create_simulation_data(trial, simulation_options) {\r\n        const default_data = {\r\n            success: true,\r\n            timeout: false,\r\n            failed_images: [],\r\n            failed_audio: [],\r\n            failed_video: [],\r\n        };\r\n        const data = this.jsPsych.pluginAPI.mergeSimulationData(default_data, simulation_options);\r\n        return data;\r\n    }\r\n    simulate_data_only(trial, simulation_options) {\r\n        const data = this.create_simulation_data(trial, simulation_options);\r\n        this.jsPsych.finishTrial(data);\r\n    }\r\n    simulate_visual(trial, simulation_options, load_callback) {\r\n        const display_element = this.jsPsych.getDisplayElement();\r\n        this.trial(display_element, trial);\r\n        load_callback();\r\n    }\r\n}\r\nPreloadPlugin.info = info;\n\nexport { PreloadPlugin as default };\n//# sourceMappingURL=index.js.map\n","import { ParameterType } from 'jspsych';\n\nconst info = {\r\n    name: \"survey-multi-select\",\r\n    parameters: {\r\n        /** Array containing one or more objects with parameters for the question(s) that should be shown on the page. */\r\n        questions: {\r\n            type: ParameterType.COMPLEX,\r\n            array: true,\r\n            pretty_name: \"Questions\",\r\n            nested: {\r\n                /** Question prompt. */\r\n                prompt: {\r\n                    type: ParameterType.HTML_STRING,\r\n                    pretty_name: \"Prompt\",\r\n                    default: undefined,\r\n                },\r\n                /** Array of multiple select options for this question. */\r\n                options: {\r\n                    type: ParameterType.STRING,\r\n                    pretty_name: \"Options\",\r\n                    array: true,\r\n                    default: undefined,\r\n                },\r\n                /** If true, then the question will be centered and options will be displayed horizontally. */\r\n                horizontal: {\r\n                    type: ParameterType.BOOL,\r\n                    pretty_name: \"Horizontal\",\r\n                    default: false,\r\n                },\r\n                /** Whether or not a response to this question must be given in order to continue. */\r\n                required: {\r\n                    type: ParameterType.BOOL,\r\n                    pretty_name: \"Required\",\r\n                    default: false,\r\n                },\r\n                /** Name of the question in the trial data. If no name is given, the questions are named Q0, Q1, etc. */\r\n                name: {\r\n                    type: ParameterType.STRING,\r\n                    pretty_name: \"Question Name\",\r\n                    default: \"\",\r\n                },\r\n            },\r\n        },\r\n        /** If true, the order of the questions in the 'questions' array will be randomized. */\r\n        randomize_question_order: {\r\n            type: ParameterType.BOOL,\r\n            pretty_name: \"Randomize Question Order\",\r\n            default: false,\r\n        },\r\n        /** HTML-formatted string to display at top of the page above all of the questions. */\r\n        preamble: {\r\n            type: ParameterType.HTML_STRING,\r\n            pretty_name: \"Preamble\",\r\n            default: null,\r\n        },\r\n        /** Label of the button to submit responses. */\r\n        button_label: {\r\n            type: ParameterType.STRING,\r\n            pretty_name: \"Button label\",\r\n            default: \"Continue\",\r\n        },\r\n        /** Message that will be displayed if one or more required questions is not answered. */\r\n        required_message: {\r\n            type: ParameterType.STRING,\r\n            pretty_name: \"Required message\",\r\n            default: \"You must choose at least one response for this question\",\r\n        },\r\n        /** Setting this to true will enable browser auto-complete or auto-fill for the form. */\r\n        autocomplete: {\r\n            type: ParameterType.BOOL,\r\n            pretty_name: \"Allow autocomplete\",\r\n            default: false,\r\n        },\r\n    },\r\n};\r\n/**\r\n * **survey-multi-select**\r\n *\r\n * jsPsych plugin for presenting multiple choice survey questions with the ability to respond with more than one option\r\n *\r\n * @see {@link https://www.jspsych.org/plugins/jspsych-survey-multi-select/ survey-multi-select plugin documentation on jspsych.org}\r\n */\r\nclass SurveyMultiSelectPlugin {\r\n    constructor(jsPsych) {\r\n        this.jsPsych = jsPsych;\r\n    }\r\n    trial(display_element, trial) {\r\n        var plugin_id_name = \"jspsych-survey-multi-select\";\r\n        var plugin_id_selector = \"#\" + plugin_id_name;\r\n        const _join = (...args) => args.join(\"-\");\r\n        // inject CSS for trial\r\n        var cssstr = \".jspsych-survey-multi-select-question { margin-top: 2em; margin-bottom: 2em; text-align: left; }\" +\r\n            \".jspsych-survey-multi-select-text span.required {color: darkred;}\" +\r\n            \".jspsych-survey-multi-select-horizontal .jspsych-survey-multi-select-text {  text-align: center;}\" +\r\n            \".jspsych-survey-multi-select-option { line-height: 2; }\" +\r\n            \".jspsych-survey-multi-select-horizontal .jspsych-survey-multi-select-option {  display: inline-block;  margin-left: 1em;  margin-right: 1em;  vertical-align: top;}\" +\r\n            \"label.jspsych-survey-multi-select-text input[type='checkbox'] {margin-right: 1em;}\";\r\n        display_element.innerHTML =\r\n            '<style id=\"jspsych-survey-multi-select-css\">' + cssstr + \"</style>\";\r\n        // form element\r\n        var trial_form_id = _join(plugin_id_name, \"form\");\r\n        display_element.innerHTML += '<form id=\"' + trial_form_id + '\"></form>';\r\n        var trial_form = display_element.querySelector(\"#\" + trial_form_id);\r\n        if (!trial.autocomplete) {\r\n            trial_form.setAttribute(\"autocomplete\", \"off\");\r\n        }\r\n        // show preamble text\r\n        var preamble_id_name = _join(plugin_id_name, \"preamble\");\r\n        if (trial.preamble !== null) {\r\n            trial_form.innerHTML +=\r\n                '<div id=\"' +\r\n                    preamble_id_name +\r\n                    '\" class=\"' +\r\n                    preamble_id_name +\r\n                    '\">' +\r\n                    trial.preamble +\r\n                    \"</div>\";\r\n        }\r\n        // generate question order. this is randomized here as opposed to randomizing the order of trial.questions\r\n        // so that the data are always associated with the same question regardless of order\r\n        var question_order = [];\r\n        for (var i = 0; i < trial.questions.length; i++) {\r\n            question_order.push(i);\r\n        }\r\n        if (trial.randomize_question_order) {\r\n            question_order = this.jsPsych.randomization.shuffle(question_order);\r\n        }\r\n        // add multiple-select questions\r\n        for (var i = 0; i < trial.questions.length; i++) {\r\n            var question = trial.questions[question_order[i]];\r\n            var question_id = question_order[i];\r\n            // create question container\r\n            var question_classes = [_join(plugin_id_name, \"question\")];\r\n            if (question.horizontal) {\r\n                question_classes.push(_join(plugin_id_name, \"horizontal\"));\r\n            }\r\n            trial_form.innerHTML +=\r\n                '<div id=\"' +\r\n                    _join(plugin_id_name, question_id) +\r\n                    '\" data-name=\"' +\r\n                    question.name +\r\n                    '\" class=\"' +\r\n                    question_classes.join(\" \") +\r\n                    '\"></div>';\r\n            var question_selector = _join(plugin_id_selector, question_id);\r\n            // add question text\r\n            display_element.querySelector(question_selector).innerHTML +=\r\n                '<p id=\"survey-question\" class=\"' +\r\n                    plugin_id_name +\r\n                    '-text survey-multi-select\">' +\r\n                    question.prompt +\r\n                    \"</p>\";\r\n            // create option check boxes\r\n            for (var j = 0; j < question.options.length; j++) {\r\n                var option_id_name = _join(plugin_id_name, \"option\", question_id, j);\r\n                // add check box container\r\n                display_element.querySelector(question_selector).innerHTML +=\r\n                    '<div id=\"' + option_id_name + '\" class=\"' + _join(plugin_id_name, \"option\") + '\"></div>';\r\n                // add label and question text\r\n                var form = document.getElementById(option_id_name);\r\n                var input_name = _join(plugin_id_name, \"response\", question_id);\r\n                var input_id = _join(plugin_id_name, \"response\", question_id, j);\r\n                var label = document.createElement(\"label\");\r\n                label.setAttribute(\"class\", plugin_id_name + \"-text\");\r\n                label.innerHTML = question.options[j];\r\n                label.setAttribute(\"for\", input_id);\r\n                // create checkboxes\r\n                var input = document.createElement(\"input\");\r\n                input.setAttribute(\"type\", \"checkbox\");\r\n                input.setAttribute(\"name\", input_name);\r\n                input.setAttribute(\"id\", input_id);\r\n                input.setAttribute(\"value\", question.options[j]);\r\n                form.appendChild(label);\r\n                label.insertBefore(input, label.firstChild);\r\n            }\r\n        }\r\n        // add submit button\r\n        trial_form.innerHTML += '<div class=\"fail-message\"></div>';\r\n        trial_form.innerHTML +=\r\n            '<button id=\"' +\r\n                plugin_id_name +\r\n                '-next\" class=\"' +\r\n                plugin_id_name +\r\n                ' jspsych-btn\">' +\r\n                trial.button_label +\r\n                \"</button>\";\r\n        // validation check on the data first for custom validation handling\r\n        // then submit the form\r\n        display_element\r\n            .querySelector(\"#jspsych-survey-multi-select-next\")\r\n            .addEventListener(\"click\", () => {\r\n            for (var i = 0; i < trial.questions.length; i++) {\r\n                if (trial.questions[i].required) {\r\n                    if (display_element.querySelector(\"#jspsych-survey-multi-select-\" + i + \" input:checked\") == null) {\r\n                        display_element\r\n                            .querySelector(\"#jspsych-survey-multi-select-\" + i + \" input\")\r\n                            .setCustomValidity(trial.required_message);\r\n                    }\r\n                    else {\r\n                        display_element\r\n                            .querySelector(\"#jspsych-survey-multi-select-\" + i + \" input\")\r\n                            .setCustomValidity(\"\");\r\n                    }\r\n                }\r\n            }\r\n            trial_form.reportValidity();\r\n        });\r\n        trial_form.addEventListener(\"submit\", (event) => {\r\n            event.preventDefault();\r\n            // measure response time\r\n            var endTime = performance.now();\r\n            var response_time = Math.round(endTime - startTime);\r\n            // create object to hold responses\r\n            var question_data = {};\r\n            for (var index = 0; index < trial.questions.length; index++) {\r\n                var match = display_element.querySelector(\"#jspsych-survey-multi-select-\" + index);\r\n                var val = [];\r\n                var inputboxes = match.querySelectorAll(\"input[type=checkbox]:checked\");\r\n                for (var j = 0; j < inputboxes.length; j++) {\r\n                    var currentChecked = inputboxes[j];\r\n                    val.push(currentChecked.value);\r\n                }\r\n                var id = \"Q\" + index;\r\n                var obje = {};\r\n                var name = id;\r\n                if (match.attributes[\"data-name\"].value !== \"\") {\r\n                    name = match.attributes[\"data-name\"].value;\r\n                }\r\n                obje[name] = val;\r\n                Object.assign(question_data, obje);\r\n                if (val.length == 0) ;\r\n            }\r\n            // save data\r\n            var trial_data = {\r\n                rt: response_time,\r\n                response: question_data,\r\n                question_order: question_order,\r\n            };\r\n            display_element.innerHTML = \"\";\r\n            // next trial\r\n            this.jsPsych.finishTrial(trial_data);\r\n        });\r\n        var startTime = performance.now();\r\n    }\r\n    simulate(trial, simulation_mode, simulation_options, load_callback) {\r\n        if (simulation_mode == \"data-only\") {\r\n            load_callback();\r\n            this.simulate_data_only(trial, simulation_options);\r\n        }\r\n        if (simulation_mode == \"visual\") {\r\n            this.simulate_visual(trial, simulation_options, load_callback);\r\n        }\r\n    }\r\n    create_simulation_data(trial, simulation_options) {\r\n        const question_data = {};\r\n        let rt = 1000;\r\n        for (const q of trial.questions) {\r\n            let n_answers;\r\n            if (q.required) {\r\n                n_answers = this.jsPsych.randomization.randomInt(1, q.options.length);\r\n            }\r\n            else {\r\n                n_answers = this.jsPsych.randomization.randomInt(0, q.options.length);\r\n            }\r\n            const name = q.name ? q.name : `Q${trial.questions.indexOf(q)}`;\r\n            const selections = this.jsPsych.randomization.sampleWithoutReplacement(q.options, n_answers);\r\n            question_data[name] = selections;\r\n            rt += this.jsPsych.randomization.sampleExGaussian(1500, 400, 1 / 200, true);\r\n        }\r\n        const default_data = {\r\n            response: question_data,\r\n            rt: rt,\r\n            question_order: trial.randomize_question_order\r\n                ? this.jsPsych.randomization.shuffle([...Array(trial.questions.length).keys()])\r\n                : [...Array(trial.questions.length).keys()],\r\n        };\r\n        const data = this.jsPsych.pluginAPI.mergeSimulationData(default_data, simulation_options);\r\n        this.jsPsych.pluginAPI.ensureSimulationDataConsistency(trial, data);\r\n        return data;\r\n    }\r\n    simulate_data_only(trial, simulation_options) {\r\n        const data = this.create_simulation_data(trial, simulation_options);\r\n        this.jsPsych.finishTrial(data);\r\n    }\r\n    simulate_visual(trial, simulation_options, load_callback) {\r\n        const data = this.create_simulation_data(trial, simulation_options);\r\n        const display_element = this.jsPsych.getDisplayElement();\r\n        this.trial(display_element, trial);\r\n        load_callback();\r\n        const answers = Object.entries(data.response);\r\n        for (let i = 0; i < answers.length; i++) {\r\n            for (const a of answers[i][1]) {\r\n                this.jsPsych.pluginAPI.clickTarget(display_element.querySelector(`#jspsych-survey-multi-select-response-${i}-${trial.questions[i].options.indexOf(a)}`), ((data.rt - 1000) / answers.length) * (i + 1));\r\n            }\r\n        }\r\n        this.jsPsych.pluginAPI.clickTarget(display_element.querySelector(\"#jspsych-survey-multi-select-next\"), data.rt);\r\n    }\r\n}\r\nSurveyMultiSelectPlugin.info = info;\n\nexport { SurveyMultiSelectPlugin as default };\n//# sourceMappingURL=index.js.map\n","import { ParameterType } from 'jspsych';\n\nconst info = {\r\n    name: \"fullscreen\",\r\n    parameters: {\r\n        /** If true, experiment will enter fullscreen mode. If false, the browser will exit fullscreen mode. */\r\n        fullscreen_mode: {\r\n            type: ParameterType.BOOL,\r\n            pretty_name: \"Fullscreen mode\",\r\n            default: true,\r\n            array: false,\r\n        },\r\n        /** HTML content to display above the button to enter fullscreen mode */\r\n        message: {\r\n            type: ParameterType.HTML_STRING,\r\n            pretty_name: \"Message\",\r\n            default: \"<p>The experiment will switch to full screen mode when you press the button below</p>\",\r\n            array: false,\r\n        },\r\n        /** The text that appears on the button to enter fullscreen */\r\n        button_label: {\r\n            type: ParameterType.STRING,\r\n            pretty_name: \"Button label\",\r\n            default: \"Continue\",\r\n            array: false,\r\n        },\r\n        /** The length of time to delay after entering fullscreen mode before ending the trial. */\r\n        delay_after: {\r\n            type: ParameterType.INT,\r\n            pretty_name: \"Delay after\",\r\n            default: 1000,\r\n            array: false,\r\n        },\r\n    },\r\n};\r\n/**\r\n * **fullscreen**\r\n *\r\n * jsPsych plugin for toggling fullscreen mode in the browser\r\n *\r\n * @author Josh de Leeuw\r\n * @see {@link https://www.jspsych.org/plugins/jspsych-fullscreen/ fullscreen plugin documentation on jspsych.org}\r\n */\r\nclass FullscreenPlugin {\r\n    constructor(jsPsych) {\r\n        this.jsPsych = jsPsych;\r\n    }\r\n    trial(display_element, trial) {\r\n        // check if keys are allowed in fullscreen mode\r\n        var keyboardNotAllowed = typeof Element !== \"undefined\" && \"ALLOW_KEYBOARD_INPUT\" in Element;\r\n        if (keyboardNotAllowed) {\r\n            // This is Safari, and keyboard events will be disabled. Don't allow fullscreen here.\r\n            // do something else?\r\n            this.endTrial(display_element, false, trial);\r\n        }\r\n        else {\r\n            if (trial.fullscreen_mode) {\r\n                this.showDisplay(display_element, trial);\r\n            }\r\n            else {\r\n                this.exitFullScreen();\r\n                this.endTrial(display_element, true, trial);\r\n            }\r\n        }\r\n    }\r\n    showDisplay(display_element, trial) {\r\n        display_element.innerHTML = `\n      ${trial.message}\n      <button id=\"jspsych-fullscreen-btn\" class=\"jspsych-btn\">${trial.button_label}</button>\n    `;\r\n        display_element.querySelector(\"#jspsych-fullscreen-btn\").addEventListener(\"click\", () => {\r\n            this.enterFullScreen();\r\n            this.endTrial(display_element, true, trial);\r\n        });\r\n    }\r\n    endTrial(display_element, success, trial) {\r\n        display_element.innerHTML = \"\";\r\n        this.jsPsych.pluginAPI.setTimeout(() => {\r\n            var trial_data = {\r\n                success: success,\r\n            };\r\n            this.jsPsych.finishTrial(trial_data);\r\n        }, trial.delay_after);\r\n    }\r\n    enterFullScreen() {\r\n        var element = document.documentElement;\r\n        if (element.requestFullscreen) {\r\n            element.requestFullscreen();\r\n        }\r\n        else if (element[\"mozRequestFullScreen\"]) {\r\n            element[\"mozRequestFullScreen\"]();\r\n        }\r\n        else if (element[\"webkitRequestFullscreen\"]) {\r\n            element[\"webkitRequestFullscreen\"]();\r\n        }\r\n        else if (element[\"msRequestFullscreen\"]) {\r\n            element[\"msRequestFullscreen\"]();\r\n        }\r\n    }\r\n    exitFullScreen() {\r\n        if (document.fullscreenElement ||\r\n            document[\"mozFullScreenElement\"] ||\r\n            document[\"webkitFullscreenElement\"]) {\r\n            if (document.exitFullscreen) {\r\n                document.exitFullscreen();\r\n            }\r\n            else if (document[\"msExitFullscreen\"]) {\r\n                document[\"msExitFullscreen\"]();\r\n            }\r\n            else if (document[\"mozCancelFullScreen\"]) {\r\n                document[\"mozCancelFullScreen\"]();\r\n            }\r\n            else if (document[\"webkitExitFullscreen\"]) {\r\n                document[\"webkitExitFullscreen\"]();\r\n            }\r\n        }\r\n    }\r\n    simulate(trial, simulation_mode, simulation_options, load_callback) {\r\n        if (simulation_mode == \"data-only\") {\r\n            load_callback();\r\n            this.simulate_data_only(trial, simulation_options);\r\n        }\r\n        if (simulation_mode == \"visual\") {\r\n            this.simulate_visual(trial, simulation_options, load_callback);\r\n        }\r\n    }\r\n    create_simulation_data(trial, simulation_options) {\r\n        const default_data = {\r\n            success: true,\r\n        };\r\n        const data = this.jsPsych.pluginAPI.mergeSimulationData(default_data, simulation_options);\r\n        return data;\r\n    }\r\n    simulate_data_only(trial, simulation_options) {\r\n        const data = this.create_simulation_data(trial, simulation_options);\r\n        this.jsPsych.finishTrial(data);\r\n    }\r\n    simulate_visual(trial, simulation_options, load_callback) {\r\n        const data = this.create_simulation_data(trial, simulation_options);\r\n        const display_element = this.jsPsych.getDisplayElement();\r\n        if (data.success === false) {\r\n            this.endTrial(display_element, false, trial);\r\n        }\r\n        else {\r\n            this.trial(display_element, trial);\r\n            load_callback();\r\n            this.jsPsych.pluginAPI.clickTarget(display_element.querySelector(\"#jspsych-fullscreen-btn\"), this.jsPsych.randomization.sampleExGaussian(1000, 100, 1 / 200, true));\r\n        }\r\n    }\r\n}\r\nFullscreenPlugin.info = info;\n\nexport { FullscreenPlugin as default };\n//# sourceMappingURL=index.js.map\n","import { ParameterType } from 'jspsych';\n\nconst info = {\r\n    name: \"instructions\",\r\n    parameters: {\r\n        /** Each element of the array is the HTML-formatted content for a single page. */\r\n        pages: {\r\n            type: ParameterType.HTML_STRING,\r\n            pretty_name: \"Pages\",\r\n            default: undefined,\r\n            array: true,\r\n        },\r\n        /** The key the subject can press in order to advance to the next page. */\r\n        key_forward: {\r\n            type: ParameterType.KEY,\r\n            pretty_name: \"Key forward\",\r\n            default: \"ArrowRight\",\r\n        },\r\n        /** The key that the subject can press to return to the previous page. */\r\n        key_backward: {\r\n            type: ParameterType.KEY,\r\n            pretty_name: \"Key backward\",\r\n            default: \"ArrowLeft\",\r\n        },\r\n        /** If true, the subject can return to the previous page of the instructions. */\r\n        allow_backward: {\r\n            type: ParameterType.BOOL,\r\n            pretty_name: \"Allow backward\",\r\n            default: true,\r\n        },\r\n        /** If true, the subject can use keyboard keys to navigate the pages. */\r\n        allow_keys: {\r\n            type: ParameterType.BOOL,\r\n            pretty_name: \"Allow keys\",\r\n            default: true,\r\n        },\r\n        /** If true, then a \"Previous\" and \"Next\" button will be displayed beneath the instructions. */\r\n        show_clickable_nav: {\r\n            type: ParameterType.BOOL,\r\n            pretty_name: \"Show clickable nav\",\r\n            default: false,\r\n        },\r\n        /** If true, and clickable navigation is enabled, then Page x/y will be shown between the nav buttons. */\r\n        show_page_number: {\r\n            type: ParameterType.BOOL,\r\n            pretty_name: \"Show page number\",\r\n            default: false,\r\n        },\r\n        /** The text that appears before x/y (current/total) pages displayed with show_page_number. */\r\n        page_label: {\r\n            type: ParameterType.STRING,\r\n            pretty_name: \"Page label\",\r\n            default: \"Page\",\r\n        },\r\n        /** The text that appears on the button to go backwards. */\r\n        button_label_previous: {\r\n            type: ParameterType.STRING,\r\n            pretty_name: \"Button label previous\",\r\n            default: \"Previous\",\r\n        },\r\n        /** The text that appears on the button to go forwards. */\r\n        button_label_next: {\r\n            type: ParameterType.STRING,\r\n            pretty_name: \"Button label next\",\r\n            default: \"Next\",\r\n        },\r\n    },\r\n};\r\n/**\r\n * **instructions**\r\n *\r\n * jsPsych plugin to display text (including HTML-formatted strings) during the experiment.\r\n * Use it to show a set of pages that participants can move forward/backward through.\r\n * Page numbers can be displayed to help with navigation by setting show_page_number to true.\r\n *\r\n * @author Josh de Leeuw\r\n * @see {@link https://www.jspsych.org/plugins/jspsych-instructions/ instructions plugin documentation on jspsych.org}\r\n */\r\nclass InstructionsPlugin {\r\n    constructor(jsPsych) {\r\n        this.jsPsych = jsPsych;\r\n    }\r\n    trial(display_element, trial) {\r\n        var current_page = 0;\r\n        var view_history = [];\r\n        var start_time = performance.now();\r\n        var last_page_update_time = start_time;\r\n        function btnListener(evt) {\r\n            evt.target.removeEventListener(\"click\", btnListener);\r\n            if (this.id === \"jspsych-instructions-back\") {\r\n                back();\r\n            }\r\n            else if (this.id === \"jspsych-instructions-next\") {\r\n                next();\r\n            }\r\n        }\r\n        function show_current_page() {\r\n            var html = trial.pages[current_page];\r\n            var pagenum_display = \"\";\r\n            if (trial.show_page_number) {\r\n                pagenum_display =\r\n                    \"<span style='margin: 0 1em;' class='\" +\r\n                        \"jspsych-instructions-pagenum'>\" +\r\n                        trial.page_label +\r\n                        \" \" +\r\n                        (current_page + 1) +\r\n                        \"/\" +\r\n                        trial.pages.length +\r\n                        \"</span>\";\r\n            }\r\n            if (trial.show_clickable_nav) {\r\n                var nav_html = \"<div class='jspsych-instructions-nav' style='padding: 10px 0px;'>\";\r\n                if (trial.allow_backward) {\r\n                    var allowed = current_page > 0 ? \"\" : \"disabled='disabled'\";\r\n                    nav_html +=\r\n                        \"<button id='jspsych-instructions-back' class='jspsych-btn' style='margin-right: 5px;' \" +\r\n                            allowed +\r\n                            \">&lt; \" +\r\n                            trial.button_label_previous +\r\n                            \"</button>\";\r\n                }\r\n                if (trial.pages.length > 1 && trial.show_page_number) {\r\n                    nav_html += pagenum_display;\r\n                }\r\n                nav_html +=\r\n                    \"<button id='jspsych-instructions-next' class='jspsych-btn'\" +\r\n                        \"style='margin-left: 5px;'>\" +\r\n                        trial.button_label_next +\r\n                        \" &gt;</button></div>\";\r\n                html += nav_html;\r\n                display_element.innerHTML = html;\r\n                if (current_page != 0 && trial.allow_backward) {\r\n                    display_element\r\n                        .querySelector(\"#jspsych-instructions-back\")\r\n                        .addEventListener(\"click\", btnListener);\r\n                }\r\n                display_element\r\n                    .querySelector(\"#jspsych-instructions-next\")\r\n                    .addEventListener(\"click\", btnListener);\r\n            }\r\n            else {\r\n                if (trial.show_page_number && trial.pages.length > 1) {\r\n                    // page numbers for non-mouse navigation\r\n                    html += \"<div class='jspsych-instructions-pagenum'>\" + pagenum_display + \"</div>\";\r\n                }\r\n                display_element.innerHTML = html;\r\n            }\r\n        }\r\n        function next() {\r\n            add_current_page_to_view_history();\r\n            current_page++;\r\n            // if done, finish up...\r\n            if (current_page >= trial.pages.length) {\r\n                endTrial();\r\n            }\r\n            else {\r\n                show_current_page();\r\n            }\r\n        }\r\n        function back() {\r\n            add_current_page_to_view_history();\r\n            current_page--;\r\n            show_current_page();\r\n        }\r\n        function add_current_page_to_view_history() {\r\n            var current_time = performance.now();\r\n            var page_view_time = Math.round(current_time - last_page_update_time);\r\n            view_history.push({\r\n                page_index: current_page,\r\n                viewing_time: page_view_time,\r\n            });\r\n            last_page_update_time = current_time;\r\n        }\r\n        const endTrial = () => {\r\n            if (trial.allow_keys) {\r\n                this.jsPsych.pluginAPI.cancelKeyboardResponse(keyboard_listener);\r\n            }\r\n            display_element.innerHTML = \"\";\r\n            var trial_data = {\r\n                view_history: view_history,\r\n                rt: Math.round(performance.now() - start_time),\r\n            };\r\n            this.jsPsych.finishTrial(trial_data);\r\n        };\r\n        const after_response = (info) => {\r\n            // have to reinitialize this instead of letting it persist to prevent accidental skips of pages by holding down keys too long\r\n            keyboard_listener = this.jsPsych.pluginAPI.getKeyboardResponse({\r\n                callback_function: after_response,\r\n                valid_responses: [trial.key_forward, trial.key_backward],\r\n                rt_method: \"performance\",\r\n                persist: false,\r\n                allow_held_key: false,\r\n            });\r\n            // check if key is forwards or backwards and update page\r\n            if (this.jsPsych.pluginAPI.compareKeys(info.key, trial.key_backward)) {\r\n                if (current_page !== 0 && trial.allow_backward) {\r\n                    back();\r\n                }\r\n            }\r\n            if (this.jsPsych.pluginAPI.compareKeys(info.key, trial.key_forward)) {\r\n                next();\r\n            }\r\n        };\r\n        show_current_page();\r\n        if (trial.allow_keys) {\r\n            var keyboard_listener = this.jsPsych.pluginAPI.getKeyboardResponse({\r\n                callback_function: after_response,\r\n                valid_responses: [trial.key_forward, trial.key_backward],\r\n                rt_method: \"performance\",\r\n                persist: false,\r\n            });\r\n        }\r\n    }\r\n    simulate(trial, simulation_mode, simulation_options, load_callback) {\r\n        if (simulation_mode == \"data-only\") {\r\n            load_callback();\r\n            this.simulate_data_only(trial, simulation_options);\r\n        }\r\n        if (simulation_mode == \"visual\") {\r\n            this.simulate_visual(trial, simulation_options, load_callback);\r\n        }\r\n    }\r\n    create_simulation_data(trial, simulation_options) {\r\n        let curr_page = 0;\r\n        let rt = 0;\r\n        const view_history = [];\r\n        while (curr_page !== trial.pages.length) {\r\n            const view_time = this.jsPsych.randomization.sampleExGaussian(3000, 300, 1 / 300);\r\n            view_history.push({ page_index: curr_page, viewing_time: view_time });\r\n            rt += view_time;\r\n            if (curr_page == 0 || !trial.allow_backward) {\r\n                curr_page++;\r\n            }\r\n            else {\r\n                if (this.jsPsych.randomization.sampleBernoulli(0.9) == 1) {\r\n                    curr_page++;\r\n                }\r\n                else {\r\n                    curr_page--;\r\n                }\r\n            }\r\n        }\r\n        const default_data = {\r\n            view_history: view_history,\r\n            rt: rt,\r\n        };\r\n        const data = this.jsPsych.pluginAPI.mergeSimulationData(default_data, simulation_options);\r\n        this.jsPsych.pluginAPI.ensureSimulationDataConsistency(trial, data);\r\n        return data;\r\n    }\r\n    simulate_data_only(trial, simulation_options) {\r\n        const data = this.create_simulation_data(trial, simulation_options);\r\n        this.jsPsych.finishTrial(data);\r\n    }\r\n    simulate_visual(trial, simulation_options, load_callback) {\r\n        const data = this.create_simulation_data(trial, simulation_options);\r\n        const display_element = this.jsPsych.getDisplayElement();\r\n        this.trial(display_element, trial);\r\n        load_callback();\r\n        const advance = (rt) => {\r\n            if (trial.allow_keys) {\r\n                this.jsPsych.pluginAPI.pressKey(trial.key_forward, rt);\r\n            }\r\n            else if (trial.show_clickable_nav) {\r\n                this.jsPsych.pluginAPI.clickTarget(display_element.querySelector(\"#jspsych-instructions-next\"), rt);\r\n            }\r\n        };\r\n        const backup = (rt) => {\r\n            if (trial.allow_keys) {\r\n                this.jsPsych.pluginAPI.pressKey(trial.key_backward, rt);\r\n            }\r\n            else if (trial.show_clickable_nav) {\r\n                this.jsPsych.pluginAPI.clickTarget(display_element.querySelector(\"#jspsych-instructions-back\"), rt);\r\n            }\r\n        };\r\n        let curr_page = 0;\r\n        let t = 0;\r\n        for (let i = 0; i < data.view_history.length; i++) {\r\n            if (i == data.view_history.length - 1) {\r\n                advance(t + data.view_history[i].viewing_time);\r\n            }\r\n            else {\r\n                if (data.view_history[i + 1].page_index > curr_page) {\r\n                    advance(t + data.view_history[i].viewing_time);\r\n                }\r\n                if (data.view_history[i + 1].page_index < curr_page) {\r\n                    backup(t + data.view_history[i].viewing_time);\r\n                }\r\n                t += data.view_history[i].viewing_time;\r\n                curr_page = data.view_history[i + 1].page_index;\r\n            }\r\n        }\r\n    }\r\n}\r\nInstructionsPlugin.info = info;\n\nexport { InstructionsPlugin as default };\n//# sourceMappingURL=index.js.map\n","import keyboardResponse from \"@jspsych/plugin-html-keyboard-response\"\nimport { ParameterType } from \"jspsych\";\nimport { countDownTimer, partialFunc } from \"./utils\";\n\nconst info = {\n    name: \"html-display-response\",\n    parameters: {\n        /**\n         * The HTML string to be displayed.\n         */\n        stimulus: {\n            type: ParameterType.HTML_STRING,\n            pretty_name: \"Stimulus\",\n            default: undefined,\n        },\n        /**\n         * Array containing the key(s) the subject is allowed to press to respond to the stimulus.\n         */\n        choices: {\n            type: ParameterType.KEYS,\n            pretty_name: \"Choices\",\n            default: \"ALL_KEYS\",\n        },\n        /**\n         * Any content here will be displayed below the stimulus.\n         */\n        prompt: {\n            type: ParameterType.HTML_STRING,\n            pretty_name: \"Prompt\",\n            default: null,\n        },\n        /**\n         * How long to show the stimulus.\n         */\n        stimulus_duration: {\n            type: ParameterType.INT,\n            pretty_name: \"Stimulus duration\",\n            default: null,\n        },\n        /**\n         * How long to show trial before it ends.\n         */\n        trial_duration: {\n            type: ParameterType.INT,\n            pretty_name: \"Trial duration\",\n            default: null,\n        },\n        /**\n         * If true, trial will end when subject makes a response.\n         */\n        response_ends_trial: {\n            type: ParameterType.BOOL,\n            pretty_name: \"Response ends trial\",\n            default: true,\n        },\n        /**\n         * How many recent keyboard presses are displayed\n         *      by default, no history is displayed\n         */\n        num_keypress_display: {\n            type: ParameterType.INT,\n            pretty_name: \"Keyboard presses number\",\n            default: 0,\n        },\n        /**\n         * The correct order of keyboard presses\n         */\n        remain_time_display: {\n            type: ParameterType.BOOL,\n            pretty_name: \"Buttom right will display the remaining time from trial duration\",\n            default: false,\n        },\n        /**\n         * Array of keyboard response callbacks\n         * Each of which is an Object which defines the following:\n         *      @param callback_function \n         *      @param accept_allkeys default: true\n         *      @param allow_held_key default: false\n         */\n        response_callbacks: {\n            type: ParameterType.FUNCTION,\n            pretty_name: \"Array of keyboard response callbacks\",\n            default: [],\n        }\n    }\n};\n\n\n\n/**\n * **An extension of keyboard response plugin**\n *\n * the purposes of this plugin are two folds:\n * 1) allow to collect multiple responses during one trial\n * 2) allow to display the last n keyboard presses\n * \n * @author Xiang Liu\n * @email dennisl@udel.edu\n */\nclass HtmlKeyboardDisplayResponsePlugin extends keyboardResponse {\n    /**\n     * \n     * @param {HTML string} stimulus    The html elements to be displayed.\n     * @param {string[]} choices        The array contains keys to respond to stimulus\n     * @param {HTML string} prompt           The content displayed below the stimulus (e.g., reminder)\n     * @param {numeric} stimulus_duration    How long to display the stimulus in milliseconds\n     * @param {numeric} trial_duration       How long will the trial wait for a keyboard response (inf if set to null)\n     * @param {boolean} response_ends_trial  Whether the trial ends immediately when a response is made\n     * @param {numeric} num_keypress_display How many recent keyboard presses are displayed\n     * @param {boolean} remain_time_display  Whether the remaining trial duration will be displayed in seconds\n     * @param {function[]} response_callbacks Some keyboard callbacks that are activated in each trial\n     */\n\n    trial(display_element, trial) {\n        var new_html = `\n        <div id=\"jspsych-html-keyboard-response-stimulus\" style=\"display: flex; flex-direction: column\"> \n            <h1 id=\"keypress-count\"></h2>\n            <table class=\"response-display-wrapper\">\n            <tr class=\"row-time\"> <td>time left: </td> <td><span id=\"keypress-timer\">${trial.trial_duration/1000} sec</span></td></tr>\n            <tr class=\"row-hist\"> <td>you typed: </td> <td> <ul id=\"keypress-hist\"> </ul></td></tr>\n            </table>\n        </div>`;\n        // add prompt\n        new_html += trial.prompt || \"\";\n        // draw\n        display_element.innerHTML = new_html;\n        // data saving\n        var response = {\n            rt_valid: null, rt_typed: null, typed: 0, score: 0,\n        };\n        // list of keyboard listener\n        var keyListeners = [], keysPressed = [];\n        // function to end trial when it is time\n        const end_trial = (trial_data) => {\n            // kill any remaining setTimeout handlers\n            this.jsPsych.pluginAPI.clearAllTimeouts();\n            // kill keyboard listeners\n            this.jsPsych.pluginAPI.cancelAllKeyboardResponses();\n            // gather the data to store for the trial\n            var trial_data = {\n                rt_valid: response.rt_valid,\n                rt_typed: response.rt_typed,\n                typed: response.typed,\n                score: response.score,\n                ...trial_data\n            };\n            // clear the display\n            display_element.innerHTML = \"\";\n            // move on to the next trial\n            this.jsPsych.finishTrial(trial_data);\n        };\n\n        // start a timer if necesary\n        if (trial.remain_time_display){\n            $('tr.row-time').css('visibility', 'visible');\n            countDownTimer('keypress-timer')\n        }\n\n        // make keyboard pressing history visible in HTML\n        if (trial.num_keypress_display > 0){\n            $('tr.row-hist').css('visibility', 'visible');\n        }\n        \n        // start the response listener\n        if (trial.choices != \"NO_KEYS\") {\n            $('.row-count').css('visibility', 'visible');\n            trial.response_callbacks().forEach((obj) => {\n                let counter = { i: 0};  //primitive doesn't work here\n                keyListeners.push(\n                    this.jsPsych.pluginAPI.getKeyboardResponse({\n                        callback_function: partialFunc(\n                            obj.callback_function, response, trial, \n                            keysPressed, counter, display_element, end_trial\n                        ),\n                        valid_responses: obj.accept_allkeys? \"ALL_KEYS\" : trial.choices,\n                        persist: !trial.response_ends_trial,\n                        allow_held_key: false,\n                        rt_method: \"performance\"\n                    })\n                );\n            });\n        };\n\n        // hide stimulus if stimulus_duration is set\n        if (trial.stimulus_duration !== null) {\n            this.jsPsych.pluginAPI.setTimeout(() => {\n                $('#jspsych-html-keyboard-response-stimulus').css('visibility', 'hidden')\n            }, trial.stimulus_duration);\n        };\n\n        // end trial if trial_duration is set\n        if (trial.trial_duration !== null) {\n            this.jsPsych.pluginAPI.setTimeout(end_trial, trial.trial_duration);\n        }\n    }\n}\nHtmlKeyboardDisplayResponsePlugin.info = info;\n\n\nexport { HtmlKeyboardDisplayResponsePlugin as default };","import { ParameterType } from 'jspsych';\n\nconst info = {\r\n    name: \"survey-multi-choice\",\r\n    parameters: {\r\n        /** Array containing one or more objects with parameters for the question(s) that should be shown on the page. */\r\n        questions: {\r\n            type: ParameterType.COMPLEX,\r\n            array: true,\r\n            pretty_name: \"Questions\",\r\n            nested: {\r\n                /** Question prompt. */\r\n                prompt: {\r\n                    type: ParameterType.HTML_STRING,\r\n                    pretty_name: \"Prompt\",\r\n                    default: undefined,\r\n                },\r\n                /** Array of multiple choice options for this question. */\r\n                options: {\r\n                    type: ParameterType.STRING,\r\n                    pretty_name: \"Options\",\r\n                    array: true,\r\n                    default: undefined,\r\n                },\r\n                /** Whether or not a response to this question must be given in order to continue. */\r\n                required: {\r\n                    type: ParameterType.BOOL,\r\n                    pretty_name: \"Required\",\r\n                    default: false,\r\n                },\r\n                /** If true, then the question will be centered and options will be displayed horizontally. */\r\n                horizontal: {\r\n                    type: ParameterType.BOOL,\r\n                    pretty_name: \"Horizontal\",\r\n                    default: false,\r\n                },\r\n                /** Name of the question in the trial data. If no name is given, the questions are named Q0, Q1, etc. */\r\n                name: {\r\n                    type: ParameterType.STRING,\r\n                    pretty_name: \"Question Name\",\r\n                    default: \"\",\r\n                },\r\n            },\r\n        },\r\n        /** If true, the order of the questions in the 'questions' array will be randomized. */\r\n        randomize_question_order: {\r\n            type: ParameterType.BOOL,\r\n            pretty_name: \"Randomize Question Order\",\r\n            default: false,\r\n        },\r\n        /** HTML-formatted string to display at top of the page above all of the questions. */\r\n        preamble: {\r\n            type: ParameterType.HTML_STRING,\r\n            pretty_name: \"Preamble\",\r\n            default: null,\r\n        },\r\n        /** Label of the button to submit responses. */\r\n        button_label: {\r\n            type: ParameterType.STRING,\r\n            pretty_name: \"Button label\",\r\n            default: \"Continue\",\r\n        },\r\n        /** Setting this to true will enable browser auto-complete or auto-fill for the form. */\r\n        autocomplete: {\r\n            type: ParameterType.BOOL,\r\n            pretty_name: \"Allow autocomplete\",\r\n            default: false,\r\n        },\r\n    },\r\n};\r\n/**\r\n * **survey-multi-choice**\r\n *\r\n * jsPsych plugin for presenting multiple choice survey questions\r\n *\r\n * @author Shane Martin\r\n * @see {@link https://www.jspsych.org/plugins/jspsych-survey-multi-choice/ survey-multi-choice plugin documentation on jspsych.org}\r\n */\r\nclass SurveyMultiChoicePlugin {\r\n    constructor(jsPsych) {\r\n        this.jsPsych = jsPsych;\r\n    }\r\n    trial(display_element, trial) {\r\n        var plugin_id_name = \"jspsych-survey-multi-choice\";\r\n        var html = \"\";\r\n        // inject CSS for trial\r\n        html += '<style id=\"jspsych-survey-multi-choice-css\">';\r\n        html +=\r\n            \".jspsych-survey-multi-choice-question { margin-top: 2em; margin-bottom: 2em; text-align: left; }\" +\r\n                \".jspsych-survey-multi-choice-text span.required {color: darkred;}\" +\r\n                \".jspsych-survey-multi-choice-horizontal .jspsych-survey-multi-choice-text {  text-align: center;}\" +\r\n                \".jspsych-survey-multi-choice-option { line-height: 2; }\" +\r\n                \".jspsych-survey-multi-choice-horizontal .jspsych-survey-multi-choice-option {  display: inline-block;  margin-left: 1em;  margin-right: 1em;  vertical-align: top;}\" +\r\n                \"label.jspsych-survey-multi-choice-text input[type='radio'] {margin-right: 1em;}\";\r\n        html += \"</style>\";\r\n        // show preamble text\r\n        if (trial.preamble !== null) {\r\n            html +=\r\n                '<div id=\"jspsych-survey-multi-choice-preamble\" class=\"jspsych-survey-multi-choice-preamble\">' +\r\n                    trial.preamble +\r\n                    \"</div>\";\r\n        }\r\n        // form element\r\n        if (trial.autocomplete) {\r\n            html += '<form id=\"jspsych-survey-multi-choice-form\">';\r\n        }\r\n        else {\r\n            html += '<form id=\"jspsych-survey-multi-choice-form\" autocomplete=\"off\">';\r\n        }\r\n        // generate question order. this is randomized here as opposed to randomizing the order of trial.questions\r\n        // so that the data are always associated with the same question regardless of order\r\n        var question_order = [];\r\n        for (var i = 0; i < trial.questions.length; i++) {\r\n            question_order.push(i);\r\n        }\r\n        if (trial.randomize_question_order) {\r\n            question_order = this.jsPsych.randomization.shuffle(question_order);\r\n        }\r\n        // add multiple-choice questions\r\n        for (var i = 0; i < trial.questions.length; i++) {\r\n            // get question based on question_order\r\n            var question = trial.questions[question_order[i]];\r\n            var question_id = question_order[i];\r\n            // create question container\r\n            var question_classes = [\"jspsych-survey-multi-choice-question\"];\r\n            if (question.horizontal) {\r\n                question_classes.push(\"jspsych-survey-multi-choice-horizontal\");\r\n            }\r\n            html +=\r\n                '<div id=\"jspsych-survey-multi-choice-' +\r\n                    question_id +\r\n                    '\" class=\"' +\r\n                    question_classes.join(\" \") +\r\n                    '\"  data-name=\"' +\r\n                    question.name +\r\n                    '\">';\r\n            // add question text\r\n            html += '<p class=\"jspsych-survey-multi-choice-text survey-multi-choice\">' + question.prompt;\r\n            if (question.required) {\r\n                html += \"<span class='required'>*</span>\";\r\n            }\r\n            html += \"</p>\";\r\n            // create option radio buttons\r\n            for (var j = 0; j < question.options.length; j++) {\r\n                // add label and question text\r\n                var option_id_name = \"jspsych-survey-multi-choice-option-\" + question_id + \"-\" + j;\r\n                var input_name = \"jspsych-survey-multi-choice-response-\" + question_id;\r\n                var input_id = \"jspsych-survey-multi-choice-response-\" + question_id + \"-\" + j;\r\n                var required_attr = question.required ? \"required\" : \"\";\r\n                // add radio button container\r\n                html += '<div id=\"' + option_id_name + '\" class=\"jspsych-survey-multi-choice-option\">';\r\n                html += '<label class=\"jspsych-survey-multi-choice-text\" for=\"' + input_id + '\">';\r\n                html +=\r\n                    '<input type=\"radio\" name=\"' +\r\n                        input_name +\r\n                        '\" id=\"' +\r\n                        input_id +\r\n                        '\" value=\"' +\r\n                        question.options[j] +\r\n                        '\" ' +\r\n                        required_attr +\r\n                        \"></input>\";\r\n                html += question.options[j] + \"</label>\";\r\n                html += \"</div>\";\r\n            }\r\n            html += \"</div>\";\r\n        }\r\n        // add submit button\r\n        html +=\r\n            '<input type=\"submit\" id=\"' +\r\n                plugin_id_name +\r\n                '-next\" class=\"' +\r\n                plugin_id_name +\r\n                ' jspsych-btn\"' +\r\n                (trial.button_label ? ' value=\"' + trial.button_label + '\"' : \"\") +\r\n                \"></input>\";\r\n        html += \"</form>\";\r\n        // render\r\n        display_element.innerHTML = html;\r\n        document.querySelector(\"form\").addEventListener(\"submit\", (event) => {\r\n            event.preventDefault();\r\n            // measure response time\r\n            var endTime = performance.now();\r\n            var response_time = Math.round(endTime - startTime);\r\n            // create object to hold responses\r\n            var question_data = {};\r\n            for (var i = 0; i < trial.questions.length; i++) {\r\n                var match = display_element.querySelector(\"#jspsych-survey-multi-choice-\" + i);\r\n                var id = \"Q\" + i;\r\n                var val;\r\n                if (match.querySelector(\"input[type=radio]:checked\") !== null) {\r\n                    val = match.querySelector(\"input[type=radio]:checked\").value;\r\n                }\r\n                else {\r\n                    val = \"\";\r\n                }\r\n                var obje = {};\r\n                var name = id;\r\n                if (match.attributes[\"data-name\"].value !== \"\") {\r\n                    name = match.attributes[\"data-name\"].value;\r\n                }\r\n                obje[name] = val;\r\n                Object.assign(question_data, obje);\r\n            }\r\n            // save data\r\n            var trial_data = {\r\n                rt: response_time,\r\n                response: question_data,\r\n                question_order: question_order,\r\n            };\r\n            display_element.innerHTML = \"\";\r\n            // next trial\r\n            this.jsPsych.finishTrial(trial_data);\r\n        });\r\n        var startTime = performance.now();\r\n    }\r\n    simulate(trial, simulation_mode, simulation_options, load_callback) {\r\n        if (simulation_mode == \"data-only\") {\r\n            load_callback();\r\n            this.simulate_data_only(trial, simulation_options);\r\n        }\r\n        if (simulation_mode == \"visual\") {\r\n            this.simulate_visual(trial, simulation_options, load_callback);\r\n        }\r\n    }\r\n    create_simulation_data(trial, simulation_options) {\r\n        const question_data = {};\r\n        let rt = 1000;\r\n        for (const q of trial.questions) {\r\n            const name = q.name ? q.name : `Q${trial.questions.indexOf(q)}`;\r\n            question_data[name] = this.jsPsych.randomization.sampleWithoutReplacement(q.options, 1)[0];\r\n            rt += this.jsPsych.randomization.sampleExGaussian(1500, 400, 1 / 200, true);\r\n        }\r\n        const default_data = {\r\n            response: question_data,\r\n            rt: rt,\r\n            question_order: trial.randomize_question_order\r\n                ? this.jsPsych.randomization.shuffle([...Array(trial.questions.length).keys()])\r\n                : [...Array(trial.questions.length).keys()],\r\n        };\r\n        const data = this.jsPsych.pluginAPI.mergeSimulationData(default_data, simulation_options);\r\n        this.jsPsych.pluginAPI.ensureSimulationDataConsistency(trial, data);\r\n        return data;\r\n    }\r\n    simulate_data_only(trial, simulation_options) {\r\n        const data = this.create_simulation_data(trial, simulation_options);\r\n        this.jsPsych.finishTrial(data);\r\n    }\r\n    simulate_visual(trial, simulation_options, load_callback) {\r\n        const data = this.create_simulation_data(trial, simulation_options);\r\n        const display_element = this.jsPsych.getDisplayElement();\r\n        this.trial(display_element, trial);\r\n        load_callback();\r\n        const answers = Object.entries(data.response);\r\n        for (let i = 0; i < answers.length; i++) {\r\n            this.jsPsych.pluginAPI.clickTarget(display_element.querySelector(`#jspsych-survey-multi-choice-response-${i}-${trial.questions[i].options.indexOf(answers[i][1])}`), ((data.rt - 1000) / answers.length) * (i + 1));\r\n        }\r\n        this.jsPsych.pluginAPI.clickTarget(display_element.querySelector(\"#jspsych-survey-multi-choice-next\"), data.rt);\r\n    }\r\n}\r\nSurveyMultiChoicePlugin.info = info;\n\nexport { SurveyMultiChoicePlugin as default };\n//# sourceMappingURL=index.js.map\n","import { ParameterType } from 'jspsych';\n\nconst info = {\r\n    name: \"html-button-response\",\r\n    parameters: {\r\n        /** The HTML string to be displayed */\r\n        stimulus: {\r\n            type: ParameterType.HTML_STRING,\r\n            pretty_name: \"Stimulus\",\r\n            default: undefined,\r\n        },\r\n        /** Array containing the label(s) for the button(s). */\r\n        choices: {\r\n            type: ParameterType.STRING,\r\n            pretty_name: \"Choices\",\r\n            default: undefined,\r\n            array: true,\r\n        },\r\n        /** The HTML for creating button. Can create own style. Use the \"%choice%\" string to indicate where the label from the choices parameter should be inserted. */\r\n        button_html: {\r\n            type: ParameterType.HTML_STRING,\r\n            pretty_name: \"Button HTML\",\r\n            default: '<button class=\"jspsych-btn\">%choice%</button>',\r\n            array: true,\r\n        },\r\n        /** Any content here will be displayed under the button(s). */\r\n        prompt: {\r\n            type: ParameterType.HTML_STRING,\r\n            pretty_name: \"Prompt\",\r\n            default: null,\r\n        },\r\n        /** How long to show the stimulus. */\r\n        stimulus_duration: {\r\n            type: ParameterType.INT,\r\n            pretty_name: \"Stimulus duration\",\r\n            default: null,\r\n        },\r\n        /** How long to show the trial. */\r\n        trial_duration: {\r\n            type: ParameterType.INT,\r\n            pretty_name: \"Trial duration\",\r\n            default: null,\r\n        },\r\n        /** The vertical margin of the button. */\r\n        margin_vertical: {\r\n            type: ParameterType.STRING,\r\n            pretty_name: \"Margin vertical\",\r\n            default: \"0px\",\r\n        },\r\n        /** The horizontal margin of the button. */\r\n        margin_horizontal: {\r\n            type: ParameterType.STRING,\r\n            pretty_name: \"Margin horizontal\",\r\n            default: \"8px\",\r\n        },\r\n        /** If true, then trial will end when user responds. */\r\n        response_ends_trial: {\r\n            type: ParameterType.BOOL,\r\n            pretty_name: \"Response ends trial\",\r\n            default: true,\r\n        },\r\n    },\r\n};\r\n/**\r\n * html-button-response\r\n * jsPsych plugin for displaying a stimulus and getting a button response\r\n * @author Josh de Leeuw\r\n * @see {@link https://www.jspsych.org/plugins/jspsych-html-button-response/ html-button-response plugin documentation on jspsych.org}\r\n */\r\nclass HtmlButtonResponsePlugin {\r\n    constructor(jsPsych) {\r\n        this.jsPsych = jsPsych;\r\n    }\r\n    trial(display_element, trial) {\r\n        // display stimulus\r\n        var html = '<div id=\"jspsych-html-button-response-stimulus\">' + trial.stimulus + \"</div>\";\r\n        //display buttons\r\n        var buttons = [];\r\n        if (Array.isArray(trial.button_html)) {\r\n            if (trial.button_html.length == trial.choices.length) {\r\n                buttons = trial.button_html;\r\n            }\r\n            else {\r\n                console.error(\"Error in html-button-response plugin. The length of the button_html array does not equal the length of the choices array\");\r\n            }\r\n        }\r\n        else {\r\n            for (var i = 0; i < trial.choices.length; i++) {\r\n                buttons.push(trial.button_html);\r\n            }\r\n        }\r\n        html += '<div id=\"jspsych-html-button-response-btngroup\">';\r\n        for (var i = 0; i < trial.choices.length; i++) {\r\n            var str = buttons[i].replace(/%choice%/g, trial.choices[i]);\r\n            html +=\r\n                '<div class=\"jspsych-html-button-response-button\" style=\"display: inline-block; margin:' +\r\n                    trial.margin_vertical +\r\n                    \" \" +\r\n                    trial.margin_horizontal +\r\n                    '\" id=\"jspsych-html-button-response-button-' +\r\n                    i +\r\n                    '\" data-choice=\"' +\r\n                    i +\r\n                    '\">' +\r\n                    str +\r\n                    \"</div>\";\r\n        }\r\n        html += \"</div>\";\r\n        //show prompt if there is one\r\n        if (trial.prompt !== null) {\r\n            html += trial.prompt;\r\n        }\r\n        display_element.innerHTML = html;\r\n        // start time\r\n        var start_time = performance.now();\r\n        // add event listeners to buttons\r\n        for (var i = 0; i < trial.choices.length; i++) {\r\n            display_element\r\n                .querySelector(\"#jspsych-html-button-response-button-\" + i)\r\n                .addEventListener(\"click\", (e) => {\r\n                var btn_el = e.currentTarget;\r\n                var choice = btn_el.getAttribute(\"data-choice\"); // don't use dataset for jsdom compatibility\r\n                after_response(choice);\r\n            });\r\n        }\r\n        // store response\r\n        var response = {\r\n            rt: null,\r\n            button: null,\r\n        };\r\n        // function to end trial when it is time\r\n        const end_trial = () => {\r\n            // kill any remaining setTimeout handlers\r\n            this.jsPsych.pluginAPI.clearAllTimeouts();\r\n            // gather the data to store for the trial\r\n            var trial_data = {\r\n                rt: response.rt,\r\n                stimulus: trial.stimulus,\r\n                response: response.button,\r\n            };\r\n            // clear the display\r\n            display_element.innerHTML = \"\";\r\n            // move on to the next trial\r\n            this.jsPsych.finishTrial(trial_data);\r\n        };\r\n        // function to handle responses by the subject\r\n        function after_response(choice) {\r\n            // measure rt\r\n            var end_time = performance.now();\r\n            var rt = Math.round(end_time - start_time);\r\n            response.button = parseInt(choice);\r\n            response.rt = rt;\r\n            // after a valid response, the stimulus will have the CSS class 'responded'\r\n            // which can be used to provide visual feedback that a response was recorded\r\n            display_element.querySelector(\"#jspsych-html-button-response-stimulus\").className +=\r\n                \" responded\";\r\n            // disable all the buttons after a response\r\n            var btns = document.querySelectorAll(\".jspsych-html-button-response-button button\");\r\n            for (var i = 0; i < btns.length; i++) {\r\n                //btns[i].removeEventListener('click');\r\n                btns[i].setAttribute(\"disabled\", \"disabled\");\r\n            }\r\n            if (trial.response_ends_trial) {\r\n                end_trial();\r\n            }\r\n        }\r\n        // hide image if timing is set\r\n        if (trial.stimulus_duration !== null) {\r\n            this.jsPsych.pluginAPI.setTimeout(() => {\r\n                display_element.querySelector(\"#jspsych-html-button-response-stimulus\").style.visibility = \"hidden\";\r\n            }, trial.stimulus_duration);\r\n        }\r\n        // end trial if time limit is set\r\n        if (trial.trial_duration !== null) {\r\n            this.jsPsych.pluginAPI.setTimeout(end_trial, trial.trial_duration);\r\n        }\r\n    }\r\n    simulate(trial, simulation_mode, simulation_options, load_callback) {\r\n        if (simulation_mode == \"data-only\") {\r\n            load_callback();\r\n            this.simulate_data_only(trial, simulation_options);\r\n        }\r\n        if (simulation_mode == \"visual\") {\r\n            this.simulate_visual(trial, simulation_options, load_callback);\r\n        }\r\n    }\r\n    create_simulation_data(trial, simulation_options) {\r\n        const default_data = {\r\n            stimulus: trial.stimulus,\r\n            rt: this.jsPsych.randomization.sampleExGaussian(500, 50, 1 / 150, true),\r\n            response: this.jsPsych.randomization.randomInt(0, trial.choices.length - 1),\r\n        };\r\n        const data = this.jsPsych.pluginAPI.mergeSimulationData(default_data, simulation_options);\r\n        this.jsPsych.pluginAPI.ensureSimulationDataConsistency(trial, data);\r\n        return data;\r\n    }\r\n    simulate_data_only(trial, simulation_options) {\r\n        const data = this.create_simulation_data(trial, simulation_options);\r\n        this.jsPsych.finishTrial(data);\r\n    }\r\n    simulate_visual(trial, simulation_options, load_callback) {\r\n        const data = this.create_simulation_data(trial, simulation_options);\r\n        const display_element = this.jsPsych.getDisplayElement();\r\n        this.trial(display_element, trial);\r\n        load_callback();\r\n        if (data.rt !== null) {\r\n            this.jsPsych.pluginAPI.clickTarget(display_element.querySelector(`div[data-choice=\"${data.response}\"] button`), data.rt);\r\n        }\r\n    }\r\n}\r\nHtmlButtonResponsePlugin.info = info;\n\nexport { HtmlButtonResponsePlugin as default };\n//# sourceMappingURL=index.js.map\n","import { ParameterType } from 'jspsych';\n\nconst info = {\r\n    name: \"survey-text\",\r\n    parameters: {\r\n        questions: {\r\n            type: ParameterType.COMPLEX,\r\n            array: true,\r\n            pretty_name: \"Questions\",\r\n            default: undefined,\r\n            nested: {\r\n                /** Question prompt. */\r\n                prompt: {\r\n                    type: ParameterType.HTML_STRING,\r\n                    pretty_name: \"Prompt\",\r\n                    default: undefined,\r\n                },\r\n                /** Placeholder text in the response text box. */\r\n                placeholder: {\r\n                    type: ParameterType.STRING,\r\n                    pretty_name: \"Placeholder\",\r\n                    default: \"\",\r\n                },\r\n                /** The number of rows for the response text box. */\r\n                rows: {\r\n                    type: ParameterType.INT,\r\n                    pretty_name: \"Rows\",\r\n                    default: 1,\r\n                },\r\n                /** The number of columns for the response text box. */\r\n                columns: {\r\n                    type: ParameterType.INT,\r\n                    pretty_name: \"Columns\",\r\n                    default: 40,\r\n                },\r\n                /** Whether or not a response to this question must be given in order to continue. */\r\n                required: {\r\n                    type: ParameterType.BOOL,\r\n                    pretty_name: \"Required\",\r\n                    default: false,\r\n                },\r\n                /** Name of the question in the trial data. If no name is given, the questions are named Q0, Q1, etc. */\r\n                name: {\r\n                    type: ParameterType.STRING,\r\n                    pretty_name: \"Question Name\",\r\n                    default: \"\",\r\n                },\r\n            },\r\n        },\r\n        /** If true, the order of the questions in the 'questions' array will be randomized. */\r\n        randomize_question_order: {\r\n            type: ParameterType.BOOL,\r\n            pretty_name: \"Randomize Question Order\",\r\n            default: false,\r\n        },\r\n        /** HTML-formatted string to display at top of the page above all of the questions. */\r\n        preamble: {\r\n            type: ParameterType.HTML_STRING,\r\n            pretty_name: \"Preamble\",\r\n            default: null,\r\n        },\r\n        /** Label of the button to submit responses. */\r\n        button_label: {\r\n            type: ParameterType.STRING,\r\n            pretty_name: \"Button label\",\r\n            default: \"Continue\",\r\n        },\r\n        /** Setting this to true will enable browser auto-complete or auto-fill for the form. */\r\n        autocomplete: {\r\n            type: ParameterType.BOOL,\r\n            pretty_name: \"Allow autocomplete\",\r\n            default: false,\r\n        },\r\n    },\r\n};\r\n/**\r\n * **survey-text**\r\n *\r\n * jsPsych plugin for free text response survey questions\r\n *\r\n * @author Josh de Leeuw\r\n * @see {@link https://www.jspsych.org/plugins/jspsych-survey-text/ survey-text plugin documentation on jspsych.org}\r\n */\r\nclass SurveyTextPlugin {\r\n    constructor(jsPsych) {\r\n        this.jsPsych = jsPsych;\r\n    }\r\n    trial(display_element, trial) {\r\n        for (var i = 0; i < trial.questions.length; i++) {\r\n            if (typeof trial.questions[i].rows == \"undefined\") {\r\n                trial.questions[i].rows = 1;\r\n            }\r\n        }\r\n        for (var i = 0; i < trial.questions.length; i++) {\r\n            if (typeof trial.questions[i].columns == \"undefined\") {\r\n                trial.questions[i].columns = 40;\r\n            }\r\n        }\r\n        for (var i = 0; i < trial.questions.length; i++) {\r\n            if (typeof trial.questions[i].value == \"undefined\") {\r\n                trial.questions[i].value = \"\";\r\n            }\r\n        }\r\n        var html = \"\";\r\n        // show preamble text\r\n        if (trial.preamble !== null) {\r\n            html +=\r\n                '<div id=\"jspsych-survey-text-preamble\" class=\"jspsych-survey-text-preamble\">' +\r\n                    trial.preamble +\r\n                    \"</div>\";\r\n        }\r\n        // start form\r\n        if (trial.autocomplete) {\r\n            html += '<form id=\"jspsych-survey-text-form\">';\r\n        }\r\n        else {\r\n            html += '<form id=\"jspsych-survey-text-form\" autocomplete=\"off\">';\r\n        }\r\n        // generate question order\r\n        var question_order = [];\r\n        for (var i = 0; i < trial.questions.length; i++) {\r\n            question_order.push(i);\r\n        }\r\n        if (trial.randomize_question_order) {\r\n            question_order = this.jsPsych.randomization.shuffle(question_order);\r\n        }\r\n        // add questions\r\n        for (var i = 0; i < trial.questions.length; i++) {\r\n            var question = trial.questions[question_order[i]];\r\n            var question_index = question_order[i];\r\n            html +=\r\n                '<div id=\"jspsych-survey-text-' +\r\n                    question_index +\r\n                    '\" class=\"jspsych-survey-text-question\" style=\"margin: 2em 0em;\">';\r\n            html += '<p class=\"jspsych-survey-text\">' + question.prompt + \"</p>\";\r\n            var autofocus = i == 0 ? \"autofocus\" : \"\";\r\n            var req = question.required ? \"required\" : \"\";\r\n            if (question.rows == 1) {\r\n                html +=\r\n                    '<input type=\"text\" id=\"input-' +\r\n                        question_index +\r\n                        '\"  name=\"#jspsych-survey-text-response-' +\r\n                        question_index +\r\n                        '\" data-name=\"' +\r\n                        question.name +\r\n                        '\" size=\"' +\r\n                        question.columns +\r\n                        '\" ' +\r\n                        autofocus +\r\n                        \" \" +\r\n                        req +\r\n                        ' placeholder=\"' +\r\n                        question.placeholder +\r\n                        '\"></input>';\r\n            }\r\n            else {\r\n                html +=\r\n                    '<textarea id=\"input-' +\r\n                        question_index +\r\n                        '\" name=\"#jspsych-survey-text-response-' +\r\n                        question_index +\r\n                        '\" data-name=\"' +\r\n                        question.name +\r\n                        '\" cols=\"' +\r\n                        question.columns +\r\n                        '\" rows=\"' +\r\n                        question.rows +\r\n                        '\" ' +\r\n                        autofocus +\r\n                        \" \" +\r\n                        req +\r\n                        ' placeholder=\"' +\r\n                        question.placeholder +\r\n                        '\"></textarea>';\r\n            }\r\n            html += \"</div>\";\r\n        }\r\n        // add submit button\r\n        html +=\r\n            '<input type=\"submit\" id=\"jspsych-survey-text-next\" class=\"jspsych-btn jspsych-survey-text\" value=\"' +\r\n                trial.button_label +\r\n                '\"></input>';\r\n        html += \"</form>\";\r\n        display_element.innerHTML = html;\r\n        // backup in case autofocus doesn't work\r\n        display_element.querySelector(\"#input-\" + question_order[0]).focus();\r\n        display_element.querySelector(\"#jspsych-survey-text-form\").addEventListener(\"submit\", (e) => {\r\n            e.preventDefault();\r\n            // measure response time\r\n            var endTime = performance.now();\r\n            var response_time = Math.round(endTime - startTime);\r\n            // create object to hold responses\r\n            var question_data = {};\r\n            for (var index = 0; index < trial.questions.length; index++) {\r\n                var id = \"Q\" + index;\r\n                var q_element = document\r\n                    .querySelector(\"#jspsych-survey-text-\" + index)\r\n                    .querySelector(\"textarea, input\");\r\n                var val = q_element.value;\r\n                var name = q_element.attributes[\"data-name\"].value;\r\n                if (name == \"\") {\r\n                    name = id;\r\n                }\r\n                var obje = {};\r\n                obje[name] = val;\r\n                Object.assign(question_data, obje);\r\n            }\r\n            // save data\r\n            var trialdata = {\r\n                rt: response_time,\r\n                response: question_data,\r\n            };\r\n            display_element.innerHTML = \"\";\r\n            // next trial\r\n            this.jsPsych.finishTrial(trialdata);\r\n        });\r\n        var startTime = performance.now();\r\n    }\r\n    simulate(trial, simulation_mode, simulation_options, load_callback) {\r\n        if (simulation_mode == \"data-only\") {\r\n            load_callback();\r\n            this.simulate_data_only(trial, simulation_options);\r\n        }\r\n        if (simulation_mode == \"visual\") {\r\n            this.simulate_visual(trial, simulation_options, load_callback);\r\n        }\r\n    }\r\n    create_simulation_data(trial, simulation_options) {\r\n        const question_data = {};\r\n        let rt = 1000;\r\n        for (const q of trial.questions) {\r\n            const name = q.name ? q.name : `Q${trial.questions.indexOf(q)}`;\r\n            const ans_words = q.rows == 1\r\n                ? this.jsPsych.randomization.sampleExponential(0.25)\r\n                : this.jsPsych.randomization.randomInt(1, 10) * q.rows;\r\n            question_data[name] = this.jsPsych.randomization.randomWords({\r\n                exactly: ans_words,\r\n                join: \" \",\r\n            });\r\n            rt += this.jsPsych.randomization.sampleExGaussian(2000, 400, 0.004, true);\r\n        }\r\n        const default_data = {\r\n            response: question_data,\r\n            rt: rt,\r\n        };\r\n        const data = this.jsPsych.pluginAPI.mergeSimulationData(default_data, simulation_options);\r\n        this.jsPsych.pluginAPI.ensureSimulationDataConsistency(trial, data);\r\n        return data;\r\n    }\r\n    simulate_data_only(trial, simulation_options) {\r\n        const data = this.create_simulation_data(trial, simulation_options);\r\n        this.jsPsych.finishTrial(data);\r\n    }\r\n    simulate_visual(trial, simulation_options, load_callback) {\r\n        const data = this.create_simulation_data(trial, simulation_options);\r\n        const display_element = this.jsPsych.getDisplayElement();\r\n        this.trial(display_element, trial);\r\n        load_callback();\r\n        const answers = Object.entries(data.response).map((x) => {\r\n            return x[1];\r\n        });\r\n        for (let i = 0; i < answers.length; i++) {\r\n            this.jsPsych.pluginAPI.fillTextInput(display_element.querySelector(`#input-${i}`), answers[i], ((data.rt - 1000) / answers.length) * (i + 1));\r\n        }\r\n        this.jsPsych.pluginAPI.clickTarget(display_element.querySelector(\"#jspsych-survey-text-next\"), data.rt);\r\n    }\r\n}\r\nSurveyTextPlugin.info = info;\n\nexport { SurveyTextPlugin as default };\n//# sourceMappingURL=index.js.map\n","import { twoLetterPair, checkEmpty, createTable } from \"./utils\";\nimport HtmlKeyboardResponsePlugin from \"@jspsych/plugin-html-keyboard-response\";\nimport PreloadPlugin from \"@jspsych/plugin-preload\";\nimport SurveyMultiSelectPlugin from \"@jspsych/plugin-survey-multi-select\";\nimport FullscreenPlugin from \"@jspsych/plugin-fullscreen\";\nimport InstructionsPlugin from \"@jspsych/plugin-instructions\";\nimport jspsychKeyboardDisplay from \"./jspsych-keyboard-display\";\nimport SurveyMultiChoicePlugin from \"@jspsych/plugin-survey-multi-choice\";\nimport HtmlButtonResponsePlugin from \"@jspsych/plugin-html-button-response\";\nimport SurveyTextPlugin from \"@jspsych/plugin-survey-text\";\n\nexport const DICT = {\n    'preload': PreloadPlugin,\n    'checkbox': SurveyMultiSelectPlugin,\n    'choice': SurveyMultiChoicePlugin,\n    'fullscreen': FullscreenPlugin,\n    'instruct': InstructionsPlugin,\n    'response': HtmlKeyboardResponsePlugin,\n    'display': jspsychKeyboardDisplay,\n    'button': HtmlButtonResponsePlugin,\n    'text': SurveyTextPlugin\n}\n/** \n* @summary The function does the following:\n    a. After a response, update the score and the history of keyboard presses.\n    b. Check if the keyboard press is valid.\n    c. Record time lapses before making the first response.\n    d. Assign ${info.rt} to ${response.rt_valid}.\n    e. Compare the typed key with the expected key from ${trial.choices[i]} (i for alternating purpose) to update the score.\n*\n* @param {ParamDataTypeHere} parameterNameHere - Brief description of the parameter here. Note: For other notations of data types, please refer to JSDocs: DataTypes command.\n* @param {object} info          - response time and keyboard behavior of participants responding to this stimulus\n* @param {object} response      - statistics to record and update at each round, e.g., rt_valid for response time of valid pressing\n* @param {object} trail         - timeline object containing all nececessary components to run this trial\n* @param {Array} response_history       - an array of history keyboard pressings\n* @param {object} counter       - a counter used to determine the expected keyboard behaviors\n* @param {html-element} display_html    - html element, i.e., the content of displayed stimulus\n* @param {function} end_trial   - a function to call before the end of this trial\n\n*/\nfunction keypressCallback(info, response, trial, response_history, counter, display_html, end_trial) {\n\n    display_html.querySelector(\"#jspsych-html-keyboard-response-stimulus\").className += \" responded\";\n    if (response.score === 0) {\n        response.rt_valid = info.rt;\n    }\n    if (response.typed === 0) {\n        response.rt_typed = info.rt;\n    }\n    let i = counter.i % trial.choices.length;\n    if (jsPsych.pluginAPI.compareKeys(info.key, trial.choices[i])) {\n        // if participants press the correct key in correct order\n        response.score++;\n        counter.i++;\n        // update html to show improved score\n        $(\"#keypress-count\").html(response.score.toString());\n        // add a node to help display this choice\n        response_history.push({key: info.key, color: 'green'})\n    } else {\n        // if participants press the wrong key or in wrong order\n        // add a node to help display this choice\n        response_history.push({key: info.key, color: 'red'})\n    }\n    /**\n     * if trial.num_keypress_display > 0, display histories of keyboard pressings\n     */\n    if (trial.num_keypress_display > 0) {\n        if (response_history.length > trial.num_keypress_display) {\n            response_history.shift(); //remove first (oldestl) element from array\n        }\n        let keysList = document.getElementById(\"keypress-hist\");\n        keysList.innerHTML = '';\n        response_history.forEach(function(hist){\n            let li = document.createElement('li');\n            li.textContent = hist.key;\n            li.style.color = hist.color;\n            keysList.appendChild(li);\n        });\n    }\n    response.typed++;\n    /**\n     * end the trial if \n     */\n    if (trial.response_ends_trial) { \n        end_trial()\n    }\n};\n\n/**\n * This function helps to render jspsych compatiple plugins from yaml configurations\n * \n * @param\n */\nexport function renderPlugin({\n    args = {}, on_start = undefined, on_load = undefined, on_finish = undefined,\n    conditional_function = undefined, loop_function = undefined\n} = {}) {\n    args.type = DICT[args.type]\n    args = {\n        on_start: on_start, on_finish: on_finish, on_load: on_load, ...args\n    }\n    if ([conditional_function, loop_function].some(x => typeof x !== \"undefined\")) {\n        return {\n            timeline: args, conditional_function: conditional_function, loop_function: loop_function\n        }\n    }\n    return args\n}\n\n\nexport function bonusInstruction({\n    instruction = undefined, example = undefined, questions = [], condition = \"\",\n    randomize_order = true, data = {}, feedback_success = \"success\", feedback_failure = \"failure\",\n} = {}) {\n\n    let correct = false;\n    const pages = [];\n    pages.push(\n        \"\".concat( \"<div class='instruction'>\", instruction.title, instruction[condition], \"</div>\" )\n    );\n    example.title.forEach( (title, index) => {\n        title = example.header[index] + title;\n        let display_html = $('<div />', {html: title});\n        display_html.find('p#bonus-number').html(example[condition][index]);\n        display_html.find('span#target-number').html('10');\n        pages.push(display_html.html());\n    })\n    \n    const welcome = {\n        type: InstructionsPlugin,\n        pages: pages,\n        show_clickable_nav: true\n    };\n\n    const comprehension = {\n        type: SurveyMultiChoicePlugin,\n        questions: questions.map(x => ({ ...x, required: true })),\n        randomize_question_order: randomize_order,\n        on_finish: function (data) {\n            let { Q0, Q1, Q2 } = data.response;\n            data.pass = correct = [\n                Q0.includes(\"At least\"),\n                Q1.endsWith(condition === \"binary streak\" ? \"0.00\" : \"0.20\"),\n                Q2.endsWith(\"0.30\")\n            ].every(Boolean)\n        },\n    };\n\n    const feedback = {\n        type: HtmlButtonResponsePlugin,\n        stimulus: \"\",\n        on_start: (trial) => {\n            trial.stimulus = correct ? feedback_success : feedback_failure\n        },\n        choices: [\"Continue\"]\n    };\n\n    return {\n        timeline: [welcome, comprehension, feedback],\n        loop_function: (data) => {\n            return !data.select('pass').values[0]; //or simple correct!\n        },\n        data: data\n    }\n}\n\n\n/**\n * This class defines contents of practice phase\n * \n * @param {numeric} numOfTrial           The number of total trials during the practice stage\n * @param {numeric} trial_duration       An integer indicates the time (in seconds) before time out\n * @param {numeric} num_keypress_display The number of past keyboard pressings to be displayed, hide if set to zero\n * @param {string[]} list                A list of two-letter pairs be serve as correct responses (in sequential order) at each practice trial\n * @param {object} data                  What additional data should the trial store\n * @param {numeric} fontsize             Fontsize of displayed stimulus\n */\nexport class practicePhase {\n    constructor({ numOfTrial = 1, trial_duration = 5, fixation_duration = 3, num_keypress_display = 0, fontsize = \"\", no_prompt = false, show_stat = false, list = [], data = {} } = {}) {\n        this.numOfTrial = numOfTrial;\n        this.num_keypress_display = num_keypress_display;\n        this.data = data;\n        this.fontsize = fontsize;\n        this.no_prompt = no_prompt;\n        this.show_stat = show_stat;\n        if (list.length < numOfTrial) {\n            // randomly generate ${numOfTrial} two-letter pairs\n            const n = list.length;\n            list = list.concat(twoLetterPair(numOfTrial-n));\n        };\n        this.list = list.slice(0, numOfTrial);\n        this.trial_duration = trial_duration * 1000;\n        this.fixation_duration = fixation_duration * 1000;\n        this.phase = 'practice';\n        this.trial_i = 0;\n    }\n\n    getFixation(timeline) {\n        timeline.push({\n            on_start: (trial) => {\n                let [a, b] = trial.stimulus;\n                trial.stimulus = `<p>type ${a} and then ${b} as many times as possible</p>`;\n            },\n            type: HtmlKeyboardResponsePlugin,\n            stimulus: jsPsych.timelineVariable(\"choices\"),\n            choices: \"NO_KEYS\",\n            trial_duration: this.fixation_duration,\n            data: { phase: `${this.phase}_fixation` },\n        });\n        timeline.push({\n            type: HtmlKeyboardResponsePlugin,\n            stimulus: \"<div style='font-size: 72px'>+</div>\",\n            choices: \"NO_KEYS\",\n            trial_duration: 1000,\n            data: { phase: `${this.phase}_fixation` },\n        });\n    }\n\n    getFeedback(timeline) {\n        const feedback = [];\n        const on_load = () => {\n            const data = [...Object.values(jsPsych.data.get().filter({ phase: 'practice' }))][0];\n            if (!checkEmpty(data)) {\n                const selected_column = ['rt_valid', 'rt_typed', 'typed', 'score'];\n                const table = createTable(data, selected_column);\n                const avg_score = jsPsych.data.get().filter({ phase: 'practice' }).select('score').mean()\n                if (this.show_stat) {\n                    $(\"div.jspsych-content\").prepend(table);\n                    jsPsych.getCurrentTrial().data.avg_score = avg_score;\n                } else {\n                    jsPsych.finishTrial({ avg_score: avg_score });\n                };\n            };\n        };\n        feedback.push({\n            type: HtmlButtonResponsePlugin,\n            on_load: on_load,\n            stimulus: \"\",\n            data: { phase: \"statistics\" },\n            choices: [\"Continue\"],\n        });\n        timeline.push({\n            timeline: feedback,\n            conditional_function: () => this.trial_i === this.numOfTrial\n        })\n    }\n\n    getStimulusCallback(){\n        const cb = [];\n        cb.push({\n            callback_function: keypressCallback, \n            accept_allkeys: true, \n        });\n        return cb\n    }\n\n    getStimulusOnStart(trial){\n        let [a, b] = trial.choices;\n        trial.prompt = this.no_prompt ? \"\" : `<p id=\"display-prompt\">type ${a} and then ${b} as many times as possible</p>`;\n        this.trial_i++;\n    }\n\n    getTimelineVariable() {\n        const result = [];\n        this.list.forEach((pair) => {\n            let [first, second] = pair.split(',');\n            result.push({ choices: [first, second] })\n        })\n        return result\n    }\n\n    getStimulus(timeline) {\n        timeline.push({\n            on_start: (trial) => this.getStimulusOnStart(trial),\n            type: jspsychKeyboardDisplay,\n            stimulus: \"\",\n            choices: jsPsych.timelineVariable(\"choices\"),\n            remain_time_display: true,\n            num_keypress_display: this.num_keypress_display,\n            response_ends_trial: false,\n            data: this.data,\n            trial_duration: () => this.trial_duration,\n            response_callbacks: () => this.getStimulusCallback(),\n        })\n    }\n\n    on_timeline_start() {\n        $('div#jspsych-content').css({ \"font-size\": this.fontsize });\n    }\n    on_timeline_finish() {\n        $('div#jspsych-content').css({ \"font-size\": \"\" });\n    }\n\n    getTrial() {\n        const timeline = [];\n        // push fixation\n        this.getFixation(timeline);\n        // push practice\n        this.getStimulus(timeline);\n        // push feedback\n        this.getFeedback(timeline);\n        return {\n            timeline: timeline,\n            timeline_variables: this.getTimelineVariable(),\n            randomize_order: true,\n            on_timeline_start: () => this.on_timeline_start(),\n            on_timeline_finish: () => this.on_timeline_finish(),\n            conditional_function: () => this.numOfTrial > 0,\n        }\n    }\n}\n\n\nfunction getDist(args){\n    if (args.choice === \"normal\"){\n        return (mean) => {\n            const {std} = args[args.choice];\n            return Math.floor(jsPsych.randomization.sampleNormal(mean, std));\n        }\n    } else if (args.choice === \"uniform\"){\n        const {range} = args[args.choice];\n        return (mean) => {\n            return jsPsych.randomization.randomInt(mean-range, mean+range);\n        }\n    }\n}\n\nexport class bonusPhase extends practicePhase {\n    constructor({ numOfTrial = 1, trial_duration = 5, fixation_duration = 3, feedback_duration = 2,  fontsize = \"\", no_prompt = false, list = [], data = {}, target_dist = {}, condition = undefined, success_feedback = undefined, failure_feedback = undefined, early_stop = undefined} = {}) {\n        super({ numOfTrial: numOfTrial, trial_duration: trial_duration, fixation_duration: fixation_duration, fontsize: fontsize, no_prompt: no_prompt, list: list, data: data });\n        this.dist = getDist(target_dist);\n        this.phase = \"bonus\";\n        this.success_feedback = success_feedback;\n        this.failure_feedback = failure_feedback;\n        this.condition = condition;\n        this.early_stop = early_stop;\n        this.feedback_duration = feedback_duration * 1000;\n        this.reward_agent = (condition === \"binary\") ?\n            new Binary() : (condition === \"continuous streak\") ?\n            new ContinuousStreak() : new BinaryStreak()\n    }\n\n    getStimulusCallback(){\n        /**\n         * other than every statistsics we recorded during the practice phase,\n         * we also need to tell if the number of valid presses have surpassed target threshold\n         */\n        const cb = [];\n        cb.push({\n            callback_function: (info, response, trial, response_history, counter, display_html, end_trial) => {\n                keypressCallback(info, response, trial, response_history, counter, display_html, end_trial);\n                if (response.score >= trial.data.target) {\n                    trial.data.success = true;\n                    this.early_stop && end_trial(trial.data);\n                }\n            }, \n            accept_allkeys: true, \n        });\n        return cb\n    }\n\n    getStimulusOnStart(trial) {\n        /**\n         * generate a target threshold number for this trial/round\n         */\n        super.getStimulusOnStart(trial);\n        const mean = jsPsych.data.get().select('avg_score').mean() || Infinity; //a default infinity is applied if we cannot find avg-score information in the database \n        trial.data = {\n            success: false,             //whether or not participants win this round\n            target: Math.max(this.dist(mean), 0),    //a random number based on practice performance\n            ...trial.data\n        }\n    }\n\n    getFeedback(timeline) {\n        timeline.push({\n            on_start: (trial) => {\n                const response = jsPsych.data.getLastTrialData().trials[0];\n                const bonus_message = this.reward_agent.step(response.success)\n                let feedback = \"\";\n                if (response.success) {\n                    feedback = this.success_feedback;\n                } else {\n                    feedback = this.failure_feedback;\n                }\n                let feedback_html = $('<div />', {html: feedback});\n                feedback_html.find('p#bonus-number').html(bonus_message);\n                feedback_html.find('span#target-number').html(response.target);\n                trial.stimulus = feedback_html.html();\n            },\n            on_finish: (data) => {\n                let bonus =  this.reward_agent.bonus;\n                if (this.condition === \"continuous streak\" && this.trial_i === this.numOfTrial) {\n                    // the bonus in the last round isn't counted when under this condition\n                    bonus = +(0.1 * this.reward_agent.streak).toPrecision(2);\n                }\n                data.bonus =  bonus;\n                data.streak = this.reward_agent.streak || 0;\n            },\n            type: HtmlKeyboardResponsePlugin,\n            stimulus: \"\",\n            choices: \"NO_KEYS\",\n            trial_duration: this.feedback_duration,\n            data: { phase: \"bonus_feedback\" },\n        })\n    }\n}\n\nclass Binary {\n\n    constructor() {\n        this.overall_bonus = 0;\n        this.bonus = 0;\n    }\n    step(succcess) {\n        this.bonus = this.score(succcess);\n        this.overall_bonus += this.bonus;\n        return `Bonus: + $${this.bonus.toFixed(2)}`;\n    }\n    score(success){\n        return success? 0.1 : 0\n    }\n}\n\nclass ContinuousStreak extends Binary {\n\n    constructor() {\n        super();\n        this.streak = 0;\n    }\n    step(succcess) {\n        this.bonus = this.score(succcess);\n        if(succcess){\n            this.streak += 1;\n            return `Current Streak: ${this.streak}`;\n        } else {\n            this.overall_bonus += this.bonus;\n            this.streak = 0;\n            return `Current Streak: 0 <br> Bonus: + $${this.bonus.toFixed(2)}`; \n        }\n    }\n    score(succcess){\n        return succcess? 0 : this.streak*0.1\n    }\n}\n\nclass BinaryStreak extends ContinuousStreak {\n\n    step(success){\n        this.bonus = this.score(success);\n        if(success){\n            this.streak += 1;\n            if (this.bonus) {\n                this.overall_bonus += this.bonus;\n                this.streak = 0;\n                return `Current Streak: 3/3 <br> Bonus: + $${this.bonus.toFixed(2)}`\n            } else {\n                return `Current Streak: ${this.streak}/3`\n            }\n        } else {\n            this.streak = 0; \n            return `Current Streak: 0/3`\n        }\n    }\n    score(success){\n        return !success? 0 : ((this.streak+1)===3) ? 0.3 : 0\n    }\n}","import \"jspsych/css/jspsych.css\";\nimport \"./style.css\";\nimport jsPsych from \"./prepare\"\nimport jsPsychPipe from '@jspsych-contrib/plugin-pipe';\nimport { readYaml, checkEmpty, fullScreenHandler} from \"./utils\";\nimport {practicePhase, renderPlugin, bonusInstruction, bonusPhase, DICT} from \"./jspsych-typing\";\n\n\n\n// read configurations\nconst args = await readYaml('configs/default.yaml');\n\n// obtain subject id and assign their group condition \nconst subject_id = jsPsych.randomization.randomID(10); \nconst condition = await jsPsychPipe.getCondition(args.exp_id);\nargs.condition = ['binary streak', 'continuous streak', 'binary'][condition];\n\njsPsych.data.addProperties({\n    date: new Date(),\n    subject_id: subject_id,\n    condition: args.condition\n});\nconsole.log(`you are in group ${args.condition}`);\n\n// timeline\nconst timeline = [];\n\n// preload assets || preload_conditon determines whether or not we include this procedure\nconst preload_condition = () => !checkEmpty(args.images_to_preload.images);\ntimeline.push( renderPlugin({args: args.images_to_preload, conditional_function: preload_condition}) );\n\n// fullscreen if required\nconst fullscreen_onstart = (trial) => {\n    document.addEventListener('fullscreenchange', fullScreenHandler)\n};\ntimeline.push( renderPlugin({args: args.fullscreen, on_start: fullscreen_onstart}));\n\n// consent page\ntimeline.push( renderPlugin({args: args.consent}))\n\n// instruction page\ntimeline.push( renderPlugin({args: args.practice_instruction}))\n\n// practice phase\ntimeline.push( new practicePhase(args.practice).getTrial() )\n\n// bonus phase\ntimeline.push( bonusInstruction({condition: args.condition, ...args.bonus_instruction}))\n\n\n// bonus phase trials start here\ntimeline.push( new bonusPhase({condition: args.condition, ...args.bonus}).getTrial() )\n\n// debrief\nconst debrief = [];\nargs.debrief.timeline.map(e => {\n    e.type = DICT[e.type];\n    if (e.name === \"email\"){\n        e.on_start = (trial) => {\n            const totalBonus = jsPsych.data.get().filter({phase: 'bonus_feedback'}).select('bonus').sum();\n            trial.preamble = trial.preamble.replaceAll('${totalBonus}', totalBonus);\n        }\n    }\n    debrief.push(e);\n});\ntimeline.push({\n    timeline: debrief\n})\n\n// save data via DataPiepe\ntimeline.push({\n    type: jsPsychPipe,\n    action: 'save',\n    experiment_id: args.exp_id,\n    filename: `${subject_id}.csv`,\n    data_string: () => {\n        const data = jsPsych.data.get().csv();\n        return data;\n    },\n    on_finish: () => {\n        document.body.innerHTML = `\n        <div align='center' style=\"margin: 10%\">\n            <p>Thank you for participating in the study!<p>\n            <p>You may close your window now<p> \n        </div>\n        `\n    }\n})\n\njsPsych.opts.show_progress_bar = args.show_progress_bar;\n// $('div#jspsych-content').css({max-width: `${args.screenwidth} px`}); can achieve similar result\njsPsych.opts.experiment_width = args.screenwidth;\njsPsych.run(timeline);\n"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","reject","fulfilled","step","e","rejected","result","commonjsGlobal","getAllProperties","object","properties","key","autoBind","self","include","exclude","filter","match","pattern","descriptor","version","MigrationError","message","unique","arr","deepCopy","obj","out","x","utils","DataColumn","values","s","v","numbers","a","b","middle","mean","sum_square_error","mse","eval_fn","saveTextToFile","textstr","filename","blobToSave","blobURL","link","JSON2CSV","objArray","array","line","columns","row","keyString","col","valueString","getQueryString","p","DataCollection","data","new_data","other_data_collection","n","trial","filters","f","filtered_data","keep","fn","column","o","delete_key","names","pretty","format","data_string","JsPsychData","jsPsych","data_object","progress","default_data","node_id","parent_node_id","display_element","whichvar","fullscreenchange","HardwareAPI","evt","mess","jspsychEvt","KeyboardListenerAPI","getRootElement","areResponsesCaseSensitive","minimumValidRt","rootElement","listener","string","validResponses","allowHeldKey","callback_function","valid_responses","rt_method","persist","audio_context","audio_context_start_time","allow_held_key","minimum_valid_rt","startTime","r","rt","key1","key2","ParameterType","universalPluginParameters","preloadParameterTypes","MediaAPI","useWebaudio","webaudioContext","videoID","audioID","files","callback_complete","callback_load","filepath","callback_error","error_msg","n_loaded","load_audio_file_webaudio","source","count","request","buffer","err","load_audio_file_html5audio","audio","handleCanPlayThrough","handleError","handleAbort","file","images","i","img","src","videos","video","video_buffers","videoBlob","timeline_description","preloadPaths","type","traverseTimeline","node","inheritedTrialType","_a","_b","_c","_d","childNode","pluginName","parameters","_name","preload","name","parameterName","parameterType","parameterValue","elements","element","stream","recorder","opts","SimulationAPI","event","delay","target","text","choices","possible_keys","flat_choices","simulation_options","min_time","TimeoutAPI","callback","handle","handler","createJointPluginAPIObject","settings","wordList","words","options","word","generateWordWithMaxLength","generateRandomWord","rightSize","wordUsed","randInt","lessThan","total","results","token","relativeIndex","randomWords$1","alea","module","global","define","Alea","seed","me","mash","Mash","t","copy","impl","xg","state","prng","h","seedrandom","setSeed","repeat","repetitions","unpack","arr_isArray","rep_isArray","reps","allsamples","j","shuffle","unpackArray","copy_array","m","shuffleNoRepeats","equalityTest","random_shuffle","random_pick","new_neighbor","shuffleAlternateGroups","arr_groups","random_group_order","n_groups","group_order","randomized_groups","min_length","sampleWithoutReplacement","size","sampleWithReplacement","weights","normalized_weights","weight_sum","weight","cumulative_weights","samp","rnd","index","factorial","factors","design","factorName","factor","new_design","level","cell","randomID","length","chars","randomInt","lower","upper","sampleBernoulli","sampleNormal","standard_deviation","randn_bm","sampleExponential","rate","sampleExGaussian","positive","randomWords","u","randomization","turkInfo","turk","param","url","regexS","submitToTurk","assignmentId","turkSubmitTo","form","hiddenField","TimelineNode","parent","relativeID","node_data","merged_parameters","merged_data","timeline_parameters","order","internal","conditional_result","have_node_to_run","target_complete","variable_name","val","loc","all_tvs","all_tvs_vals","so_far","total_trials","completed_trials","id","trials","ms","JsPsych","extension","timeline","simulation_mode","trial_data_values","current_trial","key_val","extensionCallbackResults","onExtensionCallbacksFinished","ext_data_values","end_message","varname","immediate","new_timeline","preload_callback","display","extensions","error_message","finish_result","done_handler","complete","load_callback","trial_complete","trial_sim_opts","info","ip","exclusions","mw","mh","msg","proportion_complete","initJsPsych","jsPsych$1","PipePlugin","progressHTML","trial_data","expID","response","error","isNothing","subject","isObject","toArray","sequence","extend","sourceKeys","cycle","isNegativeZero","number","isNothing_1","isObject_1","toArray_1","repeat_1","isNegativeZero_1","extend_1","common","formatError","exception","compact","where","YAMLException$1","reason","mark","getLine","lineStart","lineEnd","position","maxLineLength","head","tail","maxHalfLength","padStart","max","makeSnippet","re","lineStarts","lineEnds","foundLineNo","lineNoLength","snippet","TYPE_CONSTRUCTOR_OPTIONS","YAML_NODE_KINDS","compileStyleAliases","map","style","alias","Type$1","tag","compileList","schema","currentType","newIndex","previousType","previousIndex","compileMap","collectType","Schema$1","definition","implicit","explicit","type$1","str","seq","failsafe","resolveYamlNull","constructYamlNull","isNull","_null","resolveYamlBoolean","constructYamlBoolean","isBoolean","bool","isHexCode","c","isOctCode","isDecCode","resolveYamlInteger","hasDigits","ch","constructYamlInteger","sign","isInteger","int","YAML_FLOAT_PATTERN","resolveYamlFloat","constructYamlFloat","SCIENTIFIC_WITHOUT_DOT","representYamlFloat","res","isFloat","float","json","core","YAML_DATE_REGEXP","YAML_TIMESTAMP_REGEXP","resolveYamlTimestamp","constructYamlTimestamp","year","month","day","hour","minute","second","fraction","delta","tz_hour","tz_minute","date","representYamlTimestamp","timestamp","resolveYamlMerge","merge","BASE64_MAP","resolveYamlBinary","code","idx","bitlen","constructYamlBinary","tailbits","input","bits","representYamlBinary","isBinary","binary","_hasOwnProperty$3","_toString$2","resolveYamlOmap","objectKeys","pair","pairKey","pairHasKey","constructYamlOmap","omap","_toString$1","resolveYamlPairs","keys","constructYamlPairs","pairs","_hasOwnProperty$2","resolveYamlSet","constructYamlSet","set","_default","_hasOwnProperty$1","CONTEXT_FLOW_IN","CONTEXT_FLOW_OUT","CONTEXT_BLOCK_IN","CONTEXT_BLOCK_OUT","CHOMPING_CLIP","CHOMPING_STRIP","CHOMPING_KEEP","PATTERN_NON_PRINTABLE","PATTERN_NON_ASCII_LINE_BREAKS","PATTERN_FLOW_INDICATORS","PATTERN_TAG_HANDLE","PATTERN_TAG_URI","_class","is_EOL","is_WHITE_SPACE","is_WS_OR_EOL","is_FLOW_INDICATOR","fromHexCode","lc","escapedHexLen","fromDecimalCode","simpleEscapeSequence","charFromCodepoint","simpleEscapeCheck","simpleEscapeMap","State$1","generateError","throwError","throwWarning","directiveHandlers","args","major","minor","prefix","captureSegment","start","end","checkJson","_position","_length","_character","_result","mergeMappings","destination","overridableKeys","quantity","storeMappingPair","keyTag","keyNode","valueNode","startLine","startLineStart","startPos","readLineBreak","skipSeparationSpace","allowComments","checkIndent","lineBreaks","testDocumentSeparator","writeFoldedLines","readPlainScalar","nodeIndent","withinFlowCollection","preceding","following","captureStart","captureEnd","hasPendingContent","_line","_lineStart","_lineIndent","_kind","readSingleQuotedScalar","readDoubleQuotedScalar","hexLength","hexResult","tmp","readFlowCollection","readNext","_pos","_tag","_anchor","terminator","isPair","isExplicitPair","isMapping","composeNode","readBlockScalar","folding","chomping","didReadContent","detectedIndent","textIndent","emptyLines","atMoreIndented","readBlockSequence","detected","readBlockMapping","flowIndent","allowCompact","_keyLine","_keyLineStart","_keyPos","atExplicitKey","readTagProperty","isVerbatim","isNamed","tagHandle","tagName","readAnchorProperty","readAlias","parentIndent","nodeContext","allowToSeek","allowBlockStyles","allowBlockScalars","allowBlockCollections","indentStatus","atNewLine","hasContent","typeIndex","typeQuantity","typeList","blockIndent","readDocument","documentStart","directiveName","directiveArgs","hasDirectives","loadDocuments","nullpos","loadAll$1","iterator","documents","load$1","loadAll_1","load_1","loader","_toString","_hasOwnProperty","CHAR_BOM","CHAR_TAB","CHAR_LINE_FEED","CHAR_CARRIAGE_RETURN","CHAR_SPACE","CHAR_EXCLAMATION","CHAR_DOUBLE_QUOTE","CHAR_SHARP","CHAR_PERCENT","CHAR_AMPERSAND","CHAR_SINGLE_QUOTE","CHAR_ASTERISK","CHAR_COMMA","CHAR_MINUS","CHAR_COLON","CHAR_EQUALS","CHAR_GREATER_THAN","CHAR_QUESTION","CHAR_COMMERCIAL_AT","CHAR_LEFT_SQUARE_BRACKET","CHAR_RIGHT_SQUARE_BRACKET","CHAR_GRAVE_ACCENT","CHAR_LEFT_CURLY_BRACKET","CHAR_VERTICAL_LINE","CHAR_RIGHT_CURLY_BRACKET","ESCAPE_SEQUENCES","DEPRECATED_BOOLEANS_SYNTAX","DEPRECATED_BASE60_SYNTAX","compileStyleMap","encodeHex","character","QUOTING_TYPE_SINGLE","QUOTING_TYPE_DOUBLE","State","indentString","spaces","ind","next","generateNextLine","testImplicitResolving","isWhitespace","isPrintable","isNsCharOrWhitespace","isPlainSafe","prev","inblock","cIsNsCharOrWhitespace","cIsNsChar","isPlainSafeFirst","isPlainSafeLast","codePointAt","pos","first","needIndentIndicator","leadingSpaceRe","STYLE_PLAIN","STYLE_SINGLE","STYLE_LITERAL","STYLE_FOLDED","STYLE_DOUBLE","chooseScalarStyle","singleLineOnly","indentPerLevel","lineWidth","testAmbiguousType","quotingType","forceQuotes","char","prevChar","hasLineBreak","hasFoldableLine","shouldTrackWidth","previousLineBreak","plain","writeScalar","iskey","indent","testAmbiguity","blockHeader","dropEndingNewline","foldString","escapeString","indentIndicator","clip","chomp","width","lineRe","nextLF","foldLine","prevMoreIndented","moreIndented","breakRe","curr","escapeSeq","writeFlowSequence","writeNode","writeBlockSequence","writeFlowMapping","objectKeyList","objectKey","objectValue","pairBuffer","writeBlockMapping","explicitPair","detectType","block","isblockseq","tagStr","objectOrArray","duplicateIndex","duplicate","getDuplicateReferences","objects","duplicatesIndexes","inspectNode","dump$1","dump_1","dumper","renamed","from","to","Type","Schema","FAILSAFE_SCHEMA","JSON_SCHEMA","CORE_SCHEMA","DEFAULT_SCHEMA","load","loadAll","dump","YAMLException","types","safeLoad","safeLoadAll","safeDump","jsYaml","readYaml","yamlData","yamlObject","yaml","LETTERS","twoLetterPair","num","rtn_list","letters","l","checkEmpty","countDownTimer","seconds","timer","partialFunc","func","rest","createTable","dataList","keyList","stats","table","headerRow","header","th","stat","tr","td","d","k","fullScreenHandler","HtmlKeyboardResponsePlugin","new_html","end_trial","keyboardListener","after_response","PreloadPlugin","success","timeout","failed_images","failed_audio","failed_video","detailed_errors","in_safe_mode","experiment_timeline","auto_preload","trial_preloads","html","update_loading_progress_bar","loaded","percent_loaded","total_n","preload_progress_bar","on_success","on_timeout","loaded_success","after_error","stop_with_error_message","load_video","cb","file_loading_success","file_loading_error","load_audio","load_images","err_msg","after_success","SurveyMultiSelectPlugin","plugin_id_name","plugin_id_selector","_join","cssstr","trial_form_id","trial_form","preamble_id_name","question_order","question","question_id","question_classes","question_selector","option_id_name","input_name","input_id","label","endTime","response_time","question_data","inputboxes","currentChecked","obje","q","n_answers","selections","answers","FullscreenPlugin","keyboardNotAllowed","InstructionsPlugin","current_page","view_history","start_time","last_page_update_time","btnListener","back","show_current_page","pagenum_display","nav_html","allowed","add_current_page_to_view_history","endTrial","current_time","page_view_time","keyboard_listener","curr_page","view_time","advance","backup","HtmlKeyboardDisplayResponsePlugin","keyboardResponse","keyListeners","keysPressed","counter","SurveyMultiChoicePlugin","required_attr","HtmlButtonResponsePlugin","buttons","btn_el","choice","end_time","btns","SurveyTextPlugin","question_index","autofocus","req","q_element","trialdata","ans_words","DICT","jspsychKeyboardDisplay","keypressCallback","response_history","display_html","keysList","hist","li","renderPlugin","on_start","on_load","on_finish","conditional_function","loop_function","bonusInstruction","instruction","example","questions","condition","randomize_order","feedback_success","feedback_failure","correct","pages","title","welcome","comprehension","Q0","Q1","Q2","practicePhase","numOfTrial","trial_duration","fixation_duration","num_keypress_display","fontsize","no_prompt","show_stat","list","feedback","avg_score","getDist","std","range","bonusPhase","feedback_duration","target_dist","success_feedback","failure_feedback","early_stop","Binary","ContinuousStreak","BinaryStreak","bonus_message","feedback_html","bonus","succcess","subject_id","jsPsychPipe","preload_condition","fullscreen_onstart","debrief","totalBonus"],"mappings":"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"}